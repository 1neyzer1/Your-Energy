{"version":3,"file":"main-BFbGlFjz.js","sources":["../../src/js/global-notification.js","../../src/js/form-validation.js","../../src/api.js","../../src/js/rating-modal.js","../../src/js/favorites.js","../../src/js/header.js","../../src/js/exercise-modal.js","../../src/js/exercises.js","../../src/js/quote.js","../../src/main.js"],"sourcesContent":["// Global notification system\nlet notificationTimeout = null;\n\n/**\n * Shows a global notification message\n * @param {string} message - The message to display\n * @param {string} type - The type of notification ('success' or 'error')\n */\nexport function showGlobalNotification(message, type = 'success') {\n  const notification = document.getElementById('js-global-notification');\n  const textElement = document.getElementById('js-global-notification-text');\n\n  if (!notification || !textElement) return;\n\n  // Clear any existing timeout\n  if (notificationTimeout) {\n    clearTimeout(notificationTimeout);\n    notificationTimeout = null;\n  }\n\n  // Set the message and type\n  textElement.textContent = message;\n  notification.classList.remove('global-notification--error');\n  if (type === 'error') {\n    notification.classList.add('global-notification--error');\n  }\n\n  // Show the notification\n  notification.classList.add('global-notification--visible');\n\n  // Auto-hide after 3 seconds\n  notificationTimeout = setTimeout(() => {\n    hideGlobalNotification();\n  }, 3000);\n}\n\n/**\n * Hides the global notification\n */\nexport function hideGlobalNotification() {\n  const notification = document.getElementById('js-global-notification');\n  const textElement = document.getElementById('js-global-notification-text');\n\n  if (!notification) return;\n\n  // Clear timeout if exists\n  if (notificationTimeout) {\n    clearTimeout(notificationTimeout);\n    notificationTimeout = null;\n  }\n\n  // Hide the notification\n  notification.classList.remove('global-notification--visible');\n\n  // Clear content after animation\n  setTimeout(() => {\n    if (textElement) {\n      textElement.textContent = '';\n    }\n    notification.classList.remove('global-notification--error');\n  }, 300);\n}\n\n/**\n * Initializes the global notification system\n */\nexport function initGlobalNotification() {\n  const closeBtn = document.getElementById('js-global-notification-close');\n\n  if (closeBtn) {\n    closeBtn.addEventListener('click', hideGlobalNotification);\n  }\n}\n","/**\n * Form validation utilities module\n * Provides reusable functions for form field validation and error display\n */\n\n/**\n * Shows an error message for a form field\n * @param {HTMLElement} inputElement - The input/textarea element\n * @param {HTMLElement} errorElement - The element to display error message\n * @param {string} message - The error message to display\n */\nexport function showFieldError(inputElement, errorElement, message) {\n  if (inputElement) {\n    // Determine the appropriate error class based on element type\n    const errorClass = inputElement.classList.contains('rating-modal__textarea')\n      ? 'rating-modal__textarea--error'\n      : inputElement.classList.contains('rating-modal__input')\n      ? 'rating-modal__input--error'\n      : inputElement.classList.contains('footer__subscribe-form-input')\n      ? 'footer__subscribe-form-input--error'\n      : 'form-field--error';\n\n    inputElement.classList.add(errorClass);\n  }\n\n  if (errorElement) {\n    errorElement.textContent = message;\n    errorElement.classList.add('form-error--visible');\n  }\n}\n\n/**\n * Hides the error message for a form field\n * @param {HTMLElement} inputElement - The input/textarea element\n * @param {HTMLElement} errorElement - The element displaying error message\n */\nexport function hideFieldError(inputElement, errorElement) {\n  if (inputElement) {\n    inputElement.classList.remove(\n      'rating-modal__input--error',\n      'rating-modal__textarea--error',\n      'footer__subscribe-form-input--error',\n      'form-field--error'\n    );\n  }\n\n  if (errorElement) {\n    errorElement.textContent = '';\n    errorElement.classList.remove('form-error--visible');\n  }\n}\n\n/**\n * Validates an email address\n * @param {string} email - The email address to validate\n * @returns {boolean} True if email is valid, false otherwise\n */\nexport function validateEmail(email) {\n  const emailRegex = /^\\w+(\\.\\w+)?@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/;\n  return emailRegex.test(email);\n}\n\n/**\n * Validates that a field is not empty\n * @param {string} value - The value to validate\n * @returns {boolean} True if value is not empty, false otherwise\n */\nexport function validateRequired(value) {\n  return value.trim().length > 0;\n}\n","const BASE_URL = 'https://your-energy.b.goit.study/api';\n\nconst buildUrl = (path, params = {}) => {\n  const url = new URL(`${BASE_URL}${path}`);\n  Object.entries(params).forEach(([key, value]) => {\n    if (value === undefined || value === null || value === '') {\n      return;\n    }\n    url.searchParams.set(key, value);\n  });\n  return url.toString();\n};\n\nconst request = async (url, options = {}) => {\n  const response = await fetch(url, {\n    headers: {\n      'Content-Type': 'application/json',\n      ...options.headers,\n    },\n    ...options,\n  });\n\n  const hasBody = response.status !== 204;\n  const contentType = response.headers.get('content-type') || '';\n  let data = null;\n\n  if (hasBody) {\n    if (contentType.includes('application/json')) {\n      data = await response.json().catch(() => null);\n    } else {\n      data = await response.text().catch(() => null);\n    }\n  }\n\n  if (!response.ok) {\n    const message =\n      data && typeof data === 'object' && data.message\n        ? data.message\n        : typeof data === 'string'\n        ? data\n        : 'Request failed';\n    const error = new Error(message);\n    error.status = response.status;\n    error.data = data;\n    throw error;\n  }\n\n  return data;\n};\n\nexport const getQuote = () => request(buildUrl('/quote'));\n\nexport const getFilters = ({ filter, page = 1, limit = 12 } = {}) =>\n  request(buildUrl('/filters', { filter, page, limit }));\n\nexport const getExercises = ({ page = 1, limit = 8, ...params } = {}) =>\n  request(buildUrl('/exercises', { ...params, page, limit }));\n\nexport const getExerciseById = exerciseId =>\n  request(buildUrl(`/exercises/${exerciseId}`));\n\nexport const patchExerciseRating = (exerciseId, payload) =>\n  request(buildUrl(`/exercises/${exerciseId}/rating`), {\n    method: 'PATCH',\n    body: JSON.stringify(payload),\n  });\n\nexport const postSubscription = email =>\n  request(buildUrl('/subscription'), {\n    method: 'POST',\n    body: JSON.stringify({ email }),\n  });\n","import { showGlobalNotification } from './global-notification.js';\nimport {\n  showFieldError,\n  hideFieldError,\n  validateEmail,\n} from './form-validation.js';\nimport { patchExerciseRating } from '../api.js';\n\nlet currentExerciseIdForRating = null;\nlet onRatingSuccess = null;\nlet listenersAttached = false;\nlet lastFocusedElement = null;\nlet focusableElements = [];\n\nfunction getModalElements() {\n  const modal = document.getElementById('js-rating-modal');\n  if (!modal) return null;\n\n  return {\n    modal,\n    overlay: modal.querySelector('.rating-modal__overlay'),\n    closeBtn: document.getElementById('js-rating-modal-close'),\n    serverMessage: document.getElementById('js-rating-server-message'),\n    serverMessageText: document.getElementById('js-rating-server-message-text'),\n    serverMessageClose: document.getElementById('js-rating-server-message-close'),\n    ratingValue: document.getElementById('js-rating-modal-value'),\n    ratingError: document.getElementById('js-rating-error'),\n    form: document.getElementById('js-rating-modal-form'),\n    emailInput: document.getElementById('js-rating-modal-email'),\n    emailError: document.getElementById('js-email-error'),\n    commentTextarea: document.getElementById('js-rating-modal-comment'),\n    commentError: document.getElementById('js-comment-error'),\n    starInputs: Array.from(\n      modal.querySelectorAll('.rating-modal__star-input')\n    ),\n    starLabels: Array.from(modal.querySelectorAll('.rating-modal__star')),\n  };\n}\n\nfunction getFocusableElements(modal) {\n  const selectors = [\n    'button:not([disabled])',\n    'a[href]',\n    'input:not([disabled])',\n    'textarea:not([disabled])',\n    'select:not([disabled])',\n    '[tabindex]:not([tabindex=\"-1\"])',\n  ];\n  return Array.from(modal.querySelectorAll(selectors.join(','))).filter(\n    element => !element.hasAttribute('aria-hidden')\n  );\n}\n\nfunction updateFocusableElements(modal) {\n  focusableElements = getFocusableElements(modal);\n}\n\nfunction trapFocus(event) {\n  if (event.key !== 'Tab' || focusableElements.length === 0) {\n    return;\n  }\n\n  const first = focusableElements[0];\n  const last = focusableElements[focusableElements.length - 1];\n\n  if (event.shiftKey && document.activeElement === first) {\n    event.preventDefault();\n    last.focus();\n    return;\n  }\n\n  if (!event.shiftKey && document.activeElement === last) {\n    event.preventDefault();\n    first.focus();\n  }\n}\n\nfunction showServerMessage(message, type = 'error') {\n  const elements = getModalElements();\n  if (!elements?.serverMessage || !elements.serverMessageText) return;\n\n  elements.serverMessageText.textContent = message;\n  elements.serverMessage.classList.remove(\n    'rating-modal__server-message--error',\n    'rating-modal__server-message--success'\n  );\n  elements.serverMessage.classList.add(`rating-modal__server-message--${type}`);\n  elements.serverMessage.classList.add('rating-modal__server-message--visible');\n}\n\nfunction hideServerMessage() {\n  const elements = getModalElements();\n  if (!elements?.serverMessage) return;\n\n  elements.serverMessage.classList.remove('rating-modal__server-message--visible');\n  if (elements.serverMessageText) {\n    elements.serverMessageText.textContent = '';\n  }\n  elements.serverMessage.classList.remove(\n    'rating-modal__server-message--error',\n    'rating-modal__server-message--success'\n  );\n}\n\nfunction getSelectedRating() {\n  const elements = getModalElements();\n  if (!elements) return 0;\n  const selected = elements.starInputs.find(input => input.checked);\n  return selected ? Number(selected.value) : 0;\n}\n\nfunction updateStars(rating) {\n  const elements = getModalElements();\n  if (!elements) return;\n\n  elements.starLabels.forEach((label, index) => {\n    if (index < rating) {\n      label.classList.add('rating-modal__star--active');\n      const path = label.querySelector('path');\n      if (path) {\n        path.setAttribute('fill', '#EEA10C');\n        path.setAttribute('stroke', '#EEA10C');\n      }\n    } else {\n      label.classList.remove('rating-modal__star--active');\n      const path = label.querySelector('path');\n      if (path) {\n        path.setAttribute('fill', 'none');\n        path.setAttribute('stroke', 'currentColor');\n      }\n    }\n  });\n}\n\nfunction updateRatingValue(value) {\n  const elements = getModalElements();\n  if (elements?.ratingValue) {\n    elements.ratingValue.textContent = value.toFixed(1);\n  }\n}\n\nfunction resetRatingForm() {\n  const elements = getModalElements();\n  if (!elements) return;\n\n  if (elements.form) elements.form.reset();\n  elements.starInputs.forEach(input => {\n    input.checked = false;\n  });\n  updateStars(0);\n  updateRatingValue(0);\n\n  hideFieldError(elements.emailInput, elements.emailError);\n  hideFieldError(elements.commentTextarea, elements.commentError);\n  hideFieldError(null, elements.ratingError);\n  hideServerMessage();\n}\n\nfunction handleClose() {\n  closeRatingModal();\n}\n\nfunction handleOverlayClick(event) {\n  if (event.target === event.currentTarget) {\n    closeRatingModal();\n  }\n}\n\nfunction handleKeydown(event) {\n  if (event.key === 'Escape') {\n    closeRatingModal();\n    return;\n  }\n\n  trapFocus(event);\n}\n\nfunction handleStarChange(event) {\n  const rating = Number(event.target.value);\n  updateStars(rating);\n  updateRatingValue(rating);\n  const elements = getModalElements();\n  if (elements?.ratingError) {\n    hideFieldError(null, elements.ratingError);\n  }\n}\n\nfunction handleStarHover(event) {\n  const rating = Number(event.currentTarget.dataset.rating || 0);\n  updateStars(rating);\n}\n\nfunction handleStarLeave() {\n  const selectedRating = getSelectedRating();\n  updateStars(selectedRating);\n}\n\nfunction handleEmailInput() {\n  const elements = getModalElements();\n  if (elements) {\n    hideFieldError(elements.emailInput, elements.emailError);\n  }\n}\n\nfunction handleCommentInput() {\n  const elements = getModalElements();\n  if (elements) {\n    hideFieldError(elements.commentTextarea, elements.commentError);\n  }\n}\n\nfunction handleServerMessageClose() {\n  hideServerMessage();\n}\n\nasync function handleFormSubmit(event) {\n  event.preventDefault();\n  const elements = getModalElements();\n  if (!elements) return;\n\n  const selectedRating = getSelectedRating();\n  const email = elements.emailInput?.value.trim() || '';\n  const review = elements.commentTextarea?.value.trim() || '';\n\n  let hasErrors = false;\n\n  if (!selectedRating) {\n    showFieldError(null, elements.ratingError, 'Please select a rating');\n    hasErrors = true;\n  } else {\n    hideFieldError(null, elements.ratingError);\n  }\n\n  if (!email) {\n    showFieldError(\n      elements.emailInput,\n      elements.emailError,\n      'Please enter your email'\n    );\n    hasErrors = true;\n  } else if (!validateEmail(email)) {\n    showFieldError(\n      elements.emailInput,\n      elements.emailError,\n      'Please enter a valid email address'\n    );\n    hasErrors = true;\n  } else {\n    hideFieldError(elements.emailInput, elements.emailError);\n  }\n\n  if (!review) {\n    showFieldError(\n      elements.commentTextarea,\n      elements.commentError,\n      'Please enter your comment'\n    );\n    hasErrors = true;\n  } else {\n    hideFieldError(elements.commentTextarea, elements.commentError);\n  }\n\n  if (hasErrors || !currentExerciseIdForRating) {\n    return;\n  }\n\n  hideServerMessage();\n\n  try {\n    const data = await patchExerciseRating(currentExerciseIdForRating, {\n      rate: selectedRating,\n      email,\n      review,\n    });\n\n    const exerciseName = data?.name || 'the exercise';\n    const exerciseId = currentExerciseIdForRating;\n    const successCallback = onRatingSuccess;\n\n    closeRatingModal();\n\n    showGlobalNotification(\n      `Thank you, your review for exercise ${exerciseName} has been submitted`,\n      'success'\n    );\n\n    if (successCallback && exerciseId) {\n      successCallback(exerciseId);\n    }\n  } catch (error) {\n    const errorMessage =\n      error.message || 'Failed to submit rating. Please try again.';\n    showServerMessage(errorMessage, 'error');\n  }\n}\n\nfunction attachListeners() {\n  if (listenersAttached) return;\n  const elements = getModalElements();\n  if (!elements) return;\n\n  elements.closeBtn?.addEventListener('click', handleClose);\n  elements.overlay?.addEventListener('click', handleOverlayClick);\n  elements.serverMessageClose?.addEventListener(\n    'click',\n    handleServerMessageClose\n  );\n  elements.form?.addEventListener('submit', handleFormSubmit);\n  elements.emailInput?.addEventListener('input', handleEmailInput);\n  elements.commentTextarea?.addEventListener('input', handleCommentInput);\n  elements.starInputs.forEach(input =>\n    input.addEventListener('change', handleStarChange)\n  );\n  elements.starLabels.forEach(label => {\n    label.addEventListener('mouseenter', handleStarHover);\n    label.addEventListener('mouseleave', handleStarLeave);\n  });\n  document.addEventListener('keydown', handleKeydown);\n\n  listenersAttached = true;\n}\n\nfunction detachListeners() {\n  if (!listenersAttached) return;\n  const elements = getModalElements();\n  if (!elements) return;\n\n  elements.closeBtn?.removeEventListener('click', handleClose);\n  elements.overlay?.removeEventListener('click', handleOverlayClick);\n  elements.serverMessageClose?.removeEventListener(\n    'click',\n    handleServerMessageClose\n  );\n  elements.form?.removeEventListener('submit', handleFormSubmit);\n  elements.emailInput?.removeEventListener('input', handleEmailInput);\n  elements.commentTextarea?.removeEventListener('input', handleCommentInput);\n  elements.starInputs.forEach(input =>\n    input.removeEventListener('change', handleStarChange)\n  );\n  elements.starLabels.forEach(label => {\n    label.removeEventListener('mouseenter', handleStarHover);\n    label.removeEventListener('mouseleave', handleStarLeave);\n  });\n  document.removeEventListener('keydown', handleKeydown);\n\n  listenersAttached = false;\n}\n\nexport function openRatingModal(exerciseId, options = {}) {\n  const elements = getModalElements();\n  if (!elements) return;\n\n  currentExerciseIdForRating = exerciseId;\n  onRatingSuccess = options.onSuccess || null;\n  lastFocusedElement = document.activeElement;\n\n  resetRatingForm();\n  attachListeners();\n\n  elements.modal.classList.add('rating-modal--open');\n  elements.modal.setAttribute('aria-hidden', 'false');\n  document.body.style.overflow = 'hidden';\n\n  updateFocusableElements(elements.modal);\n  focusableElements[0]?.focus();\n}\n\nfunction closeRatingModal() {\n  const elements = getModalElements();\n  if (!elements) return;\n\n  detachListeners();\n\n  elements.modal.classList.remove('rating-modal--open');\n  elements.modal.setAttribute('aria-hidden', 'true');\n  document.body.style.overflow = '';\n  currentExerciseIdForRating = null;\n  onRatingSuccess = null;\n\n  if (\n    lastFocusedElement &&\n    typeof lastFocusedElement.focus === 'function' &&\n    document.contains(lastFocusedElement)\n  ) {\n    lastFocusedElement.focus();\n  }\n  lastFocusedElement = null;\n}\n\nexport { closeRatingModal };\n\nexport function initRatingModal() {\n  const elements = getModalElements();\n  if (elements?.modal) {\n    elements.modal.setAttribute('aria-hidden', 'true');\n  }\n}\n","// LocalStorage key for favorites\nconst FAVORITES_KEY = 'favorites';\n\n// Get all favorite exercise IDs from LocalStorage\nexport function getFavorites() {\n  try {\n    const favorites = localStorage.getItem(FAVORITES_KEY);\n    return favorites ? JSON.parse(favorites) : [];\n  } catch (error) {\n    return [];\n  }\n}\n\n// Add exercise ID to favorites\nexport function addToFavorites(exerciseId) {\n  try {\n    const favorites = getFavorites();\n    if (!favorites.includes(exerciseId)) {\n      favorites.push(exerciseId);\n      localStorage.setItem(FAVORITES_KEY, JSON.stringify(favorites));\n      return true;\n    }\n    return false;\n  } catch (error) {\n    return false;\n  }\n}\n\n// Remove exercise ID from favorites\nexport function removeFromFavorites(exerciseId) {\n  try {\n    const favorites = getFavorites();\n    const filteredFavorites = favorites.filter(id => id !== exerciseId);\n    localStorage.setItem(FAVORITES_KEY, JSON.stringify(filteredFavorites));\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\n// Check if exercise is in favorites\nexport function isFavorite(exerciseId) {\n  const favorites = getFavorites();\n  return favorites.includes(exerciseId);\n}\n\n// Toggle favorite status (add if not exists, remove if exists)\nexport function toggleFavorite(exerciseId) {\n  if (isFavorite(exerciseId)) {\n    removeFromFavorites(exerciseId);\n    return false; // removed\n  } else {\n    addToFavorites(exerciseId);\n    return true; // added\n  }\n}\n\n","// Current active page\nlet currentPage = 'home';\n\nlet mobileMenu = null;\nlet burgerButton = null;\nlet closeButton = null;\n\nfunction getPageFromLocation() {\n  const bodyPage = document.body?.dataset.page;\n  if (bodyPage) return bodyPage;\n\n  const pathname = window.location.pathname;\n  if (pathname.endsWith('favorites.html')) return 'favorites';\n  return 'home';\n}\n\nfunction setActiveLinks(page) {\n  const navLinks = document.querySelectorAll('.header__nav-link');\n  navLinks.forEach(link => {\n    const linkPage = link.getAttribute('data-page');\n    if (linkPage === page) {\n      link.classList.add('header__nav-link--active');\n      link.setAttribute('aria-current', 'page');\n    } else {\n      link.classList.remove('header__nav-link--active');\n      link.removeAttribute('aria-current');\n    }\n  });\n\n  const mobileNavLinks = document.querySelectorAll('.mobile-menu__nav-link');\n  mobileNavLinks.forEach(link => {\n    const linkPage = link.getAttribute('data-page');\n    if (linkPage === page) {\n      link.classList.add('mobile-menu__nav-link--active');\n      link.setAttribute('aria-current', 'page');\n    } else {\n      link.classList.remove('mobile-menu__nav-link--active');\n      link.removeAttribute('aria-current');\n    }\n  });\n}\n\nfunction openMobileMenu() {\n  if (mobileMenu) {\n    mobileMenu.classList.add('is-open');\n    document.body.style.overflow = 'hidden';\n    mobileMenu.setAttribute('aria-hidden', 'false');\n  }\n  if (burgerButton) {\n    burgerButton.setAttribute('aria-expanded', 'true');\n  }\n}\n\nfunction closeMobileMenu() {\n  if (mobileMenu) {\n    mobileMenu.classList.remove('is-open');\n    document.body.style.overflow = '';\n    mobileMenu.setAttribute('aria-hidden', 'true');\n  }\n  if (burgerButton) {\n    burgerButton.setAttribute('aria-expanded', 'false');\n  }\n}\n\nexport function initHeader() {\n  currentPage = getPageFromLocation();\n  setActiveLinks(currentPage);\n\n  mobileMenu = document.querySelector('.mobile-menu');\n  burgerButton = document.querySelector('.header__burger');\n  closeButton = document.querySelector('.mobile-menu__close');\n\n  if (mobileMenu) {\n    mobileMenu.setAttribute('aria-hidden', 'true');\n  }\n\n  if (burgerButton) {\n    burgerButton.addEventListener('click', openMobileMenu);\n  }\n\n  if (closeButton) {\n    closeButton.addEventListener('click', closeMobileMenu);\n  }\n\n  const mobileNavLinks = document.querySelectorAll('.mobile-menu__nav-link');\n  mobileNavLinks.forEach(link => {\n    link.addEventListener('click', () => {\n      closeMobileMenu();\n    });\n  });\n\n  if (mobileMenu) {\n    mobileMenu.addEventListener('click', e => {\n      if (e.target === mobileMenu) {\n        closeMobileMenu();\n      }\n    });\n  }\n}\n\nexport function getCurrentPage() {\n  return currentPage;\n}\n","import { openRatingModal } from './rating-modal.js';\nimport { isFavorite, toggleFavorite } from './favorites.js';\nimport { getCurrentPage } from './header.js';\nimport { loadFavoritesExercises } from './exercises.js';\nimport { getExerciseById } from '../api.js';\nimport { showGlobalNotification } from './global-notification.js';\n\nlet currentExerciseIdForRating = null;\nlet listenersAttached = false;\nlet lastFocusedElement = null;\nlet focusableElements = [];\n\nfunction getModalElements() {\n  const modal = document.getElementById('js-exercise-modal');\n  if (!modal) return null;\n\n  return {\n    modal,\n    overlay: modal.querySelector('.exercise-modal__overlay'),\n    closeBtn: document.getElementById('js-exercise-modal-close'),\n    image: document.getElementById('js-exercise-modal-image'),\n    video: document.getElementById('js-exercise-modal-video'),\n    title: document.getElementById('js-exercise-modal-title'),\n    ratingValue: modal.querySelector('.exercise-modal__rating-value'),\n    ratingStars: modal.querySelector('.exercise-modal__rating-stars'),\n    target: document.getElementById('js-exercise-modal-target'),\n    bodyPart: document.getElementById('js-exercise-modal-body-part'),\n    equipment: document.getElementById('js-exercise-modal-equipment'),\n    popular: document.getElementById('js-exercise-modal-popular'),\n    calories: document.getElementById('js-exercise-modal-calories'),\n    time: document.getElementById('js-exercise-modal-time'),\n    description: document.getElementById('js-exercise-modal-description'),\n    favoriteBtn: document.getElementById('js-exercise-modal-favorites'),\n    ratingBtn: document.getElementById('js-exercise-modal-rating-btn'),\n  };\n}\n\nfunction getFocusableElements(modal) {\n  const selectors = [\n    'button:not([disabled])',\n    'a[href]',\n    'input:not([disabled])',\n    'textarea:not([disabled])',\n    'select:not([disabled])',\n    '[tabindex]:not([tabindex=\"-1\"])',\n  ];\n  return Array.from(modal.querySelectorAll(selectors.join(','))).filter(\n    element => !element.hasAttribute('aria-hidden')\n  );\n}\n\nfunction updateFocusableElements(modal) {\n  focusableElements = getFocusableElements(modal);\n}\n\nfunction trapFocus(event) {\n  if (event.key !== 'Tab' || focusableElements.length === 0) {\n    return;\n  }\n\n  const first = focusableElements[0];\n  const last = focusableElements[focusableElements.length - 1];\n\n  if (event.shiftKey && document.activeElement === first) {\n    event.preventDefault();\n    last.focus();\n    return;\n  }\n\n  if (!event.shiftKey && document.activeElement === last) {\n    event.preventDefault();\n    first.focus();\n  }\n}\n\nfunction handleClose() {\n  closeExerciseModal();\n}\n\nfunction handleOverlayClick(event) {\n  if (event.target === event.currentTarget) {\n    closeExerciseModal();\n  }\n}\n\nfunction handleKeydown(event) {\n  if (event.key === 'Escape') {\n    closeExerciseModal();\n    return;\n  }\n\n  trapFocus(event);\n}\n\nfunction handleFavoriteClick() {\n  const exerciseId = currentExerciseIdForRating;\n  if (!exerciseId) return;\n\n  const wasAdded = toggleFavorite(exerciseId);\n  updateFavoriteButton(exerciseId);\n\n  if (!wasAdded && getCurrentPage() === 'favorites') {\n    closeExerciseModal();\n    loadFavoritesExercises();\n  }\n}\n\nfunction handleRatingClick() {\n  const exerciseId = currentExerciseIdForRating;\n  if (!exerciseId) return;\n\n  closeExerciseModal();\n  openRatingModal(exerciseId, {\n    onSuccess: () => openExerciseModal(exerciseId),\n  });\n}\n\nfunction attachListeners() {\n  if (listenersAttached) return;\n  const elements = getModalElements();\n  if (!elements) return;\n\n  elements.closeBtn?.addEventListener('click', handleClose);\n  elements.overlay?.addEventListener('click', handleOverlayClick);\n  elements.favoriteBtn?.addEventListener('click', handleFavoriteClick);\n  elements.ratingBtn?.addEventListener('click', handleRatingClick);\n  document.addEventListener('keydown', handleKeydown);\n\n  listenersAttached = true;\n}\n\nfunction detachListeners() {\n  if (!listenersAttached) return;\n  const elements = getModalElements();\n  if (!elements) return;\n\n  elements.closeBtn?.removeEventListener('click', handleClose);\n  elements.overlay?.removeEventListener('click', handleOverlayClick);\n  elements.favoriteBtn?.removeEventListener('click', handleFavoriteClick);\n  elements.ratingBtn?.removeEventListener('click', handleRatingClick);\n  document.removeEventListener('keydown', handleKeydown);\n\n  listenersAttached = false;\n}\n\nfunction updateFavoriteButton(exerciseId) {\n  const elements = getModalElements();\n  if (!elements?.favoriteBtn) return;\n\n  const isInFavorites = isFavorite(exerciseId);\n  const btnText = elements.favoriteBtn.querySelector('span');\n  const btnIcon = elements.favoriteBtn.querySelector('svg path');\n\n  if (isInFavorites) {\n    elements.favoriteBtn.classList.add('active');\n    if (btnText) btnText.textContent = 'Remove from favorites';\n    if (btnIcon) {\n      btnIcon.setAttribute('fill', 'currentColor');\n      btnIcon.removeAttribute('stroke');\n      btnIcon.removeAttribute('stroke-width');\n    }\n  } else {\n    elements.favoriteBtn.classList.remove('active');\n    if (btnText) btnText.textContent = 'Add to favorites';\n    if (btnIcon) {\n      btnIcon.setAttribute('fill', 'none');\n      btnIcon.setAttribute('stroke', 'currentColor');\n      btnIcon.setAttribute('stroke-width', '2');\n    }\n  }\n}\n\nexport async function openExerciseModal(exerciseId) {\n  const elements = getModalElements();\n  if (!elements) return;\n\n  currentExerciseIdForRating = exerciseId;\n  lastFocusedElement = document.activeElement;\n\n  elements.modal.classList.add('exercise-modal--open');\n  elements.modal.setAttribute('aria-hidden', 'false');\n  document.body.style.overflow = 'hidden';\n\n  attachListeners();\n  updateFocusableElements(elements.modal);\n  focusableElements[0]?.focus();\n\n  if (elements.title) elements.title.textContent = 'Loading...';\n  if (elements.ratingValue) elements.ratingValue.textContent = '0.0';\n  if (elements.target) elements.target.textContent = '';\n  if (elements.bodyPart) elements.bodyPart.textContent = '';\n  if (elements.equipment) elements.equipment.textContent = '';\n  if (elements.popular) elements.popular.textContent = '0';\n  if (elements.calories) elements.calories.textContent = '0';\n  if (elements.time) elements.time.textContent = '/0 min';\n  if (elements.description) elements.description.textContent = '';\n  if (elements.image) {\n    elements.image.src = '';\n    elements.image.classList.remove('is-hidden');\n  }\n  if (elements.video) {\n    elements.video.src = '';\n    elements.video.classList.remove('is-visible');\n    elements.video.pause();\n  }\n\n  try {\n    const exercise = await getExerciseById(exerciseId);\n    const videoUrl = exercise.videoUrl || exercise.video || exercise.videoURL;\n\n    if (videoUrl && elements.video) {\n      elements.video.src = videoUrl;\n      elements.video.classList.add('is-visible');\n      if (elements.image) {\n        elements.image.classList.add('is-hidden');\n      }\n    } else if (elements.image) {\n      elements.image.src = exercise.gifUrl || '';\n    }\n\n    if (elements.title) elements.title.textContent = exercise.name || '';\n    if (elements.target) elements.target.textContent = exercise.target || '';\n    if (elements.bodyPart)\n      elements.bodyPart.textContent = exercise.bodyPart || '';\n    if (elements.equipment)\n      elements.equipment.textContent = exercise.equipment || '';\n    if (elements.popular)\n      elements.popular.textContent = exercise.popularity || 0;\n    if (elements.calories)\n      elements.calories.textContent = exercise.burnedCalories || 0;\n    if (elements.time)\n      elements.time.textContent = `/${exercise.time || 0} min`;\n    if (elements.description)\n      elements.description.textContent = exercise.description || '';\n\n    if (elements.ratingValue) {\n      elements.ratingValue.textContent = (exercise.rating || 0).toFixed(1);\n    }\n\n    if (elements.ratingStars) {\n      const stars = elements.ratingStars.querySelectorAll(\n        '.exercise-modal__rating-star'\n      );\n      const rating = Math.round(exercise.rating || 0);\n\n      stars.forEach((star, index) => {\n        const path = star.querySelector('path');\n        if (index < rating) {\n          path.setAttribute('fill', '#EEA10C');\n          path.removeAttribute('stroke');\n          path.removeAttribute('stroke-width');\n        } else {\n          path.setAttribute('fill', 'none');\n          path.setAttribute('stroke', 'rgba(255,255,255,0.3)');\n          path.setAttribute('stroke-width', '1.5');\n        }\n      });\n    }\n\n    updateFavoriteButton(exerciseId);\n  } catch (error) {\n    if (elements.title) elements.title.textContent = 'Error loading exercise';\n    if (elements.description)\n      elements.description.textContent =\n        'Failed to load exercise details. Please try again later.';\n    showGlobalNotification(\n      error.message || 'Failed to load exercise details.',\n      'error'\n    );\n  }\n}\n\nexport function closeExerciseModal() {\n  const elements = getModalElements();\n  if (!elements) return;\n\n  detachListeners();\n\n  elements.modal.classList.remove('exercise-modal--open');\n  elements.modal.setAttribute('aria-hidden', 'true');\n  document.body.style.overflow = '';\n  currentExerciseIdForRating = null;\n\n  if (elements.video) {\n    elements.video.pause();\n    elements.video.src = '';\n    elements.video.classList.remove('is-visible');\n  }\n\n  if (\n    lastFocusedElement &&\n    typeof lastFocusedElement.focus === 'function' &&\n    document.contains(lastFocusedElement)\n  ) {\n    lastFocusedElement.focus();\n  }\n  lastFocusedElement = null;\n}\n\nexport function initExerciseModal() {\n  const elements = getModalElements();\n  if (elements?.modal) {\n    elements.modal.setAttribute('aria-hidden', 'true');\n  }\n}\n","import { openExerciseModal } from './exercise-modal.js';\nimport { getFavorites, removeFromFavorites } from './favorites.js';\nimport { showGlobalNotification } from './global-notification.js';\nimport { getExerciseById, getExercises, getFilters } from '../api.js';\n\nlet currentFilter = 'Muscles';\nlet currentPage = 1;\nlet currentCategory = null;\nlet currentSearchKeyword = '';\nlet currentMode = 'home';\n\nconst FILTERS_LIMIT = 12;\nconst EXERCISES_LIMIT = 8;\n\nconst getCardsContainer = () => document.getElementById('js-exercises-cards');\nconst getPaginationContainer = () =>\n  document.querySelector('.exercises__content__pagination');\nconst getSearchForm = () => document.getElementById('js-exercises-search');\nconst getSearchInput = () =>\n  document.getElementById('js-exercises-search-input');\nconst getHeading = () => document.getElementById('js-exercises-heading');\nconst getBreadcrumbs = () => document.getElementById('js-exercises-breadcrumbs');\nconst getContentContainer = () =>\n  document.querySelector('.exercises__content');\n\nfunction setCardsBusy(isBusy) {\n  const cardsContainer = getCardsContainer();\n  if (!cardsContainer) return;\n  cardsContainer.setAttribute('aria-busy', isBusy ? 'true' : 'false');\n}\n\nfunction showSearchField() {\n  const searchField = getSearchForm();\n  if (searchField) {\n    searchField.classList.remove('exercises__content__header-search--hidden');\n  }\n}\n\nfunction hideSearchField() {\n  const searchField = getSearchForm();\n  const searchInput = getSearchInput();\n  if (searchField) {\n    searchField.classList.add('exercises__content__header-search--hidden');\n  }\n  if (searchInput) {\n    searchInput.value = '';\n  }\n  currentSearchKeyword = '';\n}\n\nfunction formatCategoryLabel(label) {\n  if (!label) return '';\n  const trimmed = label.trim();\n  if (!trimmed) return label;\n  return trimmed.charAt(0).toUpperCase() + trimmed.slice(1);\n}\n\nfunction createBreadcrumbEntry(node) {\n  const entry = document.createElement('li');\n  entry.className = 'exercises__content__header-breadcrumbs-entry';\n  entry.appendChild(node);\n  return entry;\n}\n\nfunction updateHeadingLabel(label) {\n  const heading = getHeading();\n  if (heading) {\n    heading.textContent = label;\n  }\n}\n\nexport function updateBreadcrumbs(categoryName = null) {\n  const breadcrumbsContainer = getBreadcrumbs();\n  if (!breadcrumbsContainer) {\n    return;\n  }\n\n  breadcrumbsContainer.innerHTML = '';\n\n  if (currentMode === 'favorites') {\n    updateHeadingLabel('Favorites');\n\n    const favoritesTitle = document.createElement('span');\n    favoritesTitle.className =\n      'exercises__content__header-title exercises__content__header-breadcrumbs-current';\n    favoritesTitle.textContent = 'Favorites';\n    favoritesTitle.setAttribute('aria-current', 'page');\n    breadcrumbsContainer.appendChild(createBreadcrumbEntry(favoritesTitle));\n    return;\n  }\n\n  if (!categoryName) {\n    updateHeadingLabel('Exercises');\n\n    const exercisesTitle = document.createElement('span');\n    exercisesTitle.className =\n      'exercises__content__header-title exercises__content__header-breadcrumbs-current';\n    exercisesTitle.textContent = 'Exercises';\n    exercisesTitle.setAttribute('aria-current', 'page');\n    breadcrumbsContainer.appendChild(createBreadcrumbEntry(exercisesTitle));\n    return;\n  }\n\n  const categoryLabel = formatCategoryLabel(categoryName);\n  updateHeadingLabel(`Exercises: ${categoryLabel}`);\n\n  const exercisesBtn = document.createElement('button');\n  exercisesBtn.className =\n    'exercises__content__header-title exercises__content__header-breadcrumbs-item';\n  exercisesBtn.textContent = 'Exercises';\n  exercisesBtn.setAttribute('data-breadcrumb', 'exercises');\n  exercisesBtn.type = 'button';\n  exercisesBtn.addEventListener('click', () => {\n    currentCategory = null;\n    currentPage = 1;\n    loadExerciseCards(currentFilter, currentPage);\n  });\n  breadcrumbsContainer.appendChild(createBreadcrumbEntry(exercisesBtn));\n\n  const separator = document.createElement('span');\n  separator.className = 'exercises__content__header-breadcrumbs-separator';\n  separator.textContent = '/';\n  separator.setAttribute('aria-hidden', 'true');\n  breadcrumbsContainer.appendChild(createBreadcrumbEntry(separator));\n\n  const categorySpan = document.createElement('span');\n  categorySpan.className = 'exercises__content__header-breadcrumbs-current';\n  categorySpan.textContent = categoryLabel;\n  categorySpan.setAttribute('aria-current', 'page');\n  breadcrumbsContainer.appendChild(createBreadcrumbEntry(categorySpan));\n}\n\nfunction setActiveFilter(filter) {\n  currentFilter = filter;\n\n  const filterButtons = document.querySelectorAll(\n    '.exercises__content__header-filters-item'\n  );\n  filterButtons.forEach(button => {\n    const isActive = button.getAttribute('data-filter') === filter;\n    button.classList.toggle(\n      'exercises__content__header-filters-item--active',\n      isActive\n    );\n    button.setAttribute('aria-pressed', isActive ? 'true' : 'false');\n  });\n}\n\nexport function initFilters() {\n  const filterButtons = document.querySelectorAll(\n    '.exercises__content__header-filters-item'\n  );\n\n  if (!filterButtons.length) {\n    return;\n  }\n\n  filterButtons.forEach(button => {\n    button.addEventListener('click', () => {\n      const filter = button.getAttribute('data-filter');\n      if (!filter) return;\n\n      setActiveFilter(filter);\n      currentCategory = null;\n      currentSearchKeyword = '';\n      loadExerciseCards(filter, 1);\n    });\n  });\n\n  setActiveFilter(currentFilter);\n}\n\nfunction createCategoryCard(category) {\n  const categoryName = category.name || '';\n  const categoryFilter = category.filter || '';\n  const imageUrl = category.imgURL || '';\n\n  return `\n    <li>\n      <button\n        class=\"exercises__content__main__cards-item exercise-card exercise-card--category\"\n        type=\"button\"\n        data-action=\"open-category\"\n        data-category-name=\"${categoryName}\"\n        aria-label=\"Open ${categoryName} category\">\n        <div class=\"exercises__content__main__cards-item-image exercise-card__image\">\n          <img src=\"${imageUrl}\" alt=\"${categoryName} exercise\" loading=\"lazy\" decoding=\"async\" />\n          <div class=\"exercises__content__main__cards-item-overlay exercise-card__overlay\">\n            <div class=\"exercises__content__main__cards-item-overlay-name exercise-card__overlay-name\">${categoryName}</div>\n            <div class=\"exercises__content__main__cards-item-overlay-category exercise-card__overlay-category\">${categoryFilter}</div>\n          </div>\n        </div>\n      </button>\n    </li>\n  `;\n}\n\nfunction createExerciseCard(exercise) {\n  const rating = exercise.rating || 0;\n  const burnedCalories = exercise.burnedCalories || 0;\n  const time = exercise.time || 0;\n  const bodyPart = exercise.bodyPart || '';\n  const target = exercise.target || '';\n  const exerciseId = exercise._id || '';\n\n  const removeButtonHTML =\n    currentMode === 'favorites'\n      ? `\n      <button\n        class=\"exercises__content__main__cards-item-remove exercise-card__remove\"\n        type=\"button\"\n        data-action=\"remove-favorite\"\n        aria-label=\"Remove from favorites\">\n        <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n          <path d=\"M3 6H21\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n          <path d=\"M8 6V4H16V6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          <path d=\"M19 6L18 20H6L5 6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          <path d=\"M10 10V16\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n          <path d=\"M14 10V16\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n        </svg>\n      </button>\n    `\n      : '';\n\n  return `\n    <li>\n      <article\n        class=\"exercises__content__main__cards-item exercises__content__main__cards-item--exercise exercise-card exercise-card--exercise\"\n        data-exercise-id=\"${exerciseId}\">\n        <button\n          class=\"exercises__content__main__cards-item-open exercise-card__open\"\n          type=\"button\"\n          data-action=\"open-exercise\"\n          aria-label=\"Open ${exercise.name}\">\n        </button>\n        <div class=\"exercises__content__main__cards-item-header exercise-card__header\">\n          <span class=\"exercises__content__main__cards-item-workout-btn exercise-card__badge\">WORKOUT</span>\n          <div class=\"exercises__content__main__cards-item-rating exercise-card__rating\">\n            <span class=\"exercises__content__main__cards-item-rating-value exercise-card__rating-value\">${rating.toFixed(\n              1\n            )}</span>\n            <svg class=\"exercises__content__main__cards-item-rating-star exercise-card__rating-star\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n              <path d=\"M9 0L11.0206 6.21885L17.5595 6.21885L12.2694 10.0623L14.2901 16.2812L9 12.4377L3.70993 16.2812L5.73056 10.0623L0.440492 6.21885L6.97937 6.21885L9 0Z\" fill=\"#EEA10C\"/>\n            </svg>\n          </div>\n          <button\n            class=\"exercises__content__main__cards-item-start-btn exercise-card__start\"\n            type=\"button\"\n            data-action=\"open-exercise\">\n            Start\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n              <path d=\"M6.75 4.5L11.25 9L6.75 13.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </button>\n        </div>\n        <div class=\"exercises__content__main__cards-item-body exercise-card__body\">\n          <div class=\"exercises__content__main__cards-item-icon exercise-card__icon\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n              <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              <path d=\"M2 17L12 22L22 17\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              <path d=\"M2 12L12 17L22 12\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </div>\n          <h3 class=\"exercises__content__main__cards-item-title exercise-card__title\">${exercise.name}</h3>\n        </div>\n        <ul class=\"exercises__content__main__cards-item-footer exercise-card__meta\">\n          <li class=\"exercises__content__main__cards-item-info exercise-card__meta-item\">\n            <span class=\"exercises__content__main__cards-item-info-label exercise-card__meta-label\">Burned calories:</span>\n            <span class=\"exercises__content__main__cards-item-info-value exercise-card__meta-value\">${burnedCalories}</span>\n            <span class=\"exercises__content__main__cards-item-info-label exercise-card__meta-label\">/ ${time} min</span>\n          </li>\n          <li class=\"exercises__content__main__cards-item-info exercise-card__meta-item\">\n            <span class=\"exercises__content__main__cards-item-info-label exercise-card__meta-label\">Body part:</span>\n            <span class=\"exercises__content__main__cards-item-info-value exercise-card__meta-value\">${bodyPart}</span>\n          </li>\n          <li class=\"exercises__content__main__cards-item-info exercise-card__meta-item\">\n            <span class=\"exercises__content__main__cards-item-info-label exercise-card__meta-label\">Target:</span>\n            <span class=\"exercises__content__main__cards-item-info-value exercise-card__meta-value\">${target}</span>\n          </li>\n        </ul>\n        ${removeButtonHTML}\n      </article>\n    </li>\n  `;\n}\n\nfunction renderCategoryCards(categories) {\n  const cardsContainer = getCardsContainer();\n  if (!cardsContainer) return;\n\n  cardsContainer.classList.remove(\n    'exercises__content__main__cards--exercises',\n    'exercise-cards--exercises'\n  );\n  cardsContainer.innerHTML = categories.map(createCategoryCard).join('');\n}\n\nfunction renderExerciseCards(exercises) {\n  const cardsContainer = getCardsContainer();\n  if (!cardsContainer) return;\n\n  cardsContainer.classList.add(\n    'exercises__content__main__cards--exercises',\n    'exercise-cards--exercises'\n  );\n  cardsContainer.innerHTML = exercises.map(createExerciseCard).join('');\n}\n\nfunction renderEmptyState(message) {\n  const cardsContainer = getCardsContainer();\n  if (!cardsContainer) return;\n\n  cardsContainer.classList.add(\n    'exercises__content__main__cards--exercises',\n    'exercise-cards--exercises'\n  );\n  cardsContainer.innerHTML = `\n    <li class=\"exercises__content__main__empty-state\">\n      <p class=\"exercises__content__main__empty-state-text\">\n        ${message}\n      </p>\n    </li>\n  `;\n}\n\nfunction renderCategoriesEmptyState() {\n  renderEmptyState('Unfortunately, no categories were found for this filter.');\n}\n\nfunction renderExercisesEmptyState() {\n  renderEmptyState(\n    'Unfortunately, no results were found. You may want to consider other search options.'\n  );\n}\n\nfunction renderFavoritesEmptyState() {\n  renderEmptyState(\n    \"It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.\"\n  );\n}\n\nfunction renderPagination(totalPages, page = 1) {\n  const paginationContainer = getPaginationContainer();\n  if (!paginationContainer) {\n    return;\n  }\n\n  paginationContainer.innerHTML = '';\n  paginationContainer.setAttribute('role', 'navigation');\n  paginationContainer.setAttribute('aria-label', 'Pagination');\n\n  if (totalPages <= 1) {\n    return;\n  }\n\n  const goToPage = pageNumber => {\n    currentPage = pageNumber;\n    if (currentCategory) {\n      loadExercisesByCategory(currentCategory, pageNumber, currentSearchKeyword);\n    } else {\n      loadExerciseCards(currentFilter, pageNumber);\n    }\n  };\n\n  const createArrowButton = (label, disabled, onClick) => {\n    const button = document.createElement('button');\n    button.className = 'exercises__content__pagination-arrow';\n    button.type = 'button';\n    button.innerHTML = label;\n    button.disabled = disabled;\n    button.addEventListener('click', onClick);\n    return button;\n  };\n\n  paginationContainer.appendChild(\n    createArrowButton('&laquo;', page === 1, () => goToPage(1))\n  );\n  paginationContainer.appendChild(\n    createArrowButton('&lsaquo;', page === 1, () => goToPage(page - 1))\n  );\n\n  const createPageButton = pageNumber => {\n    const pageButton = document.createElement('button');\n    pageButton.className = 'exercises__content__pagination-page';\n    pageButton.type = 'button';\n    pageButton.textContent = pageNumber;\n\n    if (pageNumber === page) {\n      pageButton.classList.add('exercises__content__pagination-page--active');\n      pageButton.setAttribute('aria-current', 'page');\n    }\n\n    pageButton.addEventListener('click', () => goToPage(pageNumber));\n    return pageButton;\n  };\n\n  if (totalPages <= 5) {\n    for (let i = 1; i <= totalPages; i++) {\n      paginationContainer.appendChild(createPageButton(i));\n    }\n  } else {\n    paginationContainer.appendChild(createPageButton(1));\n    paginationContainer.appendChild(createPageButton(2));\n    paginationContainer.appendChild(createPageButton(3));\n\n    const ellipsis = document.createElement('span');\n    ellipsis.className = 'exercises__content__pagination-ellipsis';\n    ellipsis.textContent = '...';\n    paginationContainer.appendChild(ellipsis);\n\n    paginationContainer.appendChild(createPageButton(totalPages - 1));\n    paginationContainer.appendChild(createPageButton(totalPages));\n  }\n\n  paginationContainer.appendChild(\n    createArrowButton('&rsaquo;', page === totalPages, () => goToPage(page + 1))\n  );\n  paginationContainer.appendChild(\n    createArrowButton('&raquo;', page === totalPages, () => goToPage(totalPages))\n  );\n}\n\nexport async function loadExerciseCards(filter, page = 1) {\n  if (currentMode === 'favorites') {\n    return;\n  }\n\n  setActiveFilter(filter);\n  currentPage = page;\n  currentCategory = null;\n  currentSearchKeyword = '';\n\n  hideSearchField();\n  setCardsBusy(true);\n\n  try {\n    const data = await getFilters({\n      filter,\n      page,\n      limit: FILTERS_LIMIT,\n    });\n\n    const categories = data?.results || data?.exercises || data || [];\n    const totalPages =\n      data?.totalPages || data?.total_pages || data?.pageCount || 1;\n\n    updateBreadcrumbs(null);\n\n    if (Array.isArray(categories) && categories.length > 0) {\n      renderCategoryCards(categories);\n      renderPagination(totalPages, page);\n    } else {\n      renderCategoriesEmptyState();\n      renderPagination(1, 1);\n    }\n  } catch (error) {\n    updateBreadcrumbs(null);\n    renderCategoriesEmptyState();\n    renderPagination(1, 1);\n    showGlobalNotification(error.message || 'Failed to load categories.', 'error');\n  } finally {\n    setCardsBusy(false);\n  }\n}\n\nexport async function loadExercisesByCategory(\n  categoryName,\n  page = 1,\n  keyword = currentSearchKeyword\n) {\n  if (currentMode === 'favorites') {\n    return;\n  }\n\n  currentCategory = categoryName;\n  currentPage = page;\n  currentSearchKeyword = keyword;\n\n  showSearchField();\n  setCardsBusy(true);\n\n  let paramName = 'muscles';\n  if (currentFilter === 'Body parts') {\n    paramName = 'bodypart';\n  } else if (currentFilter === 'Equipment') {\n    paramName = 'equipment';\n  }\n\n  try {\n    const data = await getExercises({\n      [paramName]: categoryName,\n      page,\n      limit: EXERCISES_LIMIT,\n      keyword: keyword?.trim() || '',\n    });\n\n    const exercises = data?.results || [];\n    const totalPages = data?.totalPages || 1;\n\n    updateBreadcrumbs(categoryName);\n\n    if (Array.isArray(exercises) && exercises.length > 0) {\n      renderExerciseCards(exercises);\n      renderPagination(totalPages, page);\n    } else {\n      renderExercisesEmptyState();\n      renderPagination(1, 1);\n    }\n  } catch (error) {\n    renderExercisesEmptyState();\n    renderPagination(1, 1);\n    showGlobalNotification(error.message || 'Failed to load exercises.', 'error');\n  } finally {\n    setCardsBusy(false);\n  }\n}\n\nexport function initSearch() {\n  const searchForm = getSearchForm();\n  const searchInput = getSearchInput();\n\n  if (!searchForm || !searchInput) {\n    return;\n  }\n\n  searchForm.addEventListener('submit', event => {\n    event.preventDefault();\n\n    if (!currentCategory || currentMode === 'favorites') {\n      return;\n    }\n\n    const keyword = searchInput.value.trim();\n    loadExercisesByCategory(currentCategory, 1, keyword);\n  });\n}\n\nexport async function loadFavoritesExercises() {\n  const favoriteIds = getFavorites();\n  const paginationContainer = getPaginationContainer();\n\n  updateBreadcrumbs(null);\n\n  if (paginationContainer) {\n    paginationContainer.innerHTML = '';\n  }\n\n  if (favoriteIds.length === 0) {\n    renderFavoritesEmptyState();\n    return;\n  }\n\n  setCardsBusy(true);\n\n  try {\n    const results = await Promise.allSettled(\n      favoriteIds.map(id => getExerciseById(id))\n    );\n    const validExercises = results\n      .filter(result => result.status === 'fulfilled' && result.value)\n      .map(result => result.value);\n\n    if (validExercises.length > 0) {\n      renderExerciseCards(validExercises);\n    } else {\n      renderFavoritesEmptyState();\n    }\n  } catch (error) {\n    renderFavoritesEmptyState();\n    showGlobalNotification(\n      error.message || 'Failed to load favorite exercises.',\n      'error'\n    );\n  } finally {\n    setCardsBusy(false);\n  }\n}\n\nexport function initCardsEventListener() {\n  const cardsContainer = getCardsContainer();\n\n  if (!cardsContainer) {\n    return;\n  }\n\n  cardsContainer.addEventListener('click', event => {\n    const removeButton = event.target.closest('[data-action=\"remove-favorite\"]');\n    if (removeButton) {\n      event.preventDefault();\n      const card = removeButton.closest('[data-exercise-id]');\n      const exerciseId = card?.getAttribute('data-exercise-id');\n\n      if (exerciseId) {\n        removeFromFavorites(exerciseId);\n\n        if (currentMode === 'favorites') {\n          const listItem = removeButton.closest('li');\n          if (listItem) {\n            listItem.remove();\n          }\n\n          if (!getCardsContainer()?.children.length) {\n            renderFavoritesEmptyState();\n          }\n        }\n      }\n      return;\n    }\n\n    const categoryButton = event.target.closest('[data-action=\"open-category\"]');\n    if (categoryButton) {\n      const categoryName = categoryButton.getAttribute('data-category-name');\n      if (categoryName) {\n        loadExercisesByCategory(categoryName, 1);\n      }\n      return;\n    }\n\n    const openButton = event.target.closest('[data-action=\"open-exercise\"]');\n    if (openButton) {\n      const card = openButton.closest('[data-exercise-id]');\n      const exerciseId = card?.getAttribute('data-exercise-id');\n      if (exerciseId) {\n        openExerciseModal(exerciseId);\n      }\n    }\n  });\n}\n\nexport function switchToHome() {\n  currentMode = 'home';\n  currentCategory = null;\n  currentSearchKeyword = '';\n\n  const contentContainer = getContentContainer();\n  if (contentContainer) {\n    contentContainer.classList.remove('exercises__content--favorites');\n  }\n\n  loadExerciseCards(currentFilter, 1);\n}\n\nexport function switchToFavorites() {\n  currentMode = 'favorites';\n  currentCategory = null;\n  currentSearchKeyword = '';\n\n  hideSearchField();\n\n  const contentContainer = getContentContainer();\n  if (contentContainer) {\n    contentContainer.classList.add('exercises__content--favorites');\n  }\n\n  loadFavoritesExercises();\n}\n\nexport function getCurrentFilter() {\n  return currentFilter;\n}\n\nexport function setFilter(filter) {\n  setActiveFilter(filter);\n}\n\nexport function getCurrentMode() {\n  return currentMode;\n}\n","import { getQuote } from '../api.js';\nimport { showGlobalNotification } from './global-notification.js';\n\n// Helper function to get today's date in YYYY-MM-DD format\nfunction getTodayDate() {\n  const today = new Date();\n  const year = today.getFullYear();\n  const month = String(today.getMonth() + 1).padStart(2, '0');\n  const day = String(today.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\n// Function to load quote data with caching logic\nasync function loadQuoteOfTheDay() {\n  const cachedQuoteText = localStorage.getItem('quote-text');\n  const cachedQuoteAuthor = localStorage.getItem('quote-author');\n  const cachedQuoteDate = localStorage.getItem('quote-date');\n  const todayDate = getTodayDate();\n\n  // Check if cached data exists\n  if (cachedQuoteText && cachedQuoteAuthor && cachedQuoteDate) {\n    // Compare dates\n    if (cachedQuoteDate === todayDate) {\n      // Return cached data if date matches\n      return { quote: cachedQuoteText, author: cachedQuoteAuthor };\n    }\n  }\n\n  // Fetch new quote from API\n  try {\n    const data = await getQuote();\n\n    // Save to localStorage\n    localStorage.setItem('quote-text', data.quote);\n    localStorage.setItem('quote-author', data.author);\n    localStorage.setItem('quote-date', todayDate);\n\n    // Return the quote data\n    return { quote: data.quote, author: data.author };\n  } catch (error) {\n    // If fetch fails but we have cached data, use it\n    if (cachedQuoteText && cachedQuoteAuthor) {\n      return { quote: cachedQuoteText, author: cachedQuoteAuthor };\n    }\n\n    // Return null if no data available\n    if (!cachedQuoteText || !cachedQuoteAuthor) {\n      showGlobalNotification('Failed to load quote of the day.', 'error');\n    }\n    return null;\n  }\n}\n\n// Function to display quote in DOM\nexport async function displayQuote() {\n  const quoteData = await loadQuoteOfTheDay();\n\n  if (!quoteData) {\n    return;\n  }\n\n  const quoteTextElement = document.getElementById('js-exercises-quote-text');\n  const quoteAuthorElement = document.getElementById(\n    'js-exercises-quote-author'\n  );\n\n  if (quoteTextElement) {\n    quoteTextElement.textContent = quoteData.quote;\n  }\n\n  if (quoteAuthorElement) {\n    quoteAuthorElement.textContent = quoteData.author;\n  }\n}\n","import {\n  switchToHome,\n  switchToFavorites,\n  initSearch,\n  initCardsEventListener,\n  initFilters,\n} from './js/exercises.js';\nimport { initExerciseModal } from './js/exercise-modal.js';\nimport { initRatingModal } from './js/rating-modal.js';\nimport {\n  initGlobalNotification,\n  showGlobalNotification,\n} from './js/global-notification.js';\nimport {\n  showFieldError,\n  hideFieldError,\n  validateEmail,\n} from './js/form-validation.js';\nimport { initHeader } from './js/header.js';\nimport { displayQuote } from './js/quote.js';\nimport { postSubscription } from './api.js';\n\n//    \ndocument.addEventListener('DOMContentLoaded', () => {\n  // Load and display quote of the day\n  displayQuote();\n  //  \n  initExerciseModal();\n  initRatingModal();\n\n  //   \n  initGlobalNotification();\n\n  //  \n  initHeader();\n\n  //  \n  initSearch();\n\n  //       (event delegation)\n  initCardsEventListener();\n\n  //  \n  initFilters();\n\n  const initialPage = document.body?.dataset.page || 'home';\n  if (initialPage === 'favorites') {\n    switchToFavorites();\n  } else {\n    switchToHome();\n  }\n\n  //   \n  const subscribeForm = document.getElementById('subscribeForm');\n  const subscribeEmailInput = document.getElementById('subscribeEmail');\n  const subscribeEmailError = document.getElementById('subscribeEmailError');\n\n  // Clear error on input\n  if (subscribeEmailInput && subscribeEmailError) {\n    subscribeEmailInput.addEventListener('input', () => {\n      hideFieldError(subscribeEmailInput, subscribeEmailError);\n    });\n  }\n\n  if (subscribeForm) {\n    subscribeForm.addEventListener('submit', async e => {\n      e.preventDefault();\n\n      const email = subscribeEmailInput?.value.trim() || '';\n      let hasErrors = false;\n\n      // Validate email\n      if (!email) {\n        showFieldError(\n          subscribeEmailInput,\n          subscribeEmailError,\n          'Please enter your email address'\n        );\n        hasErrors = true;\n      } else if (!validateEmail(email)) {\n        showFieldError(\n          subscribeEmailInput,\n          subscribeEmailError,\n          'Please enter a valid email address'\n        );\n        hasErrors = true;\n      } else {\n        hideFieldError(subscribeEmailInput, subscribeEmailError);\n      }\n\n      // Stop if there are errors\n      if (hasErrors) {\n        return;\n      }\n\n      try {\n        const data = await postSubscription(email);\n        showGlobalNotification(\n          data?.message || 'Subscription successful.',\n          'success'\n        );\n        subscribeForm.reset();\n        hideFieldError(subscribeEmailInput, subscribeEmailError);\n      } catch (error) {\n        showGlobalNotification(error.message || 'Failed to subscribe.', 'error');\n      }\n    });\n  }\n});\n"],"names":["notificationTimeout","showGlobalNotification","message","type","notification","textElement","hideGlobalNotification","initGlobalNotification","closeBtn","showFieldError","inputElement","errorElement","errorClass","hideFieldError","validateEmail","email","BASE_URL","buildUrl","path","params","url","key","value","request","options","response","hasBody","contentType","data","error","getQuote","getFilters","filter","page","limit","getExercises","getExerciseById","exerciseId","patchExerciseRating","payload","postSubscription","currentExerciseIdForRating","onRatingSuccess","listenersAttached","lastFocusedElement","focusableElements","getModalElements","modal","getFocusableElements","selectors","element","updateFocusableElements","trapFocus","event","first","last","showServerMessage","elements","hideServerMessage","getSelectedRating","selected","input","updateStars","rating","label","index","updateRatingValue","resetRatingForm","handleClose","closeRatingModal","handleOverlayClick","handleKeydown","handleStarChange","handleStarHover","handleStarLeave","selectedRating","handleEmailInput","handleCommentInput","handleServerMessageClose","handleFormSubmit","_a","review","_b","hasErrors","exerciseName","successCallback","errorMessage","attachListeners","_c","_d","_e","_f","detachListeners","openRatingModal","initRatingModal","FAVORITES_KEY","getFavorites","favorites","addToFavorites","removeFromFavorites","filteredFavorites","id","isFavorite","toggleFavorite","currentPage","mobileMenu","burgerButton","closeButton","getPageFromLocation","bodyPage","setActiveLinks","link","openMobileMenu","closeMobileMenu","initHeader","e","getCurrentPage","closeExerciseModal","handleFavoriteClick","wasAdded","updateFavoriteButton","loadFavoritesExercises","handleRatingClick","openExerciseModal","isInFavorites","btnText","btnIcon","exercise","videoUrl","stars","star","initExerciseModal","currentFilter","currentCategory","currentSearchKeyword","currentMode","FILTERS_LIMIT","EXERCISES_LIMIT","getCardsContainer","getPaginationContainer","getSearchForm","getSearchInput","getHeading","getBreadcrumbs","getContentContainer","setCardsBusy","isBusy","cardsContainer","showSearchField","searchField","hideSearchField","searchInput","formatCategoryLabel","trimmed","createBreadcrumbEntry","node","entry","updateHeadingLabel","heading","updateBreadcrumbs","categoryName","breadcrumbsContainer","favoritesTitle","exercisesTitle","categoryLabel","exercisesBtn","loadExerciseCards","separator","categorySpan","setActiveFilter","button","isActive","initFilters","filterButtons","createCategoryCard","category","categoryFilter","imageUrl","createExerciseCard","burnedCalories","time","bodyPart","target","removeButtonHTML","renderCategoryCards","categories","renderExerciseCards","exercises","renderEmptyState","renderCategoriesEmptyState","renderExercisesEmptyState","renderFavoritesEmptyState","renderPagination","totalPages","paginationContainer","goToPage","pageNumber","loadExercisesByCategory","createArrowButton","disabled","onClick","createPageButton","pageButton","ellipsis","keyword","paramName","initSearch","searchForm","favoriteIds","validExercises","result","initCardsEventListener","removeButton","card","listItem","categoryButton","openButton","switchToHome","contentContainer","switchToFavorites","getTodayDate","today","year","month","day","loadQuoteOfTheDay","cachedQuoteText","cachedQuoteAuthor","cachedQuoteDate","todayDate","displayQuote","quoteData","quoteTextElement","quoteAuthorElement","subscribeForm","subscribeEmailInput","subscribeEmailError"],"mappings":"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"}