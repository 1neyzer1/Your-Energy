{"version":3,"file":"main-86c5LUeA.js","sources":["../../src/js/global-notification.js","../../src/js/form-validation.js","../../src/api.js","../../src/js/rating-modal.js","../../src/js/favorites.js","../../src/js/header.js","../../src/js/exercise-modal.js","../../src/js/exercises.js","../../src/js/quote.js","../../src/main.js"],"sourcesContent":["// Global notification system\nlet notificationTimeout = null;\n\n/**\n * Shows a global notification message\n * @param {string} message - The message to display\n * @param {string} type - The type of notification ('success' or 'error')\n */\nexport function showGlobalNotification(message, type = 'success') {\n  const notification = document.getElementById('js-global-notification');\n  const textElement = document.getElementById('js-global-notification-text');\n\n  if (!notification || !textElement) return;\n\n  // Clear any existing timeout\n  if (notificationTimeout) {\n    clearTimeout(notificationTimeout);\n    notificationTimeout = null;\n  }\n\n  // Set the message and type\n  textElement.textContent = message;\n  notification.classList.remove('global-notification--error');\n  if (type === 'error') {\n    notification.classList.add('global-notification--error');\n  }\n\n  // Show the notification\n  notification.classList.add('global-notification--visible');\n\n  // Auto-hide after 3 seconds\n  notificationTimeout = setTimeout(() => {\n    hideGlobalNotification();\n  }, 3000);\n}\n\n/**\n * Hides the global notification\n */\nexport function hideGlobalNotification() {\n  const notification = document.getElementById('js-global-notification');\n  const textElement = document.getElementById('js-global-notification-text');\n\n  if (!notification) return;\n\n  // Clear timeout if exists\n  if (notificationTimeout) {\n    clearTimeout(notificationTimeout);\n    notificationTimeout = null;\n  }\n\n  // Hide the notification\n  notification.classList.remove('global-notification--visible');\n\n  // Clear content after animation\n  setTimeout(() => {\n    if (textElement) {\n      textElement.textContent = '';\n    }\n    notification.classList.remove('global-notification--error');\n  }, 300);\n}\n\n/**\n * Initializes the global notification system\n */\nexport function initGlobalNotification() {\n  const closeBtn = document.getElementById('js-global-notification-close');\n\n  if (closeBtn) {\n    closeBtn.addEventListener('click', hideGlobalNotification);\n  }\n}\n","/**\n * Form validation utilities module\n * Provides reusable functions for form field validation and error display\n */\n\n/**\n * Shows an error message for a form field\n * @param {HTMLElement} inputElement - The input/textarea element\n * @param {HTMLElement} errorElement - The element to display error message\n * @param {string} message - The error message to display\n */\nexport function showFieldError(inputElement, errorElement, message) {\n  if (inputElement) {\n    // Determine the appropriate error class based on element type\n    const errorClass = inputElement.classList.contains('rating-modal__textarea')\n      ? 'rating-modal__textarea--error'\n      : inputElement.classList.contains('rating-modal__input')\n      ? 'rating-modal__input--error'\n      : inputElement.classList.contains('footer__subscribe-form-input')\n      ? 'footer__subscribe-form-input--error'\n      : 'form-field--error';\n\n    inputElement.classList.add(errorClass);\n  }\n\n  if (errorElement) {\n    errorElement.textContent = message;\n    errorElement.classList.add('form-error--visible');\n  }\n}\n\n/**\n * Hides the error message for a form field\n * @param {HTMLElement} inputElement - The input/textarea element\n * @param {HTMLElement} errorElement - The element displaying error message\n */\nexport function hideFieldError(inputElement, errorElement) {\n  if (inputElement) {\n    inputElement.classList.remove(\n      'rating-modal__input--error',\n      'rating-modal__textarea--error',\n      'footer__subscribe-form-input--error',\n      'form-field--error'\n    );\n  }\n\n  if (errorElement) {\n    errorElement.textContent = '';\n    errorElement.classList.remove('form-error--visible');\n  }\n}\n\n/**\n * Validates an email address\n * @param {string} email - The email address to validate\n * @returns {boolean} True if email is valid, false otherwise\n */\nexport function validateEmail(email) {\n  const emailRegex = /^\\w+(\\.\\w+)?@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/;\n  return emailRegex.test(email);\n}\n\n/**\n * Validates that a field is not empty\n * @param {string} value - The value to validate\n * @returns {boolean} True if value is not empty, false otherwise\n */\nexport function validateRequired(value) {\n  return value.trim().length > 0;\n}\n","const BASE_URL = 'https://your-energy.b.goit.study/api';\nconst DEFAULT_TIMEOUT_MS = 10000;\n\nconst buildUrl = (path, params = {}) => {\n  const normalizedPath = path.startsWith('/') ? path : `/${path}`;\n  const url = new URL(`${BASE_URL}${normalizedPath}`);\n  const searchParams = new URLSearchParams();\n\n  Object.entries(params).forEach(([key, value]) => {\n    if (value === undefined || value === null || value === '') {\n      return;\n    }\n    searchParams.set(key, value);\n  });\n\n  const query = searchParams.toString();\n  if (query) {\n    url.search = query;\n  }\n\n  return url.toString();\n};\n\nexport const fetchJson = async (\n  path,\n  { params, signal, timeoutMs = DEFAULT_TIMEOUT_MS, ...options } = {}\n) => {\n  const url = buildUrl(path, params);\n  const controller = new AbortController();\n  const headers = new Headers(options.headers || {});\n  const hasBody = options.body !== undefined && options.body !== null;\n  let didTimeout = false;\n\n  if (hasBody && !headers.has('Content-Type')) {\n    headers.set('Content-Type', 'application/json');\n  }\n\n  if (signal) {\n    if (signal.aborted) {\n      controller.abort();\n    } else {\n      signal.addEventListener('abort', () => controller.abort(), { once: true });\n    }\n  }\n\n  const timeoutId =\n    timeoutMs && Number.isFinite(timeoutMs)\n      ? setTimeout(() => {\n          didTimeout = true;\n          controller.abort();\n        }, timeoutMs)\n      : null;\n\n  let response;\n  try {\n    response = await fetch(url, {\n      ...options,\n      headers,\n      signal: controller.signal,\n    });\n  } catch (error) {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    if (error?.name === 'AbortError') {\n      if (didTimeout) {\n        const timeoutError = new Error('Request timed out.');\n        timeoutError.name = 'TimeoutError';\n        throw timeoutError;\n      }\n    }\n    throw error;\n  } finally {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  const contentType = response.headers.get('content-type') || '';\n  let data = null;\n\n  if (response.status !== 204) {\n    if (contentType.includes('application/json')) {\n      data = await response.json().catch(() => null);\n    } else {\n      data = await response.text().catch(() => null);\n    }\n  }\n\n  if (!response.ok) {\n    const dataSnippet =\n      typeof data === 'string'\n        ? data.slice(0, 200)\n        : data && typeof data === 'object'\n        ? JSON.stringify(data).slice(0, 200)\n        : '';\n    const message =\n      (data && typeof data === 'object' && data.message) ||\n      dataSnippet ||\n      response.statusText ||\n      'Request failed';\n    const error = new Error(`${message} (status ${response.status})`);\n    error.status = response.status;\n    error.data = data;\n    throw error;\n  }\n\n  return data;\n};\n\nexport const getQuote = (options = {}) => fetchJson('/quote', options);\n\nexport const getFilters = ({\n  filter,\n  page = 1,\n  limit = 12,\n  signal,\n  timeoutMs,\n} = {}) =>\n  fetchJson('/filters', { params: { filter, page, limit }, signal, timeoutMs });\n\nexport const getExercises = ({\n  page = 1,\n  limit = 8,\n  signal,\n  timeoutMs,\n  ...params\n} = {}) =>\n  fetchJson('/exercises', {\n    params: { ...params, page, limit },\n    signal,\n    timeoutMs,\n  });\n\nexport const getExerciseById = (exerciseId, options = {}) =>\n  fetchJson(`/exercises/${exerciseId}`, options);\n\nexport const patchExerciseRating = (exerciseId, payload, options = {}) =>\n  fetchJson(`/exercises/${exerciseId}/rating`, {\n    method: 'PATCH',\n    body: JSON.stringify(payload),\n    ...options,\n  });\n\nexport const postSubscription = (email, options = {}) =>\n  fetchJson('/subscription', {\n    method: 'POST',\n    body: JSON.stringify({ email }),\n    ...options,\n  });\n","import { showGlobalNotification } from './global-notification.js';\nimport {\n  showFieldError,\n  hideFieldError,\n  validateEmail,\n} from './form-validation.js';\nimport { patchExerciseRating } from '../api.js';\n\nconst SCROLL_LOCK_KEY = 'scrollLockCount';\nconst modalState = {\n  activeId: null,\n  lastFocusedElement: null,\n  focusableElements: [],\n  handlers: new Map(),\n  keydownAttached: false,\n};\n\nlet currentExerciseIdForRating = null;\nlet onRatingSuccess = null;\nlet onRatingClose = null;\nlet listenersAttached = false;\n\nfunction lockBodyScroll() {\n  const body = document.body;\n  if (!body) return;\n\n  const count = Number(body.dataset[SCROLL_LOCK_KEY] || 0) + 1;\n  body.dataset[SCROLL_LOCK_KEY] = String(count);\n  if (count === 1) {\n    body.style.overflow = 'hidden';\n  }\n}\n\nfunction unlockBodyScroll() {\n  const body = document.body;\n  if (!body) return;\n\n  const count = Number(body.dataset[SCROLL_LOCK_KEY] || 0) - 1;\n  if (count <= 0) {\n    delete body.dataset[SCROLL_LOCK_KEY];\n    body.style.overflow = '';\n    return;\n  }\n  body.dataset[SCROLL_LOCK_KEY] = String(count);\n}\n\nfunction getFocusableElements(modal) {\n  const selectors = [\n    'button:not([disabled])',\n    'a[href]',\n    'input:not([disabled])',\n    'textarea:not([disabled])',\n    'select:not([disabled])',\n    '[tabindex]:not([tabindex=\"-1\"])',\n  ];\n  return Array.from(modal.querySelectorAll(selectors.join(','))).filter(\n    element => !element.hasAttribute('aria-hidden')\n  );\n}\n\nfunction trapFocus(event) {\n  if (event.key !== 'Tab' || modalState.focusableElements.length === 0) {\n    return;\n  }\n\n  const first = modalState.focusableElements[0];\n  const last =\n    modalState.focusableElements[modalState.focusableElements.length - 1];\n\n  if (event.shiftKey && document.activeElement === first) {\n    event.preventDefault();\n    last.focus();\n    return;\n  }\n\n  if (!event.shiftKey && document.activeElement === last) {\n    event.preventDefault();\n    first.focus();\n  }\n}\n\nfunction handleModalKeydown(event) {\n  if (!modalState.activeId) {\n    return;\n  }\n\n  if (event.key === 'Escape') {\n    requestModalClose(modalState.activeId);\n    return;\n  }\n\n  trapFocus(event);\n}\n\nfunction getModalOpenClass(modal) {\n  const baseClass = modal.classList[0];\n  return baseClass ? `${baseClass}--open` : 'is-open';\n}\n\nfunction requestModalClose(modalId) {\n  const modalHandlers = modalState.handlers.get(modalId);\n  if (modalHandlers?.onClose) {\n    modalHandlers.onClose();\n    return;\n  }\n  closeModal(modalId);\n}\n\nexport function openModal(modalId, { onClose } = {}) {\n  const modal = document.getElementById(modalId);\n  if (!modal) return null;\n\n  if (modalState.activeId === modalId) {\n    return modal;\n  }\n\n  if (modalState.activeId && modalState.activeId !== modalId) {\n    requestModalClose(modalState.activeId);\n  }\n\n  const openClass = getModalOpenClass(modal);\n\n  modalState.activeId = modalId;\n  modalState.lastFocusedElement = document.activeElement;\n  modalState.focusableElements = getFocusableElements(modal);\n\n  modal.classList.add(openClass);\n  modal.setAttribute('aria-hidden', 'false');\n  lockBodyScroll();\n\n  if (!modalState.keydownAttached) {\n    document.addEventListener('keydown', handleModalKeydown);\n    modalState.keydownAttached = true;\n  }\n\n  const overlay = modal.querySelector('[class$=\"__overlay\"]');\n  const overlayHandler = event => {\n    if (event.target === event.currentTarget) {\n      requestModalClose(modalId);\n    }\n  };\n  if (overlay) {\n    overlay.addEventListener('click', overlayHandler);\n  }\n\n  modalState.handlers.set(modalId, {\n    overlay,\n    overlayHandler,\n    openClass,\n    onClose,\n  });\n\n  modalState.focusableElements[0]?.focus();\n  return modal;\n}\n\nexport function closeModal(modalId, options = {}) {\n  const modal = document.getElementById(modalId);\n  if (!modal) return null;\n\n  const { restoreFocus = true, preserveScroll = false } = options;\n  const modalHandlers = modalState.handlers.get(modalId);\n  const openClass =\n    modalHandlers?.openClass || getModalOpenClass(modal);\n\n  modal.classList.remove(openClass);\n  modal.setAttribute('aria-hidden', 'true');\n\n  if (modalHandlers?.overlay && modalHandlers?.overlayHandler) {\n    modalHandlers.overlay.removeEventListener(\n      'click',\n      modalHandlers.overlayHandler\n    );\n  }\n  modalState.handlers.delete(modalId);\n\n  if (!preserveScroll) {\n    unlockBodyScroll();\n  }\n\n  if (\n    restoreFocus &&\n    modalState.lastFocusedElement &&\n    typeof modalState.lastFocusedElement.focus === 'function' &&\n    document.contains(modalState.lastFocusedElement)\n  ) {\n    modalState.lastFocusedElement.focus();\n  }\n\n  if (modalState.activeId === modalId) {\n    modalState.activeId = null;\n    modalState.focusableElements = [];\n    modalState.lastFocusedElement = null;\n  }\n\n  if (!modalState.activeId && modalState.keydownAttached) {\n    document.removeEventListener('keydown', handleModalKeydown);\n    modalState.keydownAttached = false;\n  }\n\n  return modal;\n}\n\nfunction getModalElements() {\n  const modal = document.getElementById('js-rating-modal');\n  if (!modal) return null;\n\n  return {\n    modal,\n    closeBtn: document.getElementById('js-rating-modal-close'),\n    serverMessage: document.getElementById('js-rating-server-message'),\n    serverMessageText: document.getElementById('js-rating-server-message-text'),\n    serverMessageClose: document.getElementById('js-rating-server-message-close'),\n    ratingValue: document.getElementById('js-rating-modal-value'),\n    ratingError: document.getElementById('js-rating-error'),\n    form: document.getElementById('js-rating-modal-form'),\n    emailInput: document.getElementById('rating-email'),\n    emailError: document.getElementById('js-email-error'),\n    commentTextarea: document.getElementById('rating-comment'),\n    commentError: document.getElementById('js-comment-error'),\n    starInputs: Array.from(\n      modal.querySelectorAll('.rating-modal__star-input')\n    ),\n    starLabels: Array.from(modal.querySelectorAll('.rating-modal__star')),\n  };\n}\n\nfunction showServerMessage(message, type = 'error') {\n  const elements = getModalElements();\n  if (!elements?.serverMessage || !elements.serverMessageText) return;\n\n  elements.serverMessageText.textContent = message;\n  elements.serverMessage.classList.remove(\n    'rating-modal__server-message--error',\n    'rating-modal__server-message--success'\n  );\n  elements.serverMessage.classList.add(`rating-modal__server-message--${type}`);\n  elements.serverMessage.classList.add('rating-modal__server-message--visible');\n}\n\nfunction hideServerMessage() {\n  const elements = getModalElements();\n  if (!elements?.serverMessage) return;\n\n  elements.serverMessage.classList.remove('rating-modal__server-message--visible');\n  if (elements.serverMessageText) {\n    elements.serverMessageText.textContent = '';\n  }\n  elements.serverMessage.classList.remove(\n    'rating-modal__server-message--error',\n    'rating-modal__server-message--success'\n  );\n}\n\nfunction getSelectedRating() {\n  const elements = getModalElements();\n  if (!elements) return 0;\n  const selected = elements.starInputs.find(input => input.checked);\n  return selected ? Number(selected.value) : 0;\n}\n\nfunction updateStars(rating) {\n  const elements = getModalElements();\n  if (!elements) return;\n\n  elements.starLabels.forEach((label, index) => {\n    if (index < rating) {\n      label.classList.add('rating-modal__star--active');\n      const path = label.querySelector('path');\n      if (path) {\n        path.setAttribute('fill', '#EEA10C');\n        path.setAttribute('stroke', '#EEA10C');\n      }\n    } else {\n      label.classList.remove('rating-modal__star--active');\n      const path = label.querySelector('path');\n      if (path) {\n        path.setAttribute('fill', 'none');\n        path.setAttribute('stroke', 'currentColor');\n      }\n    }\n  });\n}\n\nfunction updateRatingValue(value) {\n  const elements = getModalElements();\n  if (elements?.ratingValue) {\n    elements.ratingValue.textContent = value.toFixed(1);\n  }\n}\n\nfunction resetRatingForm() {\n  const elements = getModalElements();\n  if (!elements) return;\n\n  if (elements.form) elements.form.reset();\n  elements.starInputs.forEach(input => {\n    input.checked = false;\n  });\n  updateStars(0);\n  updateRatingValue(0);\n\n  hideFieldError(elements.emailInput, elements.emailError);\n  hideFieldError(elements.commentTextarea, elements.commentError);\n  hideFieldError(null, elements.ratingError);\n  hideServerMessage();\n}\n\nfunction requestRatingClose() {\n  const exerciseId = currentExerciseIdForRating;\n  const hasCloseCallback = typeof onRatingClose === 'function';\n\n  closeRatingModal({ restoreFocus: !hasCloseCallback });\n\n  if (hasCloseCallback && exerciseId) {\n    onRatingClose(exerciseId);\n  }\n}\n\nfunction handleClose() {\n  requestRatingClose();\n}\n\nfunction handleStarChange(event) {\n  const rating = Number(event.target.value);\n  updateStars(rating);\n  updateRatingValue(rating);\n  const elements = getModalElements();\n  if (elements?.ratingError) {\n    hideFieldError(null, elements.ratingError);\n  }\n}\n\nfunction handleStarHover(event) {\n  const rating = Number(event.currentTarget.dataset.rating || 0);\n  updateStars(rating);\n}\n\nfunction handleStarLeave() {\n  const selectedRating = getSelectedRating();\n  updateStars(selectedRating);\n}\n\nfunction handleEmailInput() {\n  const elements = getModalElements();\n  if (elements) {\n    hideFieldError(elements.emailInput, elements.emailError);\n  }\n}\n\nfunction handleCommentInput() {\n  const elements = getModalElements();\n  if (elements) {\n    hideFieldError(elements.commentTextarea, elements.commentError);\n  }\n}\n\nfunction handleServerMessageClose() {\n  hideServerMessage();\n}\n\nasync function handleFormSubmit(event) {\n  event.preventDefault();\n  const elements = getModalElements();\n  if (!elements) return;\n\n  const selectedRating = getSelectedRating();\n  const email = elements.emailInput?.value.trim() || '';\n  const review = elements.commentTextarea?.value.trim() || '';\n\n  let hasErrors = false;\n\n  if (!selectedRating) {\n    showFieldError(null, elements.ratingError, 'Please select a rating');\n    hasErrors = true;\n  } else {\n    hideFieldError(null, elements.ratingError);\n  }\n\n  if (!email) {\n    showFieldError(\n      elements.emailInput,\n      elements.emailError,\n      'Please enter your email'\n    );\n    hasErrors = true;\n  } else if (!validateEmail(email)) {\n    showFieldError(\n      elements.emailInput,\n      elements.emailError,\n      'Please enter a valid email address'\n    );\n    hasErrors = true;\n  } else {\n    hideFieldError(elements.emailInput, elements.emailError);\n  }\n\n  if (!review) {\n    showFieldError(\n      elements.commentTextarea,\n      elements.commentError,\n      'Please enter your comment'\n    );\n    hasErrors = true;\n  } else {\n    hideFieldError(elements.commentTextarea, elements.commentError);\n  }\n\n  if (hasErrors || !currentExerciseIdForRating) {\n    return;\n  }\n\n  hideServerMessage();\n\n  try {\n    const data = await patchExerciseRating(currentExerciseIdForRating, {\n      rate: selectedRating,\n      email,\n      review,\n    });\n\n    const exerciseName = data?.name || 'the exercise';\n    const exerciseId = currentExerciseIdForRating;\n    const successCallback = onRatingSuccess;\n\n    closeRatingModal({ restoreFocus: !successCallback });\n\n    showGlobalNotification(\n      `Thank you, your review for exercise ${exerciseName} has been submitted`,\n      'success'\n    );\n\n    if (successCallback && exerciseId) {\n      successCallback(exerciseId);\n    }\n  } catch (error) {\n    const errorMessage =\n      error.message || 'Failed to submit rating. Please try again.';\n    showServerMessage(errorMessage, 'error');\n  }\n}\n\nfunction attachListeners() {\n  if (listenersAttached) return;\n  const elements = getModalElements();\n  if (!elements) return;\n\n  elements.closeBtn?.addEventListener('click', handleClose);\n  elements.serverMessageClose?.addEventListener(\n    'click',\n    handleServerMessageClose\n  );\n  elements.form?.addEventListener('submit', handleFormSubmit);\n  elements.emailInput?.addEventListener('input', handleEmailInput);\n  elements.commentTextarea?.addEventListener('input', handleCommentInput);\n  elements.starInputs.forEach(input =>\n    input.addEventListener('change', handleStarChange)\n  );\n  elements.starLabels.forEach(label => {\n    label.addEventListener('mouseenter', handleStarHover);\n    label.addEventListener('mouseleave', handleStarLeave);\n  });\n\n  listenersAttached = true;\n}\n\nfunction detachListeners() {\n  if (!listenersAttached) return;\n  const elements = getModalElements();\n  if (!elements) return;\n\n  elements.closeBtn?.removeEventListener('click', handleClose);\n  elements.serverMessageClose?.removeEventListener(\n    'click',\n    handleServerMessageClose\n  );\n  elements.form?.removeEventListener('submit', handleFormSubmit);\n  elements.emailInput?.removeEventListener('input', handleEmailInput);\n  elements.commentTextarea?.removeEventListener('input', handleCommentInput);\n  elements.starInputs.forEach(input =>\n    input.removeEventListener('change', handleStarChange)\n  );\n  elements.starLabels.forEach(label => {\n    label.removeEventListener('mouseenter', handleStarHover);\n    label.removeEventListener('mouseleave', handleStarLeave);\n  });\n\n  listenersAttached = false;\n}\n\nexport function openRatingModal(exerciseId, options = {}) {\n  const elements = getModalElements();\n  if (!elements) return;\n\n  currentExerciseIdForRating = exerciseId;\n  onRatingSuccess = options.onSuccess || null;\n  onRatingClose = options.onClose || null;\n\n  resetRatingForm();\n  attachListeners();\n  openModal('js-rating-modal', { onClose: requestRatingClose });\n}\n\nfunction closeRatingModal(options = {}) {\n  const elements = getModalElements();\n  if (!elements) return;\n\n  detachListeners();\n  closeModal('js-rating-modal', options);\n  currentExerciseIdForRating = null;\n  onRatingSuccess = null;\n  onRatingClose = null;\n}\n\nexport { closeRatingModal };\n\nexport function initRatingModal() {\n  const elements = getModalElements();\n  if (elements?.modal) {\n    elements.modal.setAttribute('aria-hidden', 'true');\n  }\n}\n","const FAVORITES_KEY = 'your-energy:favorites';\nconst LEGACY_FAVORITES_KEY = 'favorites';\n\nexport function safeJsonParse(value, fallback) {\n  if (!value) {\n    return fallback;\n  }\n  try {\n    return JSON.parse(value);\n  } catch (error) {\n    return fallback;\n  }\n}\n\nexport function loadFavorites() {\n  try {\n    const stored = safeJsonParse(localStorage.getItem(FAVORITES_KEY), null);\n    const favorites = new Set();\n\n    if (Array.isArray(stored)) {\n      stored.forEach(id => {\n        if (id !== null && id !== undefined && id !== '') {\n          favorites.add(String(id));\n        }\n      });\n      return favorites;\n    }\n\n    const legacy = safeJsonParse(\n      localStorage.getItem(LEGACY_FAVORITES_KEY),\n      null\n    );\n\n    if (Array.isArray(legacy)) {\n      legacy.forEach(id => {\n        if (id !== null && id !== undefined && id !== '') {\n          favorites.add(String(id));\n        }\n      });\n      saveFavorites(favorites);\n      localStorage.removeItem(LEGACY_FAVORITES_KEY);\n    }\n\n    return favorites;\n  } catch (error) {\n    return new Set();\n  }\n}\n\nexport function saveFavorites(favorites) {\n  try {\n    const normalized = Array.from(favorites || []).map(id => String(id));\n    localStorage.setItem(FAVORITES_KEY, JSON.stringify(normalized));\n    localStorage.removeItem(LEGACY_FAVORITES_KEY);\n  } catch (error) {\n    // Ignore write errors to keep UX responsive.\n  }\n}\n\nexport function getFavorites() {\n  return Array.from(loadFavorites());\n}\n\nexport function addToFavorites(exerciseId) {\n  try {\n    const favorites = loadFavorites();\n    const id = String(exerciseId);\n    if (!favorites.has(id)) {\n      favorites.add(id);\n      saveFavorites(favorites);\n      return true;\n    }\n    return false;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport function removeFromFavorites(exerciseId) {\n  try {\n    const favorites = loadFavorites();\n    const id = String(exerciseId);\n    if (favorites.has(id)) {\n      favorites.delete(id);\n      saveFavorites(favorites);\n    }\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport function isFavorite(exerciseId) {\n  const favorites = loadFavorites();\n  return favorites.has(String(exerciseId));\n}\n\nexport function toggleFavorite(exerciseId) {\n  if (isFavorite(exerciseId)) {\n    removeFromFavorites(exerciseId);\n    return false;\n  }\n  addToFavorites(exerciseId);\n  return true;\n}\n","const PAGE = {\n  HOME: 'home',\n  FAVORITES: 'favorites',\n};\nconst FAVORITES_PATH = 'favorites.html';\nconst SCROLL_LOCK_KEY = 'scrollLockCount';\n\nlet currentPage = PAGE.HOME;\n\nlet mobileMenu = null;\nlet burgerButton = null;\nlet closeButton = null;\nlet isMenuOpen = false;\n\nfunction getPageFromLocation() {\n  const bodyPage = document.body?.dataset.page;\n  if (bodyPage) return bodyPage;\n\n  const pathname = window.location.pathname;\n  if (pathname.endsWith(FAVORITES_PATH)) return PAGE.FAVORITES;\n  return PAGE.HOME;\n}\n\nfunction setActiveLinks(page) {\n  const navLinks = document.querySelectorAll('.header__nav-link');\n  navLinks.forEach(link => {\n    const linkPage = link.getAttribute('data-page');\n    if (linkPage === page) {\n      link.classList.add('header__nav-link--active');\n      link.setAttribute('aria-current', 'page');\n    } else {\n      link.classList.remove('header__nav-link--active');\n      link.removeAttribute('aria-current');\n    }\n  });\n\n  const mobileNavLinks = document.querySelectorAll('.mobile-menu__nav-link');\n  mobileNavLinks.forEach(link => {\n    const linkPage = link.getAttribute('data-page');\n    if (linkPage === page) {\n      link.classList.add('mobile-menu__nav-link--active');\n      link.setAttribute('aria-current', 'page');\n    } else {\n      link.classList.remove('mobile-menu__nav-link--active');\n      link.removeAttribute('aria-current');\n    }\n  });\n}\n\nfunction openMobileMenu() {\n  if (isMenuOpen) return;\n  isMenuOpen = true;\n\n  if (mobileMenu) {\n    mobileMenu.classList.add('is-open');\n    mobileMenu.setAttribute('aria-hidden', 'false');\n  }\n  if (burgerButton) {\n    burgerButton.setAttribute('aria-expanded', 'true');\n  }\n  lockBodyScroll();\n  document.addEventListener('keydown', handleMenuKeydown);\n}\n\nfunction closeMobileMenu() {\n  if (!isMenuOpen) return;\n  isMenuOpen = false;\n\n  if (mobileMenu) {\n    mobileMenu.classList.remove('is-open');\n    mobileMenu.setAttribute('aria-hidden', 'true');\n  }\n  if (burgerButton) {\n    burgerButton.setAttribute('aria-expanded', 'false');\n  }\n  unlockBodyScroll();\n  document.removeEventListener('keydown', handleMenuKeydown);\n}\n\nfunction toggleMobileMenu() {\n  if (isMenuOpen) {\n    closeMobileMenu();\n  } else {\n    openMobileMenu();\n  }\n}\n\nfunction handleMenuKeydown(event) {\n  if (event.key === 'Escape') {\n    closeMobileMenu();\n  }\n}\n\nfunction lockBodyScroll() {\n  const body = document.body;\n  if (!body) return;\n\n  const count = Number(body.dataset[SCROLL_LOCK_KEY] || 0) + 1;\n  body.dataset[SCROLL_LOCK_KEY] = String(count);\n  if (count === 1) {\n    body.style.overflow = 'hidden';\n  }\n}\n\nfunction unlockBodyScroll() {\n  const body = document.body;\n  if (!body) return;\n\n  const count = Number(body.dataset[SCROLL_LOCK_KEY] || 0) - 1;\n  if (count <= 0) {\n    delete body.dataset[SCROLL_LOCK_KEY];\n    body.style.overflow = '';\n    return;\n  }\n  body.dataset[SCROLL_LOCK_KEY] = String(count);\n}\n\nexport function initHeader() {\n  currentPage = getPageFromLocation();\n  setActiveLinks(currentPage);\n\n  mobileMenu = document.querySelector('.mobile-menu');\n  burgerButton = document.querySelector('.header__burger');\n  closeButton = document.querySelector('.mobile-menu__close');\n\n  if (mobileMenu) {\n    mobileMenu.setAttribute('aria-hidden', 'true');\n  }\n\n  if (burgerButton) {\n    if (mobileMenu?.id) {\n      burgerButton.setAttribute('aria-controls', mobileMenu.id);\n    }\n    burgerButton.addEventListener('click', toggleMobileMenu);\n    burgerButton.setAttribute('aria-expanded', 'false');\n  }\n\n  if (closeButton) {\n    closeButton.addEventListener('click', closeMobileMenu);\n  }\n\n  const mobileNavLinks = document.querySelectorAll('.mobile-menu__nav-link');\n  mobileNavLinks.forEach(link => {\n    link.addEventListener('click', () => {\n      closeMobileMenu();\n    });\n  });\n\n  if (mobileMenu) {\n    mobileMenu.addEventListener('click', e => {\n      if (e.target === mobileMenu) {\n        closeMobileMenu();\n      }\n    });\n  }\n}\n\nexport function getCurrentPage() {\n  return currentPage;\n}\n","import { closeModal, openModal, openRatingModal } from './rating-modal.js';\nimport { isFavorite, toggleFavorite } from './favorites.js';\nimport { getCurrentPage } from './header.js';\nimport { loadFavoritesExercises } from './exercises.js';\nimport { getExerciseById } from '../api.js';\nimport { showGlobalNotification } from './global-notification.js';\n\nlet currentExerciseIdForRating = null;\nlet listenersAttached = false;\nlet exerciseRequestController = null;\nlet exerciseRequestId = 0;\n\nfunction getModalElements() {\n  const modal = document.getElementById('js-exercise-modal');\n  if (!modal) return null;\n\n  return {\n    modal,\n    closeBtn: document.getElementById('js-exercise-modal-close'),\n    image: document.getElementById('js-exercise-modal-image'),\n    video: document.getElementById('js-exercise-modal-video'),\n    title: document.getElementById('js-exercise-modal-title'),\n    ratingValue: modal.querySelector('.exercise-modal__rating-value'),\n    ratingStars: modal.querySelector('.exercise-modal__rating-stars'),\n    target: document.getElementById('js-exercise-modal-target'),\n    bodyPart: document.getElementById('js-exercise-modal-body-part'),\n    equipment: document.getElementById('js-exercise-modal-equipment'),\n    popular: document.getElementById('js-exercise-modal-popular'),\n    calories: document.getElementById('js-exercise-modal-calories'),\n    time: document.getElementById('js-exercise-modal-time'),\n    description: document.getElementById('js-exercise-modal-description'),\n    favoriteBtn: document.getElementById('js-exercise-modal-favorites'),\n    ratingBtn: document.getElementById('js-exercise-modal-rating-btn'),\n  };\n}\n\nfunction handleClose() {\n  closeExerciseModal();\n}\n\nfunction handleFavoriteClick() {\n  const exerciseId = currentExerciseIdForRating;\n  if (!exerciseId) return;\n\n  const wasAdded = toggleFavorite(exerciseId);\n  updateFavoriteButton(exerciseId);\n\n  if (!wasAdded && getCurrentPage() === 'favorites') {\n    closeExerciseModal();\n    loadFavoritesExercises();\n  }\n}\n\nfunction handleRatingClick() {\n  const exerciseId = currentExerciseIdForRating;\n  if (!exerciseId) return;\n\n  closeExerciseModal({ restoreFocus: false });\n  openRatingModal(exerciseId, {\n    onSuccess: () => openExerciseModal(exerciseId),\n    onClose: () => openExerciseModal(exerciseId),\n  });\n}\n\nfunction attachListeners() {\n  if (listenersAttached) return;\n  const elements = getModalElements();\n  if (!elements) return;\n\n  elements.closeBtn?.addEventListener('click', handleClose);\n  elements.favoriteBtn?.addEventListener('click', handleFavoriteClick);\n  elements.ratingBtn?.addEventListener('click', handleRatingClick);\n\n  listenersAttached = true;\n}\n\nfunction detachListeners() {\n  if (!listenersAttached) return;\n  const elements = getModalElements();\n  if (!elements) return;\n\n  elements.closeBtn?.removeEventListener('click', handleClose);\n  elements.favoriteBtn?.removeEventListener('click', handleFavoriteClick);\n  elements.ratingBtn?.removeEventListener('click', handleRatingClick);\n\n  listenersAttached = false;\n}\n\nfunction updateFavoriteButton(exerciseId) {\n  const elements = getModalElements();\n  if (!elements?.favoriteBtn) return;\n\n  const isInFavorites = isFavorite(exerciseId);\n  const btnText = elements.favoriteBtn.querySelector('span');\n  const btnIcon = elements.favoriteBtn.querySelector('svg path');\n\n  if (isInFavorites) {\n    elements.favoriteBtn.classList.add('active');\n    if (btnText) btnText.textContent = 'Remove from favorites';\n    if (btnIcon) {\n      btnIcon.setAttribute('fill', 'currentColor');\n      btnIcon.removeAttribute('stroke');\n      btnIcon.removeAttribute('stroke-width');\n    }\n  } else {\n    elements.favoriteBtn.classList.remove('active');\n    if (btnText) btnText.textContent = 'Add to favorites';\n    if (btnIcon) {\n      btnIcon.setAttribute('fill', 'none');\n      btnIcon.setAttribute('stroke', 'currentColor');\n      btnIcon.setAttribute('stroke-width', '2');\n    }\n  }\n}\n\nexport async function openExerciseModal(exerciseId) {\n  const elements = getModalElements();\n  if (!elements) return;\n\n  currentExerciseIdForRating = exerciseId;\n  if (exerciseRequestController) {\n    exerciseRequestController.abort();\n  }\n  exerciseRequestController = new AbortController();\n  exerciseRequestId += 1;\n  const requestId = exerciseRequestId;\n\n  openModal('js-exercise-modal', { onClose: closeExerciseModal });\n\n  attachListeners();\n\n  if (elements.title) elements.title.textContent = 'Loading...';\n  if (elements.ratingValue) elements.ratingValue.textContent = '0.0';\n  if (elements.target) elements.target.textContent = '';\n  if (elements.bodyPart) elements.bodyPart.textContent = '';\n  if (elements.equipment) elements.equipment.textContent = '';\n  if (elements.popular) elements.popular.textContent = '0';\n  if (elements.calories) elements.calories.textContent = '0';\n  if (elements.time) elements.time.textContent = '/0 min';\n  if (elements.description) elements.description.textContent = '';\n  if (elements.image) {\n    elements.image.src = '';\n    elements.image.classList.remove('is-hidden');\n  }\n  if (elements.video) {\n    elements.video.src = '';\n    elements.video.classList.remove('is-visible');\n    elements.video.pause();\n  }\n\n  try {\n    const exercise = await getExerciseById(exerciseId, {\n      signal: exerciseRequestController.signal,\n    });\n    if (requestId !== exerciseRequestId) {\n      return;\n    }\n    const videoUrl = exercise.videoUrl || exercise.video || exercise.videoURL;\n\n    if (videoUrl && elements.video) {\n      elements.video.src = videoUrl;\n      elements.video.classList.add('is-visible');\n      if (elements.image) {\n        elements.image.classList.add('is-hidden');\n      }\n    } else if (elements.image) {\n      elements.image.src = exercise.gifUrl || '';\n    }\n\n    if (elements.title) elements.title.textContent = exercise.name || '';\n    if (elements.target) elements.target.textContent = exercise.target || '';\n    if (elements.bodyPart)\n      elements.bodyPart.textContent = exercise.bodyPart || '';\n    if (elements.equipment)\n      elements.equipment.textContent = exercise.equipment || '';\n    if (elements.popular)\n      elements.popular.textContent = exercise.popularity || 0;\n    if (elements.calories)\n      elements.calories.textContent = exercise.burnedCalories || 0;\n    if (elements.time)\n      elements.time.textContent = `/${exercise.time || 0} min`;\n    if (elements.description)\n      elements.description.textContent = exercise.description || '';\n\n    if (elements.ratingValue) {\n      elements.ratingValue.textContent = (exercise.rating || 0).toFixed(1);\n    }\n\n    if (elements.ratingStars) {\n      const stars = elements.ratingStars.querySelectorAll(\n        '.exercise-modal__rating-star'\n      );\n      const rating = Math.round(exercise.rating || 0);\n\n      stars.forEach((star, index) => {\n        const path = star.querySelector('path');\n        if (index < rating) {\n          path.setAttribute('fill', '#EEA10C');\n          path.removeAttribute('stroke');\n          path.removeAttribute('stroke-width');\n        } else {\n          path.setAttribute('fill', 'none');\n          path.setAttribute('stroke', 'rgba(255,255,255,0.3)');\n          path.setAttribute('stroke-width', '1.5');\n        }\n      });\n    }\n\n    updateFavoriteButton(exerciseId);\n  } catch (error) {\n    if (error?.name === 'AbortError') {\n      return;\n    }\n    if (elements.title) elements.title.textContent = 'Error loading exercise';\n    if (elements.description)\n      elements.description.textContent =\n        'Failed to load exercise details. Please try again later.';\n    showGlobalNotification(\n      error.message || 'Failed to load exercise details.',\n      'error'\n    );\n  }\n}\n\nexport function closeExerciseModal(options = {}) {\n  const elements = getModalElements();\n  if (!elements) return;\n\n  detachListeners();\n\n  closeModal('js-exercise-modal', options);\n  currentExerciseIdForRating = null;\n\n  if (elements.video) {\n    elements.video.pause();\n    elements.video.src = '';\n    elements.video.classList.remove('is-visible');\n  }\n\n  if (exerciseRequestController) {\n    exerciseRequestController.abort();\n    exerciseRequestController = null;\n  }\n}\n\nexport function initExerciseModal() {\n  const elements = getModalElements();\n  if (elements?.modal) {\n    elements.modal.setAttribute('aria-hidden', 'true');\n  }\n}\n","import { openExerciseModal } from './exercise-modal.js';\nimport { getFavorites, removeFromFavorites } from './favorites.js';\nimport { showGlobalNotification } from './global-notification.js';\nimport { getExerciseById, getExercises, getFilters } from '../api.js';\n\nlet currentFilter = 'Muscles';\nlet currentPage = 1;\nlet currentCategory = null;\nlet currentSearchKeyword = '';\nlet currentMode = 'home';\n\nconst TABLET_MIN_WIDTH = 748;\nconst FILTER_PARAM_MAP = {\n  Muscles: 'muscles',\n  'Body parts': 'bodypart',\n  Equipment: 'equipment',\n};\n\nconst filtersCache = new Map();\nconst exercisesCache = new Map();\n\nconst requestState = {\n  filters: { controller: null, requestId: 0 },\n  exercises: { controller: null, requestId: 0 },\n  favorites: { controller: null, requestId: 0 },\n};\n\nconst getCardsContainer = () => document.getElementById('js-exercises-cards');\nconst getPaginationContainer = () =>\n  document.querySelector('.exercises__content__pagination');\nconst getSearchForm = () => document.getElementById('js-exercises-search');\nconst getSearchInput = () =>\n  document.getElementById('js-exercises-search-input');\nconst getHeading = () => document.getElementById('js-exercises-heading');\nconst getBreadcrumbs = () => document.getElementById('js-exercises-breadcrumbs');\nconst getContentContainer = () =>\n  document.querySelector('.exercises__content');\n\nfunction beginRequest(state) {\n  if (state.controller) {\n    state.controller.abort();\n  }\n  const controller = new AbortController();\n  state.controller = controller;\n  state.requestId += 1;\n  return { controller, requestId: state.requestId };\n}\n\nfunction cancelRequest(state) {\n  if (state.controller) {\n    state.controller.abort();\n  }\n  state.controller = null;\n  state.requestId += 1;\n}\n\nfunction isLatestRequest(state, requestId) {\n  return state.requestId === requestId;\n}\n\nfunction isAbortError(error) {\n  return error?.name === 'AbortError';\n}\n\nfunction isTabletViewport() {\n  return window.matchMedia(`(min-width: ${TABLET_MIN_WIDTH}px)`).matches;\n}\n\nfunction getFiltersLimit() {\n  return isTabletViewport() ? 12 : 9;\n}\n\nfunction getExercisesLimit() {\n  return isTabletViewport() ? 10 : 8;\n}\n\nfunction getFiltersCache(filter, page, limit) {\n  const filterCache = filtersCache.get(filter);\n  if (!filterCache) {\n    return null;\n  }\n  return filterCache.get(`${page}:${limit}`) || null;\n}\n\nfunction setFiltersCache(filter, page, limit, data) {\n  if (!filtersCache.has(filter)) {\n    filtersCache.set(filter, new Map());\n  }\n  filtersCache.get(filter).set(`${page}:${limit}`, data);\n}\n\nfunction getExercisesCache(key) {\n  return exercisesCache.get(key) || null;\n}\n\nfunction setExercisesCache(key, data) {\n  exercisesCache.set(key, data);\n}\n\nfunction setCardsBusy(isBusy) {\n  const cardsContainer = getCardsContainer();\n  if (!cardsContainer) return;\n  cardsContainer.setAttribute('aria-busy', isBusy ? 'true' : 'false');\n}\n\nfunction showSearchField() {\n  const searchField = getSearchForm();\n  if (searchField) {\n    searchField.classList.remove('exercises__content__header-search--hidden');\n  }\n}\n\nfunction hideSearchField() {\n  const searchField = getSearchForm();\n  const searchInput = getSearchInput();\n  if (searchField) {\n    searchField.classList.add('exercises__content__header-search--hidden');\n  }\n  if (searchInput) {\n    searchInput.value = '';\n  }\n  currentSearchKeyword = '';\n}\n\nfunction formatCategoryLabel(label) {\n  if (!label) return '';\n  const trimmed = label.trim();\n  if (!trimmed) return label;\n  return trimmed.charAt(0).toUpperCase() + trimmed.slice(1);\n}\n\nfunction createBreadcrumbEntry(node) {\n  const entry = document.createElement('li');\n  entry.className = 'exercises__content__header-breadcrumbs-entry';\n  entry.appendChild(node);\n  return entry;\n}\n\nfunction updateHeadingLabel(label) {\n  const heading = getHeading();\n  if (heading) {\n    heading.textContent = label;\n  }\n}\n\nexport function updateBreadcrumbs(categoryName = null) {\n  const breadcrumbsContainer = getBreadcrumbs();\n  if (!breadcrumbsContainer) {\n    return;\n  }\n\n  breadcrumbsContainer.innerHTML = '';\n\n  if (currentMode === 'favorites') {\n    updateHeadingLabel('Favorites');\n\n    const favoritesTitle = document.createElement('span');\n    favoritesTitle.className =\n      'exercises__content__header-title exercises__content__header-breadcrumbs-current';\n    favoritesTitle.textContent = 'Favorites';\n    favoritesTitle.setAttribute('aria-current', 'page');\n    breadcrumbsContainer.appendChild(createBreadcrumbEntry(favoritesTitle));\n    return;\n  }\n\n  if (!categoryName) {\n    updateHeadingLabel('Exercises');\n\n    const exercisesTitle = document.createElement('span');\n    exercisesTitle.className =\n      'exercises__content__header-title exercises__content__header-breadcrumbs-current';\n    exercisesTitle.textContent = 'Exercises';\n    exercisesTitle.setAttribute('aria-current', 'page');\n    breadcrumbsContainer.appendChild(createBreadcrumbEntry(exercisesTitle));\n    return;\n  }\n\n  const categoryLabel = formatCategoryLabel(categoryName);\n  updateHeadingLabel(`Exercises: ${categoryLabel}`);\n\n  const exercisesBtn = document.createElement('button');\n  exercisesBtn.className =\n    'exercises__content__header-title exercises__content__header-breadcrumbs-item';\n  exercisesBtn.textContent = 'Exercises';\n  exercisesBtn.setAttribute('data-breadcrumb', 'exercises');\n  exercisesBtn.type = 'button';\n  exercisesBtn.addEventListener('click', () => {\n    currentCategory = null;\n    currentPage = 1;\n    loadExerciseCards(currentFilter, currentPage);\n  });\n  breadcrumbsContainer.appendChild(createBreadcrumbEntry(exercisesBtn));\n\n  const separator = document.createElement('span');\n  separator.className = 'exercises__content__header-breadcrumbs-separator';\n  separator.textContent = '/';\n  separator.setAttribute('aria-hidden', 'true');\n  breadcrumbsContainer.appendChild(createBreadcrumbEntry(separator));\n\n  const categorySpan = document.createElement('span');\n  categorySpan.className = 'exercises__content__header-breadcrumbs-current';\n  categorySpan.textContent = categoryLabel;\n  categorySpan.setAttribute('aria-current', 'page');\n  breadcrumbsContainer.appendChild(createBreadcrumbEntry(categorySpan));\n}\n\nfunction setActiveFilter(filter) {\n  currentFilter = filter;\n\n  const filterButtons = document.querySelectorAll(\n    '.exercises__content__header-filters-item'\n  );\n  filterButtons.forEach(button => {\n    const isActive = button.getAttribute('data-filter') === filter;\n    button.classList.toggle(\n      'exercises__content__header-filters-item--active',\n      isActive\n    );\n    button.setAttribute('aria-pressed', isActive ? 'true' : 'false');\n  });\n}\n\nexport function initFilters() {\n  const filterButtons = document.querySelectorAll(\n    '.exercises__content__header-filters-item'\n  );\n\n  if (!filterButtons.length) {\n    return;\n  }\n\n  filterButtons.forEach(button => {\n    button.addEventListener('click', () => {\n      const filter = button.getAttribute('data-filter');\n      if (!filter) return;\n\n      setActiveFilter(filter);\n      currentCategory = null;\n      currentSearchKeyword = '';\n      loadExerciseCards(filter, 1);\n    });\n  });\n\n  setActiveFilter(currentFilter);\n}\n\nfunction createCategoryCard(category) {\n  const categoryName = category.name || '';\n  const categoryFilter = category.filter || '';\n  const imageUrl = category.imgURL || '';\n\n  return `\n    <li>\n      <button\n        class=\"exercises__content__main__cards-item exercise-card exercise-card--category\"\n        type=\"button\"\n        data-action=\"open-category\"\n        data-category-name=\"${categoryName}\"\n        aria-label=\"Open ${categoryName} category\">\n        <div class=\"exercises__content__main__cards-item-image exercise-card__image\">\n          <img src=\"${imageUrl}\" alt=\"${categoryName} exercise\" loading=\"lazy\" decoding=\"async\" />\n          <div class=\"exercises__content__main__cards-item-overlay exercise-card__overlay\">\n            <div class=\"exercises__content__main__cards-item-overlay-name exercise-card__overlay-name\">${categoryName}</div>\n            <div class=\"exercises__content__main__cards-item-overlay-category exercise-card__overlay-category\">${categoryFilter}</div>\n          </div>\n        </div>\n      </button>\n    </li>\n  `;\n}\n\nfunction createExerciseCard(exercise) {\n  const rating = exercise.rating || 0;\n  const burnedCalories = exercise.burnedCalories || 0;\n  const time = exercise.time || 0;\n  const bodyPart = exercise.bodyPart || '';\n  const target = exercise.target || '';\n  const exerciseId = exercise._id || '';\n\n  const removeButtonHTML =\n    currentMode === 'favorites'\n      ? `\n      <button\n        class=\"exercises__content__main__cards-item-remove exercise-card__remove\"\n        type=\"button\"\n        data-action=\"remove-favorite\"\n        aria-label=\"Remove from favorites\">\n        <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n          <path d=\"M3 6H21\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n          <path d=\"M8 6V4H16V6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          <path d=\"M19 6L18 20H6L5 6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          <path d=\"M10 10V16\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n          <path d=\"M14 10V16\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n        </svg>\n      </button>\n    `\n      : '';\n\n  return `\n    <li>\n      <article\n        class=\"exercises__content__main__cards-item exercises__content__main__cards-item--exercise exercise-card exercise-card--exercise\"\n        data-exercise-id=\"${exerciseId}\">\n        <button\n          class=\"exercises__content__main__cards-item-open exercise-card__open\"\n          type=\"button\"\n          data-action=\"open-exercise\"\n          aria-label=\"Open ${exercise.name}\">\n        </button>\n        <div class=\"exercises__content__main__cards-item-header exercise-card__header\">\n          <span class=\"exercises__content__main__cards-item-workout-btn exercise-card__badge\">WORKOUT</span>\n          <div class=\"exercises__content__main__cards-item-rating exercise-card__rating\">\n            <span class=\"exercises__content__main__cards-item-rating-value exercise-card__rating-value\">${rating.toFixed(\n              1\n            )}</span>\n            <svg class=\"exercises__content__main__cards-item-rating-star exercise-card__rating-star\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n              <path d=\"M9 0L11.0206 6.21885L17.5595 6.21885L12.2694 10.0623L14.2901 16.2812L9 12.4377L3.70993 16.2812L5.73056 10.0623L0.440492 6.21885L6.97937 6.21885L9 0Z\" fill=\"#EEA10C\"/>\n            </svg>\n          </div>\n          <button\n            class=\"exercises__content__main__cards-item-start-btn exercise-card__start\"\n            type=\"button\"\n            data-action=\"open-exercise\">\n            Start\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n              <path d=\"M6.75 4.5L11.25 9L6.75 13.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </button>\n        </div>\n        <div class=\"exercises__content__main__cards-item-body exercise-card__body\">\n          <div class=\"exercises__content__main__cards-item-icon exercise-card__icon\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n              <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              <path d=\"M2 17L12 22L22 17\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              <path d=\"M2 12L12 17L22 12\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </div>\n          <h3 class=\"exercises__content__main__cards-item-title exercise-card__title\">${exercise.name}</h3>\n        </div>\n        <ul class=\"exercises__content__main__cards-item-footer exercise-card__meta\">\n          <li class=\"exercises__content__main__cards-item-info exercise-card__meta-item\">\n            <span class=\"exercises__content__main__cards-item-info-label exercise-card__meta-label\">Burned calories:</span>\n            <span class=\"exercises__content__main__cards-item-info-value exercise-card__meta-value\">${burnedCalories}</span>\n            <span class=\"exercises__content__main__cards-item-info-label exercise-card__meta-label\">/ ${time} min</span>\n          </li>\n          <li class=\"exercises__content__main__cards-item-info exercise-card__meta-item\">\n            <span class=\"exercises__content__main__cards-item-info-label exercise-card__meta-label\">Body part:</span>\n            <span class=\"exercises__content__main__cards-item-info-value exercise-card__meta-value\">${bodyPart}</span>\n          </li>\n          <li class=\"exercises__content__main__cards-item-info exercise-card__meta-item\">\n            <span class=\"exercises__content__main__cards-item-info-label exercise-card__meta-label\">Target:</span>\n            <span class=\"exercises__content__main__cards-item-info-value exercise-card__meta-value\">${target}</span>\n          </li>\n        </ul>\n        ${removeButtonHTML}\n      </article>\n    </li>\n  `;\n}\n\nfunction renderCategoryCards(categories) {\n  const cardsContainer = getCardsContainer();\n  if (!cardsContainer) return;\n\n  cardsContainer.classList.remove(\n    'exercises__content__main__cards--exercises',\n    'exercise-cards--exercises'\n  );\n  cardsContainer.innerHTML = categories.map(createCategoryCard).join('');\n}\n\nfunction renderExerciseCards(exercises) {\n  const cardsContainer = getCardsContainer();\n  if (!cardsContainer) return;\n\n  cardsContainer.classList.add(\n    'exercises__content__main__cards--exercises',\n    'exercise-cards--exercises'\n  );\n  cardsContainer.innerHTML = exercises.map(createExerciseCard).join('');\n}\n\nfunction renderEmptyState(message) {\n  const cardsContainer = getCardsContainer();\n  if (!cardsContainer) return;\n\n  cardsContainer.classList.add(\n    'exercises__content__main__cards--exercises',\n    'exercise-cards--exercises'\n  );\n  cardsContainer.innerHTML = `\n    <li class=\"exercises__content__main__empty-state\">\n      <p class=\"exercises__content__main__empty-state-text\">\n        ${message}\n      </p>\n    </li>\n  `;\n}\n\nfunction renderCategoriesEmptyState() {\n  renderEmptyState('Unfortunately, no categories were found for this filter.');\n}\n\nfunction renderExercisesEmptyState() {\n  renderEmptyState(\n    'Unfortunately, no results were found. You may want to consider other search options.'\n  );\n}\n\nfunction renderFavoritesEmptyState() {\n  renderEmptyState(\n    \"It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.\"\n  );\n}\n\nfunction renderCategoryResponse(data, page) {\n  const categories = data?.results || data?.exercises || data || [];\n  const totalPages =\n    data?.totalPages || data?.total_pages || data?.pageCount || 1;\n\n  updateBreadcrumbs(null);\n\n  if (Array.isArray(categories) && categories.length > 0) {\n    renderCategoryCards(categories);\n    renderPagination(totalPages, page);\n  } else {\n    renderCategoriesEmptyState();\n    renderPagination(1, 1);\n  }\n}\n\nfunction renderExercisesResponse(data, page, categoryName) {\n  const exercises = data?.results || [];\n  const totalPages = data?.totalPages || 1;\n\n  updateBreadcrumbs(categoryName);\n\n  if (Array.isArray(exercises) && exercises.length > 0) {\n    renderExerciseCards(exercises);\n    renderPagination(totalPages, page);\n  } else {\n    renderExercisesEmptyState();\n    renderPagination(1, 1);\n  }\n}\n\nfunction renderPagination(totalPages, page = 1) {\n  const paginationContainer = getPaginationContainer();\n  if (!paginationContainer) {\n    return;\n  }\n\n  paginationContainer.innerHTML = '';\n  paginationContainer.setAttribute('role', 'navigation');\n  paginationContainer.setAttribute('aria-label', 'Pagination');\n\n  if (totalPages <= 1) {\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  const goToPage = pageNumber => {\n    currentPage = pageNumber;\n    if (currentCategory) {\n      loadExercisesByCategory(currentCategory, pageNumber, currentSearchKeyword);\n    } else {\n      loadExerciseCards(currentFilter, pageNumber);\n    }\n  };\n\n  const createArrowButton = (label, disabled, onClick) => {\n    const button = document.createElement('button');\n    button.className = 'exercises__content__pagination-arrow';\n    button.type = 'button';\n    button.innerHTML = label;\n    button.disabled = disabled;\n    button.addEventListener('click', onClick);\n    return button;\n  };\n\n  fragment.appendChild(\n    createArrowButton('&laquo;', page === 1, () => goToPage(1))\n  );\n  fragment.appendChild(\n    createArrowButton('&lsaquo;', page === 1, () => goToPage(page - 1))\n  );\n\n  const createPageButton = pageNumber => {\n    const pageButton = document.createElement('button');\n    pageButton.className = 'exercises__content__pagination-page';\n    pageButton.type = 'button';\n    pageButton.textContent = pageNumber;\n\n    if (pageNumber === page) {\n      pageButton.classList.add('exercises__content__pagination-page--active');\n      pageButton.setAttribute('aria-current', 'page');\n    }\n\n    pageButton.addEventListener('click', () => goToPage(pageNumber));\n    return pageButton;\n  };\n\n  if (totalPages <= 5) {\n    for (let i = 1; i <= totalPages; i++) {\n      fragment.appendChild(createPageButton(i));\n    }\n  } else {\n    fragment.appendChild(createPageButton(1));\n    fragment.appendChild(createPageButton(2));\n    fragment.appendChild(createPageButton(3));\n\n    const ellipsis = document.createElement('span');\n    ellipsis.className = 'exercises__content__pagination-ellipsis';\n    ellipsis.textContent = '...';\n    fragment.appendChild(ellipsis);\n\n    fragment.appendChild(createPageButton(totalPages - 1));\n    fragment.appendChild(createPageButton(totalPages));\n  }\n\n  fragment.appendChild(\n    createArrowButton('&rsaquo;', page === totalPages, () => goToPage(page + 1))\n  );\n  fragment.appendChild(\n    createArrowButton('&raquo;', page === totalPages, () => goToPage(totalPages))\n  );\n\n  paginationContainer.appendChild(fragment);\n}\n\nexport async function loadExerciseCards(filter, page = 1) {\n  if (currentMode === 'favorites') {\n    return;\n  }\n\n  const filtersLimit = getFiltersLimit();\n  setActiveFilter(filter);\n  currentPage = page;\n  currentCategory = null;\n  currentSearchKeyword = '';\n\n  hideSearchField();\n  cancelRequest(requestState.exercises);\n\n  const { controller, requestId } = beginRequest(requestState.filters);\n  const cached = getFiltersCache(filter, page, filtersLimit);\n\n  if (cached) {\n    renderCategoryResponse(cached, page);\n    if (isLatestRequest(requestState.filters, requestId)) {\n      setCardsBusy(false);\n    }\n    return;\n  }\n\n  setCardsBusy(true);\n\n  try {\n    const data = await getFilters({\n      filter,\n      page,\n      limit: filtersLimit,\n      signal: controller.signal,\n    });\n\n    if (!isLatestRequest(requestState.filters, requestId)) {\n      return;\n    }\n\n    if (currentMode === 'favorites') {\n      return;\n    }\n\n    setFiltersCache(filter, page, filtersLimit, data);\n    renderCategoryResponse(data, page);\n  } catch (error) {\n    if (!isLatestRequest(requestState.filters, requestId) || isAbortError(error)) {\n      return;\n    }\n\n    updateBreadcrumbs(null);\n    renderCategoriesEmptyState();\n    renderPagination(1, 1);\n    showGlobalNotification(\n      error.message || 'Failed to load categories.',\n      'error'\n    );\n  } finally {\n    if (isLatestRequest(requestState.filters, requestId)) {\n      setCardsBusy(false);\n    }\n  }\n}\n\nexport async function loadExercisesByCategory(\n  categoryName,\n  page = 1,\n  keyword = currentSearchKeyword\n) {\n  if (currentMode === 'favorites') {\n    return;\n  }\n\n  const exercisesLimit = getExercisesLimit();\n  currentCategory = categoryName;\n  currentPage = page;\n  currentSearchKeyword = keyword?.trim() || '';\n\n  showSearchField();\n  cancelRequest(requestState.filters);\n\n  const paramName = FILTER_PARAM_MAP[currentFilter] || 'muscles';\n  const cacheKey = `${paramName}:${categoryName}:${page}:${exercisesLimit}:${currentSearchKeyword}`;\n\n  const { controller, requestId } = beginRequest(requestState.exercises);\n  const cached = getExercisesCache(cacheKey);\n\n  if (cached) {\n    renderExercisesResponse(cached, page, categoryName);\n    if (isLatestRequest(requestState.exercises, requestId)) {\n      setCardsBusy(false);\n    }\n    return;\n  }\n\n  setCardsBusy(true);\n\n  try {\n    const data = await getExercises({\n      [paramName]: categoryName,\n      page,\n      limit: exercisesLimit,\n      keyword: currentSearchKeyword,\n      signal: controller.signal,\n    });\n\n    if (!isLatestRequest(requestState.exercises, requestId)) {\n      return;\n    }\n\n    if (currentMode === 'favorites') {\n      return;\n    }\n\n    setExercisesCache(cacheKey, data);\n    renderExercisesResponse(data, page, categoryName);\n  } catch (error) {\n    if (\n      !isLatestRequest(requestState.exercises, requestId) ||\n      isAbortError(error)\n    ) {\n      return;\n    }\n\n    renderExercisesEmptyState();\n    renderPagination(1, 1);\n    showGlobalNotification(\n      error.message || 'Failed to load exercises.',\n      'error'\n    );\n  } finally {\n    if (isLatestRequest(requestState.exercises, requestId)) {\n      setCardsBusy(false);\n    }\n  }\n}\n\nexport function initSearch() {\n  const searchForm = getSearchForm();\n  const searchInput = getSearchInput();\n\n  if (!searchForm || !searchInput) {\n    return;\n  }\n\n  searchForm.addEventListener('submit', event => {\n    event.preventDefault();\n\n    if (!currentCategory || currentMode === 'favorites') {\n      return;\n    }\n\n    const keyword = searchInput.value.trim();\n    loadExercisesByCategory(currentCategory, 1, keyword);\n  });\n}\n\nexport async function loadFavoritesExercises() {\n  const favoriteIds = getFavorites();\n  const paginationContainer = getPaginationContainer();\n\n  updateBreadcrumbs(null);\n\n  if (paginationContainer) {\n    paginationContainer.innerHTML = '';\n  }\n\n  if (favoriteIds.length === 0) {\n    cancelRequest(requestState.favorites);\n    renderFavoritesEmptyState();\n    return;\n  }\n\n  const { controller, requestId } = beginRequest(requestState.favorites);\n  setCardsBusy(true);\n\n  try {\n    const results = await Promise.allSettled(\n      favoriteIds.map(id =>\n        getExerciseById(id, { signal: controller.signal })\n      )\n    );\n\n    if (\n      !isLatestRequest(requestState.favorites, requestId) ||\n      currentMode !== 'favorites'\n    ) {\n      return;\n    }\n\n    const validExercises = results\n      .filter(result => result.status === 'fulfilled' && result.value)\n      .map(result => result.value);\n\n    if (validExercises.length > 0) {\n      renderExerciseCards(validExercises);\n    } else {\n      renderFavoritesEmptyState();\n    }\n  } catch (error) {\n    if (\n      !isLatestRequest(requestState.favorites, requestId) ||\n      isAbortError(error)\n    ) {\n      return;\n    }\n    renderFavoritesEmptyState();\n    showGlobalNotification(\n      error.message || 'Failed to load favorite exercises.',\n      'error'\n    );\n  } finally {\n    if (isLatestRequest(requestState.favorites, requestId)) {\n      setCardsBusy(false);\n    }\n  }\n}\n\nexport function initCardsEventListener() {\n  const cardsContainer = getCardsContainer();\n\n  if (!cardsContainer) {\n    return;\n  }\n\n  cardsContainer.addEventListener('click', event => {\n    const removeButton = event.target.closest('[data-action=\"remove-favorite\"]');\n    if (removeButton) {\n      event.preventDefault();\n      const card = removeButton.closest('[data-exercise-id]');\n      const exerciseId = card?.getAttribute('data-exercise-id');\n\n      if (exerciseId) {\n        removeFromFavorites(exerciseId);\n\n        if (currentMode === 'favorites') {\n          const listItem = removeButton.closest('li');\n          if (listItem) {\n            listItem.remove();\n          }\n\n          if (!getCardsContainer()?.children.length) {\n            renderFavoritesEmptyState();\n          }\n        }\n      }\n      return;\n    }\n\n    const categoryButton = event.target.closest('[data-action=\"open-category\"]');\n    if (categoryButton) {\n      const categoryName = categoryButton.getAttribute('data-category-name');\n      if (categoryName) {\n        loadExercisesByCategory(categoryName, 1);\n      }\n      return;\n    }\n\n    const openButton = event.target.closest('[data-action=\"open-exercise\"]');\n    if (openButton) {\n      const card = openButton.closest('[data-exercise-id]');\n      const exerciseId = card?.getAttribute('data-exercise-id');\n      if (exerciseId) {\n        openExerciseModal(exerciseId);\n      }\n    }\n  });\n}\n\nexport function switchToHome() {\n  currentMode = 'home';\n  currentCategory = null;\n  currentSearchKeyword = '';\n  cancelRequest(requestState.favorites);\n\n  const contentContainer = getContentContainer();\n  if (contentContainer) {\n    contentContainer.classList.remove('exercises__content--favorites');\n  }\n\n  loadExerciseCards(currentFilter, 1);\n}\n\nexport function switchToFavorites() {\n  currentMode = 'favorites';\n  currentCategory = null;\n  currentSearchKeyword = '';\n\n  hideSearchField();\n  cancelRequest(requestState.filters);\n  cancelRequest(requestState.exercises);\n  setCardsBusy(false);\n\n  const contentContainer = getContentContainer();\n  if (contentContainer) {\n    contentContainer.classList.add('exercises__content--favorites');\n  }\n\n  loadFavoritesExercises();\n}\n\nexport function getCurrentFilter() {\n  return currentFilter;\n}\n\nexport function setFilter(filter) {\n  setActiveFilter(filter);\n}\n\nexport function getCurrentMode() {\n  return currentMode;\n}\n","import { getQuote } from '../api.js';\nimport { showGlobalNotification } from './global-notification.js';\n\nconst QUOTE_KEY = 'your-energy:quote';\nconst LEGACY_QUOTE_KEYS = {\n  text: 'quote-text',\n  author: 'quote-author',\n  date: 'quote-date',\n};\n\n// Helper function to get today's date in YYYY-MM-DD format\nfunction getTodayDate() {\n  const today = new Date();\n  const year = today.getFullYear();\n  const month = String(today.getMonth() + 1).padStart(2, '0');\n  const day = String(today.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\nfunction safeJsonParse(value, fallback) {\n  if (!value) {\n    return fallback;\n  }\n  try {\n    return JSON.parse(value);\n  } catch (error) {\n    return fallback;\n  }\n}\n\nfunction loadQuote() {\n  try {\n    const stored = safeJsonParse(localStorage.getItem(QUOTE_KEY), null);\n    if (stored && typeof stored === 'object' && stored.quote && stored.author) {\n      return stored;\n    }\n\n    const legacyQuote = {\n      quote: localStorage.getItem(LEGACY_QUOTE_KEYS.text),\n      author: localStorage.getItem(LEGACY_QUOTE_KEYS.author),\n      date: localStorage.getItem(LEGACY_QUOTE_KEYS.date),\n    };\n\n    if (legacyQuote.quote && legacyQuote.author) {\n      saveQuote(legacyQuote);\n      localStorage.removeItem(LEGACY_QUOTE_KEYS.text);\n      localStorage.removeItem(LEGACY_QUOTE_KEYS.author);\n      localStorage.removeItem(LEGACY_QUOTE_KEYS.date);\n      return legacyQuote;\n    }\n\n    return null;\n  } catch (error) {\n    return null;\n  }\n}\n\nfunction saveQuote(quote) {\n  try {\n    localStorage.setItem(QUOTE_KEY, JSON.stringify(quote));\n    localStorage.removeItem(LEGACY_QUOTE_KEYS.text);\n    localStorage.removeItem(LEGACY_QUOTE_KEYS.author);\n    localStorage.removeItem(LEGACY_QUOTE_KEYS.date);\n  } catch (error) {\n    // Ignore write errors to keep UX responsive.\n  }\n}\n\n// Function to load quote data with caching logic\nasync function loadQuoteOfTheDay() {\n  const cachedQuote = loadQuote();\n  const todayDate = getTodayDate();\n\n  if (\n    cachedQuote &&\n    cachedQuote.quote &&\n    cachedQuote.author &&\n    cachedQuote.date === todayDate\n  ) {\n    return { quote: cachedQuote.quote, author: cachedQuote.author };\n  }\n\n  // Fetch new quote from API\n  try {\n    const data = await getQuote();\n    const nextQuote = {\n      quote: data?.quote,\n      author: data?.author,\n      date: todayDate,\n    };\n\n    if (nextQuote.quote && nextQuote.author) {\n      saveQuote(nextQuote);\n    }\n\n    // Return the quote data\n    return { quote: data?.quote, author: data?.author };\n  } catch (error) {\n    // If fetch fails but we have cached data, use it\n    if (cachedQuote?.quote && cachedQuote?.author) {\n      return { quote: cachedQuote.quote, author: cachedQuote.author };\n    }\n\n    // Return null if no data available\n    if (!cachedQuote?.quote || !cachedQuote?.author) {\n      showGlobalNotification('Failed to load quote of the day.', 'error');\n    }\n    return null;\n  }\n}\n\n// Function to display quote in DOM\nexport async function displayQuote() {\n  const quoteData = await loadQuoteOfTheDay();\n\n  if (!quoteData) {\n    return;\n  }\n\n  const quoteTextElement = document.getElementById('js-exercises-quote-text');\n  const quoteAuthorElement = document.getElementById(\n    'js-exercises-quote-author'\n  );\n\n  if (quoteTextElement) {\n    quoteTextElement.textContent = quoteData.quote;\n  }\n\n  if (quoteAuthorElement) {\n    quoteAuthorElement.textContent = quoteData.author;\n  }\n}\n","import {\n  switchToHome,\n  switchToFavorites,\n  initSearch,\n  initCardsEventListener,\n  initFilters,\n} from './js/exercises.js';\nimport { initExerciseModal } from './js/exercise-modal.js';\nimport { initRatingModal } from './js/rating-modal.js';\nimport {\n  initGlobalNotification,\n  showGlobalNotification,\n} from './js/global-notification.js';\nimport {\n  showFieldError,\n  hideFieldError,\n  validateEmail,\n} from './js/form-validation.js';\nimport { initHeader } from './js/header.js';\nimport { displayQuote } from './js/quote.js';\nimport { postSubscription } from './api.js';\n\n//    \ndocument.addEventListener('DOMContentLoaded', () => {\n  // Load and display quote of the day\n  displayQuote();\n  //  \n  initExerciseModal();\n  initRatingModal();\n\n  //   \n  initGlobalNotification();\n\n  //  \n  initHeader();\n\n  //  \n  initSearch();\n\n  //       (event delegation)\n  initCardsEventListener();\n\n  //  \n  initFilters();\n\n  const initialPage = document.body?.dataset.page || 'home';\n  if (initialPage === 'favorites') {\n    switchToFavorites();\n  } else {\n    switchToHome();\n  }\n\n  //   \n  const subscribeForm = document.getElementById('subscribeForm');\n  const subscribeEmailInput = document.getElementById(\n    'footer-subscribe-email'\n  );\n  const subscribeEmailError = document.getElementById('subscribeEmailError');\n\n  // Clear error on input\n  if (subscribeEmailInput && subscribeEmailError) {\n    subscribeEmailInput.addEventListener('input', () => {\n      hideFieldError(subscribeEmailInput, subscribeEmailError);\n    });\n  }\n\n  if (subscribeForm) {\n    subscribeForm.addEventListener('submit', async e => {\n      e.preventDefault();\n\n      const email = subscribeEmailInput?.value.trim() || '';\n      let hasErrors = false;\n\n      // Validate email\n      if (!email) {\n        showFieldError(\n          subscribeEmailInput,\n          subscribeEmailError,\n          'Please enter your email address'\n        );\n        hasErrors = true;\n      } else if (!validateEmail(email)) {\n        showFieldError(\n          subscribeEmailInput,\n          subscribeEmailError,\n          'Please enter a valid email address'\n        );\n        hasErrors = true;\n      } else {\n        hideFieldError(subscribeEmailInput, subscribeEmailError);\n      }\n\n      // Stop if there are errors\n      if (hasErrors) {\n        return;\n      }\n\n      try {\n        const data = await postSubscription(email);\n        showGlobalNotification(\n          data?.message || 'Subscription successful.',\n          'success'\n        );\n        subscribeForm.reset();\n        hideFieldError(subscribeEmailInput, subscribeEmailError);\n      } catch (error) {\n        showGlobalNotification(error.message || 'Failed to subscribe.', 'error');\n      }\n    });\n  }\n});\n"],"names":["notificationTimeout","showGlobalNotification","message","type","notification","textElement","hideGlobalNotification","initGlobalNotification","closeBtn","showFieldError","inputElement","errorElement","errorClass","hideFieldError","validateEmail","email","BASE_URL","DEFAULT_TIMEOUT_MS","buildUrl","path","params","normalizedPath","url","searchParams","key","value","query","fetchJson","signal","timeoutMs","options","controller","headers","hasBody","didTimeout","timeoutId","response","error","timeoutError","contentType","data","dataSnippet","getQuote","getFilters","filter","page","limit","getExercises","getExerciseById","exerciseId","patchExerciseRating","payload","postSubscription","SCROLL_LOCK_KEY","modalState","currentExerciseIdForRating","onRatingSuccess","onRatingClose","listenersAttached","lockBodyScroll","body","count","unlockBodyScroll","getFocusableElements","modal","selectors","element","trapFocus","event","first","last","handleModalKeydown","requestModalClose","getModalOpenClass","baseClass","modalId","modalHandlers","closeModal","openModal","onClose","openClass","overlay","overlayHandler","_a","restoreFocus","preserveScroll","getModalElements","showServerMessage","elements","hideServerMessage","getSelectedRating","selected","input","updateStars","rating","label","index","updateRatingValue","resetRatingForm","requestRatingClose","hasCloseCallback","closeRatingModal","handleClose","handleStarChange","handleStarHover","handleStarLeave","selectedRating","handleEmailInput","handleCommentInput","handleServerMessageClose","handleFormSubmit","review","_b","hasErrors","exerciseName","successCallback","errorMessage","attachListeners","_c","_d","_e","detachListeners","openRatingModal","initRatingModal","FAVORITES_KEY","LEGACY_FAVORITES_KEY","safeJsonParse","fallback","loadFavorites","stored","favorites","id","legacy","saveFavorites","normalized","getFavorites","addToFavorites","removeFromFavorites","isFavorite","toggleFavorite","PAGE","FAVORITES_PATH","currentPage","mobileMenu","burgerButton","closeButton","isMenuOpen","getPageFromLocation","bodyPage","setActiveLinks","link","openMobileMenu","handleMenuKeydown","closeMobileMenu","toggleMobileMenu","initHeader","e","getCurrentPage","exerciseRequestController","exerciseRequestId","closeExerciseModal","handleFavoriteClick","wasAdded","updateFavoriteButton","loadFavoritesExercises","handleRatingClick","openExerciseModal","isInFavorites","btnText","btnIcon","requestId","exercise","videoUrl","stars","star","initExerciseModal","currentFilter","currentCategory","currentSearchKeyword","currentMode","TABLET_MIN_WIDTH","FILTER_PARAM_MAP","filtersCache","exercisesCache","requestState","getCardsContainer","getPaginationContainer","getSearchForm","getSearchInput","getHeading","getBreadcrumbs","getContentContainer","beginRequest","state","cancelRequest","isLatestRequest","isAbortError","isTabletViewport","getFiltersLimit","getExercisesLimit","getFiltersCache","filterCache","setFiltersCache","getExercisesCache","setExercisesCache","setCardsBusy","isBusy","cardsContainer","showSearchField","searchField","hideSearchField","searchInput","formatCategoryLabel","trimmed","createBreadcrumbEntry","node","entry","updateHeadingLabel","heading","updateBreadcrumbs","categoryName","breadcrumbsContainer","favoritesTitle","exercisesTitle","categoryLabel","exercisesBtn","loadExerciseCards","separator","categorySpan","setActiveFilter","button","isActive","initFilters","filterButtons","createCategoryCard","category","categoryFilter","imageUrl","createExerciseCard","burnedCalories","time","bodyPart","target","removeButtonHTML","renderCategoryCards","categories","renderExerciseCards","exercises","renderEmptyState","renderCategoriesEmptyState","renderExercisesEmptyState","renderFavoritesEmptyState","renderCategoryResponse","totalPages","renderPagination","renderExercisesResponse","paginationContainer","fragment","goToPage","pageNumber","loadExercisesByCategory","createArrowButton","disabled","onClick","createPageButton","pageButton","i","ellipsis","filtersLimit","cached","keyword","exercisesLimit","paramName","cacheKey","initSearch","searchForm","favoriteIds","results","validExercises","result","initCardsEventListener","removeButton","card","listItem","categoryButton","openButton","switchToHome","contentContainer","switchToFavorites","QUOTE_KEY","LEGACY_QUOTE_KEYS","getTodayDate","today","year","month","day","loadQuote","legacyQuote","saveQuote","quote","loadQuoteOfTheDay","cachedQuote","todayDate","nextQuote","displayQuote","quoteData","quoteTextElement","quoteAuthorElement","subscribeForm","subscribeEmailInput","subscribeEmailError"],"mappings":"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"}