{"version":3,"file":"main-Bv6h_3kY.js","sources":["../../src/js/global-notification.js","../../src/js/form-validation.js","../../src/js/rating-modal.js","../../src/js/favorites.js","../../src/js/header.js","../../src/js/exercise-modal.js","../../src/api.js","../../src/js/exercises.js","../../src/js/quote.js","../../src/main.js"],"sourcesContent":["// Global notification system\nlet notificationTimeout = null;\n\n/**\n * Shows a global notification message\n * @param {string} message - The message to display\n * @param {string} type - The type of notification ('success' or 'error')\n */\nexport function showGlobalNotification(message, type = 'success') {\n  const notification = document.getElementById('js-global-notification');\n  const textElement = document.getElementById('js-global-notification-text');\n\n  if (!notification || !textElement) return;\n\n  // Clear any existing timeout\n  if (notificationTimeout) {\n    clearTimeout(notificationTimeout);\n    notificationTimeout = null;\n  }\n\n  // Set the message and type\n  textElement.textContent = message;\n  notification.classList.remove('global-notification--error');\n  if (type === 'error') {\n    notification.classList.add('global-notification--error');\n  }\n\n  // Show the notification\n  notification.classList.add('global-notification--visible');\n\n  // Auto-hide after 3 seconds\n  notificationTimeout = setTimeout(() => {\n    hideGlobalNotification();\n  }, 3000);\n}\n\n/**\n * Hides the global notification\n */\nexport function hideGlobalNotification() {\n  const notification = document.getElementById('js-global-notification');\n  const textElement = document.getElementById('js-global-notification-text');\n\n  if (!notification) return;\n\n  // Clear timeout if exists\n  if (notificationTimeout) {\n    clearTimeout(notificationTimeout);\n    notificationTimeout = null;\n  }\n\n  // Hide the notification\n  notification.classList.remove('global-notification--visible');\n\n  // Clear content after animation\n  setTimeout(() => {\n    if (textElement) {\n      textElement.textContent = '';\n    }\n    notification.classList.remove('global-notification--error');\n  }, 300);\n}\n\n/**\n * Initializes the global notification system\n */\nexport function initGlobalNotification() {\n  const closeBtn = document.getElementById('js-global-notification-close');\n\n  if (closeBtn) {\n    closeBtn.addEventListener('click', hideGlobalNotification);\n  }\n}\n","/**\n * Form validation utilities module\n * Provides reusable functions for form field validation and error display\n */\n\n/**\n * Shows an error message for a form field\n * @param {HTMLElement} inputElement - The input/textarea element\n * @param {HTMLElement} errorElement - The element to display error message\n * @param {string} message - The error message to display\n */\nexport function showFieldError(inputElement, errorElement, message) {\n  if (inputElement) {\n    // Determine the appropriate error class based on element type\n    const errorClass = inputElement.classList.contains('rating-modal__textarea')\n      ? 'rating-modal__textarea--error'\n      : inputElement.classList.contains('rating-modal__input')\n      ? 'rating-modal__input--error'\n      : inputElement.classList.contains('footer__subscribe-form-input')\n      ? 'footer__subscribe-form-input--error'\n      : 'form-field--error';\n\n    inputElement.classList.add(errorClass);\n  }\n\n  if (errorElement) {\n    errorElement.textContent = message;\n    errorElement.classList.add('form-error--visible');\n  }\n}\n\n/**\n * Hides the error message for a form field\n * @param {HTMLElement} inputElement - The input/textarea element\n * @param {HTMLElement} errorElement - The element displaying error message\n */\nexport function hideFieldError(inputElement, errorElement) {\n  if (inputElement) {\n    inputElement.classList.remove(\n      'rating-modal__input--error',\n      'rating-modal__textarea--error',\n      'footer__subscribe-form-input--error',\n      'form-field--error'\n    );\n  }\n\n  if (errorElement) {\n    errorElement.textContent = '';\n    errorElement.classList.remove('form-error--visible');\n  }\n}\n\n/**\n * Validates an email address\n * @param {string} email - The email address to validate\n * @returns {boolean} True if email is valid, false otherwise\n */\nexport function validateEmail(email) {\n  const emailRegex = /^\\w+(\\.\\w+)?@[a-zA-Z_]+?\\.[a-zA-Z]{2,3}$/;\n  return emailRegex.test(email);\n}\n\n/**\n * Validates that a field is not empty\n * @param {string} value - The value to validate\n * @returns {boolean} True if value is not empty, false otherwise\n */\nexport function validateRequired(value) {\n  return value.trim().length > 0;\n}\n","import { showGlobalNotification } from './global-notification.js';\nimport {\n  showFieldError,\n  hideFieldError,\n  validateEmail,\n} from './form-validation.js';\n\nconst MODAL_IDS = {\n  EXERCISE: 'js-exercise-modal',\n  RATING: 'js-rating-modal',\n};\n\nconst SCROLL_LOCK_KEY = 'scrollLockCount';\n\nfunction lockBodyScroll() {\n  const body = document.body;\n  if (!body) return;\n\n  const count = Number(body.dataset[SCROLL_LOCK_KEY] || 0) + 1;\n  body.dataset[SCROLL_LOCK_KEY] = String(count);\n  if (count === 1) {\n    body.style.overflow = 'hidden';\n  }\n}\n\nfunction unlockBodyScroll() {\n  const body = document.body;\n  if (!body) return;\n\n  const count = Number(body.dataset[SCROLL_LOCK_KEY] || 0) - 1;\n  if (count <= 0) {\n    delete body.dataset[SCROLL_LOCK_KEY];\n    body.style.overflow = '';\n    return;\n  }\n  body.dataset[SCROLL_LOCK_KEY] = String(count);\n}\n\nfunction getModalOpenClass(modalId) {\n  if (modalId === MODAL_IDS.EXERCISE) return 'exercise-modal--open';\n  if (modalId === MODAL_IDS.RATING) return 'rating-modal--open';\n  return '';\n}\n\nfunction getModalBackdrop(modal) {\n  return (\n    modal.querySelector('.modal__backdrop') ||\n    modal.querySelector('.exercise-modal__overlay') ||\n    modal.querySelector('.rating-modal__overlay') ||\n    (modal.classList.contains('modal-backdrop') ||\n    modal.classList.contains('modal__backdrop')\n      ? modal\n      : null)\n  );\n}\n\nexport function openModal(modalId) {\n  const modal = document.getElementById(modalId);\n  if (!modal) return;\n\n  const openClass = getModalOpenClass(modalId);\n  if (openClass) {\n    modal.classList.add(openClass);\n  }\n  modal.classList.add('is-open');\n  document.body.classList.add('modal-open');\n  lockBodyScroll();\n\n  if (modal.dataset.backdropListener !== 'true') {\n    const backdrop = getModalBackdrop(modal);\n    if (backdrop) {\n      backdrop.addEventListener('click', event => {\n        if (event.target !== backdrop) return;\n        closeModal(modalId);\n      });\n    }\n    modal.dataset.backdropListener = 'true';\n  }\n\n  if (modal.dataset.escapeListener !== 'true') {\n    const handleEscape = e => {\n      if (e.key === 'Escape' && modal.classList.contains('is-open')) {\n        closeModal(modalId);\n      }\n    };\n    document.addEventListener('keydown', handleEscape);\n    modal.dataset.escapeListener = 'true';\n  }\n}\n\nexport function closeModal(modalId) {\n  const modal = document.getElementById(modalId);\n  if (!modal) return;\n\n  const openClass = getModalOpenClass(modalId);\n  const wasOpen =\n    modal.classList.contains('is-open') ||\n    (openClass && modal.classList.contains(openClass));\n\n  modal.classList.remove('is-open');\n  if (openClass) {\n    modal.classList.remove(openClass);\n  }\n\n  if (wasOpen) {\n    unlockBodyScroll();\n  }\n\n  if (modalId === MODAL_IDS.RATING) {\n    openModal(MODAL_IDS.EXERCISE);\n  }\n\n  const anyModalOpen = document.querySelector(\n    '.exercise-modal--open, .rating-modal--open, .is-open'\n  );\n  if (!anyModalOpen) {\n    document.body.classList.remove('modal-open');\n  }\n}\n\n// Змінна для зберігання ID вправи для рейтингу\nlet currentExerciseIdForRating = null;\n\n// Helper functions for server messages\nfunction showServerMessage(message, type = 'error') {\n  const messageElement = document.getElementById('js-rating-server-message');\n  if (!messageElement) return;\n\n  messageElement.textContent = message;\n  messageElement.classList.remove(\n    'modal-rating-message--error',\n    'modal-rating-message--success'\n  );\n  messageElement.classList.add(`modal-rating-message--${type}`);\n  messageElement.hidden = false;\n}\n\nfunction hideServerMessage() {\n  const messageElement = document.getElementById('js-rating-server-message');\n  if (!messageElement) return;\n\n  messageElement.textContent = '';\n  messageElement.classList.remove(\n    'modal-rating-message--error',\n    'modal-rating-message--success'\n  );\n  messageElement.hidden = true;\n}\n\n// Функція для закриття модального вікна рейтингу\nfunction closeRatingModal() {\n  closeModal(MODAL_IDS.RATING);\n  currentExerciseIdForRating = null;\n  resetRatingForm();\n}\n\n// Функція для відкриття модального вікна рейтингу\nexport function openRatingModal(exerciseId) {\n  showRatingModal(exerciseId);\n}\n\nexport function showRatingModal(exerciseId) {\n  if (exerciseId) {\n    currentExerciseIdForRating = exerciseId;\n  }\n  closeModal(MODAL_IDS.EXERCISE);\n  openModal(MODAL_IDS.RATING);\n  resetRatingForm();\n  initRatingStars();\n}\n\nexport function hideRatingModal() {\n  closeRatingModal();\n}\n\nfunction resetRatingForm() {\n  const ratingForm = document.getElementById('js-rating-modal-form');\n  const ratingValue = document.getElementById('js-rating-modal-value');\n  const stars = document.querySelectorAll('.rating-modal__star');\n\n  if (ratingForm) ratingForm.reset();\n  if (ratingValue) ratingValue.textContent = '0.0';\n\n  stars.forEach(star => {\n    star.classList.remove('rating-modal__star--active');\n    star.style.color = '';\n    const svg = star.querySelector('svg');\n    if (svg) {\n      const path = svg.querySelector('path');\n      if (path) {\n        path.setAttribute('fill', 'none');\n        path.setAttribute('stroke', 'currentColor');\n      }\n    }\n  });\n\n  const emailInput = document.getElementById('js-rating-modal-email');\n  const emailError = document.getElementById('js-email-error');\n  const commentTextarea = document.getElementById('js-rating-modal-comment');\n  const commentError = document.getElementById('js-comment-error');\n  const ratingError = document.getElementById('js-rating-error');\n\n  hideFieldError(emailInput, emailError);\n  hideFieldError(commentTextarea, commentError);\n  hideFieldError(null, ratingError);\n  hideServerMessage();\n}\n\nfunction initRatingStars() {\n  const starsContainer = document.getElementById('js-rating-modal-stars');\n  const ratingValue = document.getElementById('js-rating-modal-value');\n\n  if (!starsContainer) return;\n  if (starsContainer.dataset.listenerAttached === 'true') return;\n  starsContainer.dataset.listenerAttached = 'true';\n\n  const stars = starsContainer.querySelectorAll('.rating-modal__star');\n\n  stars.forEach(star => {\n    star.addEventListener('click', () => {\n      const selectedRating = Number(star.dataset.rating || 0);\n      if (ratingValue) {\n        ratingValue.textContent = selectedRating.toFixed(1);\n      }\n\n      stars.forEach(s => {\n        const starRating = Number(s.dataset.rating || 0);\n        const isActive = starRating <= selectedRating;\n        s.classList.toggle('rating-modal__star--active', isActive);\n        const svg = s.querySelector('svg');\n        if (svg) {\n          const path = svg.querySelector('path');\n          if (path) {\n            if (isActive) {\n              path.setAttribute('fill', '#EEA10C');\n              path.setAttribute('stroke', '#EEA10C');\n            } else {\n              path.setAttribute('fill', 'none');\n              path.setAttribute('stroke', 'currentColor');\n            }\n          }\n        }\n      });\n\n      const ratingError = document.getElementById('js-rating-error');\n      if (ratingError) {\n        hideFieldError(null, ratingError);\n      }\n    });\n\n    star.addEventListener('mouseenter', () => {\n      const hoverRating = Number(star.dataset.rating || 0);\n      stars.forEach(s => {\n        const starRating = Number(s.dataset.rating || 0);\n        if (\n          starRating <= hoverRating &&\n          !s.classList.contains('rating-modal__star--active')\n        ) {\n          s.style.color = 'rgba(255, 255, 255, 0.6)';\n        }\n      });\n    });\n\n    star.addEventListener('mouseleave', () => {\n      stars.forEach(s => {\n        if (!s.classList.contains('rating-modal__star--active')) {\n          s.style.color = 'rgba(255, 255, 255, 0.3)';\n        } else {\n          s.style.color = '';\n        }\n      });\n    });\n  });\n}\n\nexport function getCurrentRating() {\n  const stars = document.querySelectorAll('.rating-modal__star--active');\n  let maxRating = 0;\n  stars.forEach(star => {\n    const rating = Number(star.dataset.rating || 0);\n    if (rating > maxRating) {\n      maxRating = rating;\n    }\n  });\n  return maxRating;\n}\n\n// Експорт функції закриття для використання в інших модулях\nexport { closeRatingModal };\n\n// Ініціалізація event listeners для модального вікна рейтингу\nexport function initRatingModal() {\n  // Обробники для модального вікна рейтингу\n  const ratingModalCloseBtn = document.getElementById('js-rating-modal-close');\n\n  if (ratingModalCloseBtn) {\n    ratingModalCloseBtn.addEventListener('click', closeRatingModal);\n  }\n\n  initRatingStars();\n\n  // Add input event listeners to clear errors on input\n  const emailInput = document.getElementById('js-rating-modal-email');\n  const emailError = document.getElementById('js-email-error');\n  const commentTextarea = document.getElementById('js-rating-modal-comment');\n  const commentError = document.getElementById('js-comment-error');\n\n  if (emailInput && emailError) {\n    emailInput.addEventListener('input', () => {\n      hideFieldError(emailInput, emailError);\n    });\n  }\n\n  if (commentTextarea && commentError) {\n    commentTextarea.addEventListener('input', () => {\n      hideFieldError(commentTextarea, commentError);\n    });\n  }\n\n  // Обробка форми рейтингу\n  const ratingForm = document.getElementById('js-rating-modal-form');\n  if (ratingForm) {\n    ratingForm.addEventListener('submit', e => {\n      e.preventDefault();\n\n      const emailInput = document.getElementById('js-rating-modal-email');\n      const commentTextarea = document.getElementById(\n        'js-rating-modal-comment'\n      );\n      const emailError = document.getElementById('js-email-error');\n      const commentError = document.getElementById('js-comment-error');\n      const ratingError = document.getElementById('js-rating-error');\n\n      const selectedRating = getCurrentRating();\n      let hasErrors = false;\n\n      // Validate rating\n      if (selectedRating === 0) {\n        showFieldError(null, ratingError, 'Please select a rating');\n        hasErrors = true;\n      } else {\n        hideFieldError(null, ratingError);\n      }\n\n      const email = emailInput?.value.trim() || '';\n      const review = commentTextarea?.value.trim() || '';\n\n      // Validate email\n      if (!email) {\n        showFieldError(emailInput, emailError, 'Please enter your email');\n        hasErrors = true;\n      } else if (!validateEmail(email)) {\n        showFieldError(\n          emailInput,\n          emailError,\n          'Please enter a valid email address'\n        );\n        hasErrors = true;\n      } else {\n        hideFieldError(emailInput, emailError);\n      }\n\n      // Validate comment\n      if (!review) {\n        showFieldError(\n          commentTextarea,\n          commentError,\n          'Please enter your comment'\n        );\n        hasErrors = true;\n      } else {\n        hideFieldError(commentTextarea, commentError);\n      }\n\n      // Stop if there are errors\n      if (hasErrors) {\n        return;\n      }\n\n      // Відправка рейтингу на сервер\n      if (currentExerciseIdForRating) {\n        // Clear previous server messages\n        hideServerMessage();\n\n        fetch(\n          `https://your-energy.b.goit.study/api/exercises/${currentExerciseIdForRating}/rating`,\n          {\n            method: 'PATCH',\n            headers: {\n              'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n              rate: selectedRating,\n              email,\n              review,\n            }),\n          }\n        )\n          .then(async response => {\n            const data = await response.json();\n\n            if (!response.ok) {\n              // Get error message from server or use default\n              throw { message: data.message, data };\n            }\n\n            return data;\n          })\n          .then(data => {\n            closeRatingModal();\n            const exerciseName = data.name || 'the exercise';\n            showGlobalNotification(\n              `Thank you, your review for exercise ${exerciseName} has been submitted`,\n              'success'\n            );\n          })\n          .catch(error => {\n            const errorMessage =\n              error.message || 'Failed to submit rating. Please try again.';\n            showServerMessage(errorMessage, 'error');\n          });\n      }\n    });\n  }\n}\n","const FAVORITES_KEY = 'your-energy:favorites';\nconst LEGACY_FAVORITES_KEY = 'favorites';\n\nexport function safeJsonParse(value, fallback) {\n  if (!value) {\n    return fallback;\n  }\n  try {\n    return JSON.parse(value);\n  } catch (error) {\n    return fallback;\n  }\n}\n\nexport function loadFavorites() {\n  try {\n    const stored = safeJsonParse(localStorage.getItem(FAVORITES_KEY), null);\n    const favorites = new Set();\n\n    if (Array.isArray(stored)) {\n      stored.forEach(id => {\n        if (id !== null && id !== undefined && id !== '') {\n          favorites.add(String(id));\n        }\n      });\n      return favorites;\n    }\n\n    const legacy = safeJsonParse(\n      localStorage.getItem(LEGACY_FAVORITES_KEY),\n      null\n    );\n\n    if (Array.isArray(legacy)) {\n      legacy.forEach(id => {\n        if (id !== null && id !== undefined && id !== '') {\n          favorites.add(String(id));\n        }\n      });\n      saveFavorites(favorites);\n      localStorage.removeItem(LEGACY_FAVORITES_KEY);\n    }\n\n    return favorites;\n  } catch (error) {\n    return new Set();\n  }\n}\n\nexport function saveFavorites(favorites) {\n  try {\n    const normalized = Array.from(favorites || []).map(id => String(id));\n    localStorage.setItem(FAVORITES_KEY, JSON.stringify(normalized));\n    localStorage.removeItem(LEGACY_FAVORITES_KEY);\n  } catch (error) {\n    // Ignore write errors to keep UX responsive.\n  }\n}\n\nexport function getFavorites() {\n  return Array.from(loadFavorites());\n}\n\nexport function addToFavorites(exerciseId) {\n  try {\n    const favorites = loadFavorites();\n    const id = String(exerciseId);\n    if (!favorites.has(id)) {\n      favorites.add(id);\n      saveFavorites(favorites);\n      return true;\n    }\n    return false;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport function removeFromFavorites(exerciseId) {\n  try {\n    const favorites = loadFavorites();\n    const id = String(exerciseId);\n    if (favorites.has(id)) {\n      favorites.delete(id);\n      saveFavorites(favorites);\n    }\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\nexport function isFavorite(exerciseId) {\n  const favorites = loadFavorites();\n  return favorites.has(String(exerciseId));\n}\n\nexport function toggleFavorite(exerciseId) {\n  if (isFavorite(exerciseId)) {\n    removeFromFavorites(exerciseId);\n    return false;\n  }\n  addToFavorites(exerciseId);\n  return true;\n}\n","const PAGE = {\n  HOME: 'home',\n  FAVORITES: 'favorites',\n};\nconst FAVORITES_PATH = 'favorites.html';\nconst SCROLL_LOCK_KEY = 'scrollLockCount';\n\nlet currentPage = PAGE.HOME;\n\nlet mobileMenu = null;\nlet burgerButton = null;\nlet closeButton = null;\nlet isMenuOpen = false;\n\nfunction getPageFromLocation() {\n  const bodyPage = document.body?.dataset.page;\n  if (bodyPage) return bodyPage;\n\n  const pathname = window.location.pathname;\n  if (pathname.endsWith(FAVORITES_PATH)) return PAGE.FAVORITES;\n  return PAGE.HOME;\n}\n\nfunction setActiveLinks(page) {\n  const navLinks = document.querySelectorAll('.header__nav-link');\n  navLinks.forEach(link => {\n    const linkPage = link.getAttribute('data-page');\n    if (linkPage === page) {\n      link.classList.add('header__nav-link--active');\n      link.setAttribute('aria-current', 'page');\n    } else {\n      link.classList.remove('header__nav-link--active');\n      link.removeAttribute('aria-current');\n    }\n  });\n\n  const mobileNavLinks = document.querySelectorAll('.mobile-menu__nav-link');\n  mobileNavLinks.forEach(link => {\n    const linkPage = link.getAttribute('data-page');\n    if (linkPage === page) {\n      link.classList.add('mobile-menu__nav-link--active');\n      link.setAttribute('aria-current', 'page');\n    } else {\n      link.classList.remove('mobile-menu__nav-link--active');\n      link.removeAttribute('aria-current');\n    }\n  });\n}\n\nfunction openMobileMenu() {\n  if (isMenuOpen) return;\n  isMenuOpen = true;\n\n  if (mobileMenu) {\n    mobileMenu.classList.add('is-open');\n    mobileMenu.setAttribute('aria-hidden', 'false');\n  }\n  if (burgerButton) {\n    burgerButton.setAttribute('aria-expanded', 'true');\n  }\n  lockBodyScroll();\n  document.addEventListener('keydown', handleMenuKeydown);\n}\n\nfunction closeMobileMenu() {\n  if (!isMenuOpen) return;\n  isMenuOpen = false;\n\n  if (mobileMenu) {\n    mobileMenu.classList.remove('is-open');\n    mobileMenu.setAttribute('aria-hidden', 'true');\n  }\n  if (burgerButton) {\n    burgerButton.setAttribute('aria-expanded', 'false');\n  }\n  unlockBodyScroll();\n  document.removeEventListener('keydown', handleMenuKeydown);\n}\n\nfunction toggleMobileMenu() {\n  if (isMenuOpen) {\n    closeMobileMenu();\n  } else {\n    openMobileMenu();\n  }\n}\n\nfunction handleMenuKeydown(event) {\n  if (event.key === 'Escape') {\n    closeMobileMenu();\n  }\n}\n\nfunction lockBodyScroll() {\n  const body = document.body;\n  if (!body) return;\n\n  const count = Number(body.dataset[SCROLL_LOCK_KEY] || 0) + 1;\n  body.dataset[SCROLL_LOCK_KEY] = String(count);\n  if (count === 1) {\n    body.style.overflow = 'hidden';\n  }\n}\n\nfunction unlockBodyScroll() {\n  const body = document.body;\n  if (!body) return;\n\n  const count = Number(body.dataset[SCROLL_LOCK_KEY] || 0) - 1;\n  if (count <= 0) {\n    delete body.dataset[SCROLL_LOCK_KEY];\n    body.style.overflow = '';\n    return;\n  }\n  body.dataset[SCROLL_LOCK_KEY] = String(count);\n}\n\nexport function initHeader() {\n  currentPage = getPageFromLocation();\n  setActiveLinks(currentPage);\n\n  mobileMenu = document.querySelector('.mobile-menu');\n  burgerButton = document.querySelector('.header__burger');\n  closeButton = document.querySelector('.mobile-menu__close');\n\n  if (mobileMenu) {\n    mobileMenu.setAttribute('aria-hidden', 'true');\n  }\n\n  if (burgerButton) {\n    if (mobileMenu?.id) {\n      burgerButton.setAttribute('aria-controls', mobileMenu.id);\n    }\n    burgerButton.addEventListener('click', toggleMobileMenu);\n    burgerButton.setAttribute('aria-expanded', 'false');\n  }\n\n  if (closeButton) {\n    closeButton.addEventListener('click', closeMobileMenu);\n  }\n\n  const mobileNavLinks = document.querySelectorAll('.mobile-menu__nav-link');\n  mobileNavLinks.forEach(link => {\n    link.addEventListener('click', () => {\n      closeMobileMenu();\n    });\n  });\n\n  if (mobileMenu) {\n    mobileMenu.addEventListener('click', e => {\n      if (e.target === mobileMenu) {\n        closeMobileMenu();\n      }\n    });\n  }\n}\n\nexport function getCurrentPage() {\n  return currentPage;\n}\n","import { openRatingModal, openModal, closeModal } from './rating-modal.js';\nimport {\n  isFavorite,\n  toggleFavorite,\n} from './favorites.js';\nimport { getCurrentPage } from './header.js';\nimport { loadFavoritesExercises } from './exercises.js';\n\nconst EXERCISE_MODAL_ID = 'js-exercise-modal';\nconst SPRITE_PATH = './images/sprite.svg';\nconst FAVORITE_TEXT_ADD = 'Add to favorites';\nconst FAVORITE_TEXT_REMOVE = 'Remove from favorites';\nconst FAVORITE_CLASS = 'is-favorite';\n\n// Змінна для зберігання ID вправи для рейтингу\nlet currentExerciseIdForRating = null;\n\n// Функція для закриття модального вікна\nfunction closeExerciseModal() {\n  closeModal(EXERCISE_MODAL_ID);\n}\n\nexport function renderExerciseModal(exercise) {\n  if (!exercise) return;\n\n  const image = document.getElementById('js-exercise-modal-image');\n  const title = document.getElementById('js-exercise-modal-title');\n  const ratingValue = document.querySelector('.exercise-modal__rating-value');\n  const ratingStars = document.querySelector('.exercise-modal__rating-stars');\n  const target = document.getElementById('js-exercise-modal-target');\n  const bodyPart = document.getElementById('js-exercise-modal-body-part');\n  const equipment = document.getElementById('js-exercise-modal-equipment');\n  const popular = document.getElementById('js-exercise-modal-popular');\n  const calories = document.getElementById('js-exercise-modal-calories');\n  const time = document.getElementById('js-exercise-modal-time');\n  const description = document.getElementById('js-exercise-modal-description');\n\n  if (image) {\n    image.src = exercise.gifUrl || '';\n    image.alt = exercise.name || 'Exercise illustration';\n  }\n  if (title) title.textContent = exercise.name || 'Exercise';\n  if (target) target.textContent = exercise.target || '';\n  if (bodyPart) bodyPart.textContent = exercise.bodyPart || '';\n  if (equipment) equipment.textContent = exercise.equipment || '';\n  if (popular) popular.textContent = exercise.popularity || 0;\n  if (calories) calories.textContent = exercise.burnedCalories || 0;\n  if (time) time.textContent = `/${exercise.time || 0} min`;\n  if (description) description.textContent = exercise.description || '';\n\n  const rating = Number(exercise.rating) || 0;\n  if (ratingValue) {\n    ratingValue.textContent = rating.toFixed(1);\n  }\n\n  if (ratingStars) {\n    const stars = ratingStars.querySelectorAll('.exercise-modal__rating-star');\n    const rounded = Math.round(rating);\n\n    stars.forEach((star, index) => {\n      const path = star.querySelector('path');\n      if (!path) return;\n      if (index < rounded) {\n        path.setAttribute('fill', '#EEA10C');\n        path.removeAttribute('stroke');\n        path.removeAttribute('stroke-width');\n      } else {\n        path.setAttribute('fill', 'none');\n        path.setAttribute('stroke', 'rgba(255,255,255,0.3)');\n        path.setAttribute('stroke-width', '1.5');\n      }\n    });\n  }\n\n  const modal = document.getElementById(EXERCISE_MODAL_ID);\n  if (modal && exercise._id) {\n    modal.dataset.exerciseId = exercise._id;\n  }\n}\n\n// Функція для відкриття модального вікна з даними вправи\nexport function openExerciseModal(exerciseId) {\n  const modal = document.getElementById(EXERCISE_MODAL_ID);\n  if (!modal) return;\n\n  // Зберігаємо ID вправи для рейтингу\n  currentExerciseIdForRating = exerciseId;\n\n  // Показуємо модальне вікно з індикатором завантаження\n  openModal(EXERCISE_MODAL_ID);\n\n  // Отримуємо елементи для заповнення\n  const image = document.getElementById('js-exercise-modal-image');\n  const title = document.getElementById('js-exercise-modal-title');\n  const ratingValue = document.querySelector('.exercise-modal__rating-value');\n  const ratingStars = document.querySelector('.exercise-modal__rating-stars');\n  const target = document.getElementById('js-exercise-modal-target');\n  const bodyPart = document.getElementById('js-exercise-modal-body-part');\n  const equipment = document.getElementById('js-exercise-modal-equipment');\n  const popular = document.getElementById('js-exercise-modal-popular');\n  const calories = document.getElementById('js-exercise-modal-calories');\n  const time = document.getElementById('js-exercise-modal-time');\n  const description = document.getElementById('js-exercise-modal-description');\n\n  // Очищаємо попередні дані\n  if (title) title.textContent = 'Loading...';\n  if (ratingValue) ratingValue.textContent = '0.0';\n  if (target) target.textContent = '';\n  if (bodyPart) bodyPart.textContent = '';\n  if (equipment) equipment.textContent = '';\n  if (popular) popular.textContent = '0';\n  if (calories) calories.textContent = '0';\n  if (time) time.textContent = '/0 min';\n  if (description) description.textContent = '';\n  if (image) image.src = '';\n  if (ratingStars) {\n    const stars = ratingStars.querySelectorAll('.exercise-modal__rating-star');\n    stars.forEach(star => {\n      const path = star.querySelector('path');\n      if (!path) return;\n      path.setAttribute('fill', 'none');\n      path.setAttribute('stroke', 'rgba(255,255,255,0.3)');\n      path.setAttribute('stroke-width', '1.5');\n    });\n  }\n\n  // Завантажуємо детальну інформацію про вправу\n  fetch(`https://your-energy.b.goit.study/api/exercises/${exerciseId}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error('Failed to fetch exercise details');\n      }\n      return response.json();\n    })\n    .then(exercise => {\n      renderExerciseModal(exercise);\n\n      // Оновлюємо стан кнопки Favorites\n      updateFavoriteButton(exerciseId);\n\n      // Підключення кнопки \"Give a rating\"\n      const ratingBtn = document.getElementById('js-exercise-modal-rating-btn');\n      if (ratingBtn) {\n        // Видаляємо попередні обробники\n        const newRatingBtn = ratingBtn.cloneNode(true);\n        ratingBtn.parentNode.replaceChild(newRatingBtn, ratingBtn);\n\n        newRatingBtn.addEventListener('click', () => {\n          openRatingModal(exerciseId);\n        });\n      }\n    })\n    .catch(error => {\n      if (title) title.textContent = 'Error loading exercise';\n      if (description)\n        description.textContent =\n          'Failed to load exercise details. Please try again later.';\n    });\n}\n\nfunction renderFavoriteButtonState(button, isInFavorites) {\n  if (!button) return;\n\n  const label = button.querySelector('.modal-btn__label');\n  const iconUse = button.querySelector('.modal-btn__icon use');\n\n  if (isInFavorites) {\n    button.classList.add(FAVORITE_CLASS);\n    if (label) label.textContent = FAVORITE_TEXT_REMOVE;\n    if (iconUse) iconUse.setAttribute('href', `${SPRITE_PATH}#icon-trash`);\n  } else {\n    button.classList.remove(FAVORITE_CLASS);\n    if (label) label.textContent = FAVORITE_TEXT_ADD;\n    if (iconUse) iconUse.setAttribute('href', `${SPRITE_PATH}#icon-heart`);\n  }\n}\n\n// Функція для оновлення стану кнопки Favorites\nfunction updateFavoriteButton(exerciseId) {\n  const favoriteBtn = document.getElementById('js-exercise-modal-favorites');\n  if (!favoriteBtn) return;\n\n  renderFavoriteButtonState(favoriteBtn, isFavorite(exerciseId));\n}\n\n// Експорт функції закриття для використання в інших модулях\nexport { closeExerciseModal };\n\n// Ініціалізація event listeners для модального вікна\nexport function initExerciseModal() {\n  // Обробники для модального вікна\n  const modalCloseBtn = document.getElementById('js-exercise-modal-close');\n\n  if (modalCloseBtn) {\n    modalCloseBtn.addEventListener('click', closeExerciseModal);\n  }\n\n  // Обробник для кнопки Favorites\n  const favoriteBtn = document.getElementById('js-exercise-modal-favorites');\n  if (favoriteBtn) {\n    favoriteBtn.addEventListener('click', () => {\n      const exerciseId = currentExerciseIdForRating;\n      if (!exerciseId) return;\n\n      const wasAdded = toggleFavorite(exerciseId);\n      updateFavoriteButton(exerciseId);\n\n      // Якщо користувач на сторінці Favorites і видаляє вправу\n      if (!wasAdded && getCurrentPage() === 'favorites') {\n        closeExerciseModal();\n        loadFavoritesExercises();\n      }\n    });\n  }\n}\n","const BASE_URL = 'https://your-energy.b.goit.study/api';\nconst DEFAULT_TIMEOUT_MS = 10000;\n\nconst buildUrl = (path, params = {}) => {\n  const normalizedPath = path.startsWith('/') ? path : `/${path}`;\n  const url = new URL(`${BASE_URL}${normalizedPath}`);\n  const searchParams = new URLSearchParams();\n\n  Object.entries(params).forEach(([key, value]) => {\n    if (value === undefined || value === null || value === '') {\n      return;\n    }\n    searchParams.set(key, value);\n  });\n\n  const query = searchParams.toString();\n  if (query) {\n    url.search = query;\n  }\n\n  return url.toString();\n};\n\nexport const fetchJson = async (\n  path,\n  { params, signal, timeoutMs = DEFAULT_TIMEOUT_MS, ...options } = {}\n) => {\n  const url = buildUrl(path, params);\n  const controller = new AbortController();\n  const headers = new Headers(options.headers || {});\n  const hasBody = options.body !== undefined && options.body !== null;\n  let didTimeout = false;\n\n  if (hasBody && !headers.has('Content-Type')) {\n    headers.set('Content-Type', 'application/json');\n  }\n\n  if (signal) {\n    if (signal.aborted) {\n      controller.abort();\n    } else {\n      signal.addEventListener('abort', () => controller.abort(), { once: true });\n    }\n  }\n\n  const timeoutId =\n    timeoutMs && Number.isFinite(timeoutMs)\n      ? setTimeout(() => {\n          didTimeout = true;\n          controller.abort();\n        }, timeoutMs)\n      : null;\n\n  let response;\n  try {\n    response = await fetch(url, {\n      ...options,\n      headers,\n      signal: controller.signal,\n    });\n  } catch (error) {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    if (error?.name === 'AbortError') {\n      if (didTimeout) {\n        const timeoutError = new Error('Request timed out.');\n        timeoutError.name = 'TimeoutError';\n        throw timeoutError;\n      }\n    }\n    throw error;\n  } finally {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n  }\n\n  const contentType = response.headers.get('content-type') || '';\n  let data = null;\n\n  if (response.status !== 204) {\n    if (contentType.includes('application/json')) {\n      data = await response.json().catch(() => null);\n    } else {\n      data = await response.text().catch(() => null);\n    }\n  }\n\n  if (!response.ok) {\n    const dataSnippet =\n      typeof data === 'string'\n        ? data.slice(0, 200)\n        : data && typeof data === 'object'\n        ? JSON.stringify(data).slice(0, 200)\n        : '';\n    const message =\n      (data && typeof data === 'object' && data.message) ||\n      dataSnippet ||\n      response.statusText ||\n      'Request failed';\n    const error = new Error(`${message} (status ${response.status})`);\n    error.status = response.status;\n    error.data = data;\n    throw error;\n  }\n\n  return data;\n};\n\nexport const getQuote = (options = {}) => fetchJson('/quote', options);\n\nexport const getFilters = ({\n  filter,\n  page = 1,\n  limit = 12,\n  signal,\n  timeoutMs,\n} = {}) =>\n  fetchJson('/filters', { params: { filter, page, limit }, signal, timeoutMs });\n\nexport const getExercises = ({\n  page = 1,\n  limit = 8,\n  signal,\n  timeoutMs,\n  ...params\n} = {}) =>\n  fetchJson('/exercises', {\n    params: { ...params, page, limit },\n    signal,\n    timeoutMs,\n  });\n\nexport const getExerciseById = (exerciseId, options = {}) =>\n  fetchJson(`/exercises/${exerciseId}`, options);\n\nexport const patchExerciseRating = (exerciseId, payload, options = {}) =>\n  fetchJson(`/exercises/${exerciseId}/rating`, {\n    method: 'PATCH',\n    body: JSON.stringify(payload),\n    ...options,\n  });\n\nexport const postSubscription = (email, options = {}) =>\n  fetchJson('/subscription', {\n    method: 'POST',\n    body: JSON.stringify({ email }),\n    ...options,\n  });\n","import { openExerciseModal } from './exercise-modal.js';\nimport { getFavorites, removeFromFavorites } from './favorites.js';\nimport { showGlobalNotification } from './global-notification.js';\nimport { getExerciseById, getExercises, getFilters } from '../api.js';\n\nlet currentFilter = 'Muscles';\nlet currentPage = 1;\nlet currentCategory = null;\nlet currentSearchKeyword = '';\nlet currentMode = 'home';\n\nconst TABLET_MIN_WIDTH = 748;\nconst FILTER_PARAM_MAP = {\n  Muscles: 'muscles',\n  'Body parts': 'bodypart',\n  Equipment: 'equipment',\n};\n\nconst filtersCache = new Map();\nconst exercisesCache = new Map();\n\nconst requestState = {\n  filters: { controller: null, requestId: 0 },\n  exercises: { controller: null, requestId: 0 },\n  favorites: { controller: null, requestId: 0 },\n};\n\nconst getCardsContainer = () => document.getElementById('js-exercises-cards');\nconst getPaginationContainer = () =>\n  document.querySelector('.exercises__content__pagination');\nconst getSearchForm = () => document.getElementById('js-exercises-search');\nconst getSearchInput = () =>\n  document.getElementById('js-exercises-search-input');\nconst getHeading = () => document.getElementById('js-exercises-heading');\nconst getBreadcrumbs = () => document.getElementById('js-exercises-breadcrumbs');\nconst getContentContainer = () =>\n  document.querySelector('.exercises__content');\n\nfunction beginRequest(state) {\n  if (state.controller) {\n    state.controller.abort();\n  }\n  const controller = new AbortController();\n  state.controller = controller;\n  state.requestId += 1;\n  return { controller, requestId: state.requestId };\n}\n\nfunction cancelRequest(state) {\n  if (state.controller) {\n    state.controller.abort();\n  }\n  state.controller = null;\n  state.requestId += 1;\n}\n\nfunction isLatestRequest(state, requestId) {\n  return state.requestId === requestId;\n}\n\nfunction isAbortError(error) {\n  return error?.name === 'AbortError';\n}\n\nfunction isTabletViewport() {\n  return window.matchMedia(`(min-width: ${TABLET_MIN_WIDTH}px)`).matches;\n}\n\nfunction getFiltersLimit() {\n  return isTabletViewport() ? 12 : 9;\n}\n\nfunction getExercisesLimit() {\n  return isTabletViewport() ? 10 : 8;\n}\n\nfunction getFiltersCache(filter, page, limit) {\n  const filterCache = filtersCache.get(filter);\n  if (!filterCache) {\n    return null;\n  }\n  return filterCache.get(`${page}:${limit}`) || null;\n}\n\nfunction setFiltersCache(filter, page, limit, data) {\n  if (!filtersCache.has(filter)) {\n    filtersCache.set(filter, new Map());\n  }\n  filtersCache.get(filter).set(`${page}:${limit}`, data);\n}\n\nfunction getExercisesCache(key) {\n  return exercisesCache.get(key) || null;\n}\n\nfunction setExercisesCache(key, data) {\n  exercisesCache.set(key, data);\n}\n\nfunction setCardsBusy(isBusy) {\n  const cardsContainer = getCardsContainer();\n  if (!cardsContainer) return;\n  cardsContainer.setAttribute('aria-busy', isBusy ? 'true' : 'false');\n}\n\nfunction showSearchField() {\n  const searchField = getSearchForm();\n  if (searchField) {\n    searchField.classList.remove('exercises__content__header-search--hidden');\n  }\n}\n\nfunction hideSearchField() {\n  const searchField = getSearchForm();\n  const searchInput = getSearchInput();\n  if (searchField) {\n    searchField.classList.add('exercises__content__header-search--hidden');\n  }\n  if (searchInput) {\n    searchInput.value = '';\n  }\n  currentSearchKeyword = '';\n}\n\nfunction formatCategoryLabel(label) {\n  if (!label) return '';\n  const trimmed = label.trim();\n  if (!trimmed) return label;\n  return trimmed.charAt(0).toUpperCase() + trimmed.slice(1);\n}\n\nfunction createBreadcrumbEntry(node) {\n  const entry = document.createElement('li');\n  entry.className = 'exercises__content__header-breadcrumbs-entry';\n  entry.appendChild(node);\n  return entry;\n}\n\nfunction updateHeadingLabel(label) {\n  const heading = getHeading();\n  if (heading) {\n    heading.textContent = label;\n  }\n}\n\nexport function updateBreadcrumbs(categoryName = null) {\n  const breadcrumbsContainer = getBreadcrumbs();\n  if (!breadcrumbsContainer) {\n    return;\n  }\n\n  breadcrumbsContainer.innerHTML = '';\n\n  if (currentMode === 'favorites') {\n    updateHeadingLabel('Favorites');\n\n    const favoritesTitle = document.createElement('span');\n    favoritesTitle.className =\n      'exercises__content__header-title exercises__content__header-breadcrumbs-current';\n    favoritesTitle.textContent = 'Favorites';\n    favoritesTitle.setAttribute('aria-current', 'page');\n    breadcrumbsContainer.appendChild(createBreadcrumbEntry(favoritesTitle));\n    return;\n  }\n\n  if (!categoryName) {\n    updateHeadingLabel('Exercises');\n\n    const exercisesTitle = document.createElement('span');\n    exercisesTitle.className =\n      'exercises__content__header-title exercises__content__header-breadcrumbs-current';\n    exercisesTitle.textContent = 'Exercises';\n    exercisesTitle.setAttribute('aria-current', 'page');\n    breadcrumbsContainer.appendChild(createBreadcrumbEntry(exercisesTitle));\n    return;\n  }\n\n  const categoryLabel = formatCategoryLabel(categoryName);\n  updateHeadingLabel(`Exercises: ${categoryLabel}`);\n\n  const exercisesBtn = document.createElement('button');\n  exercisesBtn.className =\n    'exercises__content__header-title exercises__content__header-breadcrumbs-item';\n  exercisesBtn.textContent = 'Exercises';\n  exercisesBtn.setAttribute('data-breadcrumb', 'exercises');\n  exercisesBtn.type = 'button';\n  exercisesBtn.addEventListener('click', () => {\n    currentCategory = null;\n    currentPage = 1;\n    loadExerciseCards(currentFilter, currentPage);\n  });\n  breadcrumbsContainer.appendChild(createBreadcrumbEntry(exercisesBtn));\n\n  const separator = document.createElement('span');\n  separator.className = 'exercises__content__header-breadcrumbs-separator';\n  separator.textContent = '/';\n  separator.setAttribute('aria-hidden', 'true');\n  breadcrumbsContainer.appendChild(createBreadcrumbEntry(separator));\n\n  const categorySpan = document.createElement('span');\n  categorySpan.className = 'exercises__content__header-breadcrumbs-current';\n  categorySpan.textContent = categoryLabel;\n  categorySpan.setAttribute('aria-current', 'page');\n  breadcrumbsContainer.appendChild(createBreadcrumbEntry(categorySpan));\n}\n\nfunction setActiveFilter(filter) {\n  currentFilter = filter;\n\n  const filterButtons = document.querySelectorAll(\n    '.exercises__content__header-filters-item'\n  );\n  filterButtons.forEach(button => {\n    const isActive = button.getAttribute('data-filter') === filter;\n    button.classList.toggle(\n      'exercises__content__header-filters-item--active',\n      isActive\n    );\n    button.setAttribute('aria-pressed', isActive ? 'true' : 'false');\n  });\n}\n\nexport function initFilters() {\n  const filterButtons = document.querySelectorAll(\n    '.exercises__content__header-filters-item'\n  );\n\n  if (!filterButtons.length) {\n    return;\n  }\n\n  filterButtons.forEach(button => {\n    button.addEventListener('click', () => {\n      const filter = button.getAttribute('data-filter');\n      if (!filter) return;\n\n      setActiveFilter(filter);\n      currentCategory = null;\n      currentSearchKeyword = '';\n      loadExerciseCards(filter, 1);\n    });\n  });\n\n  setActiveFilter(currentFilter);\n}\n\nfunction createCategoryCard(category) {\n  const categoryName = category.name || '';\n  const categoryFilter = category.filter || '';\n  const imageUrl = category.imgURL || '';\n\n  return `\n    <li>\n      <button\n        class=\"exercises__content__main__cards-item exercise-card exercise-card--category\"\n        type=\"button\"\n        data-action=\"open-category\"\n        data-category-name=\"${categoryName}\"\n        aria-label=\"Open ${categoryName} category\">\n        <div class=\"exercises__content__main__cards-item-image exercise-card__image\">\n          <img src=\"${imageUrl}\" alt=\"${categoryName} exercise\" loading=\"lazy\" decoding=\"async\" />\n          <div class=\"exercises__content__main__cards-item-overlay exercise-card__overlay\">\n            <div class=\"exercises__content__main__cards-item-overlay-name exercise-card__overlay-name\">${categoryName}</div>\n            <div class=\"exercises__content__main__cards-item-overlay-category exercise-card__overlay-category\">${categoryFilter}</div>\n          </div>\n        </div>\n      </button>\n    </li>\n  `;\n}\n\nfunction createExerciseCard(exercise) {\n  const rating = exercise.rating || 0;\n  const burnedCalories = exercise.burnedCalories || 0;\n  const time = exercise.time || 0;\n  const bodyPart = exercise.bodyPart || '';\n  const target = exercise.target || '';\n  const exerciseId = exercise._id || '';\n\n  const removeButtonHTML =\n    currentMode === 'favorites'\n      ? `\n      <button\n        class=\"exercises__content__main__cards-item-remove exercise-card__remove\"\n        type=\"button\"\n        data-action=\"remove-favorite\"\n        aria-label=\"Remove from favorites\">\n        <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n          <path d=\"M3 6H21\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n          <path d=\"M8 6V4H16V6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          <path d=\"M19 6L18 20H6L5 6\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n          <path d=\"M10 10V16\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n          <path d=\"M14 10V16\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n        </svg>\n      </button>\n    `\n      : '';\n\n  return `\n    <li>\n      <article\n        class=\"exercises__content__main__cards-item exercises__content__main__cards-item--exercise exercise-card exercise-card--exercise\"\n        data-exercise-id=\"${exerciseId}\">\n        <button\n          class=\"exercises__content__main__cards-item-open exercise-card__open\"\n          type=\"button\"\n          data-action=\"open-exercise\"\n          aria-label=\"Open ${exercise.name}\">\n        </button>\n        <div class=\"exercises__content__main__cards-item-header exercise-card__header\">\n          <span class=\"exercises__content__main__cards-item-workout-btn exercise-card__badge\">WORKOUT</span>\n          <div class=\"exercises__content__main__cards-item-rating exercise-card__rating\">\n            <span class=\"exercises__content__main__cards-item-rating-value exercise-card__rating-value\">${rating.toFixed(\n              1\n            )}</span>\n            <svg class=\"exercises__content__main__cards-item-rating-star exercise-card__rating-star\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n              <path d=\"M9 0L11.0206 6.21885L17.5595 6.21885L12.2694 10.0623L14.2901 16.2812L9 12.4377L3.70993 16.2812L5.73056 10.0623L0.440492 6.21885L6.97937 6.21885L9 0Z\" fill=\"#EEA10C\"/>\n            </svg>\n          </div>\n          <button\n            class=\"exercises__content__main__cards-item-start-btn exercise-card__start\"\n            type=\"button\"\n            data-action=\"open-exercise\">\n            Start\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n              <path d=\"M6.75 4.5L11.25 9L6.75 13.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </button>\n        </div>\n        <div class=\"exercises__content__main__cards-item-body exercise-card__body\">\n          <div class=\"exercises__content__main__cards-item-icon exercise-card__icon\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden=\"true\" focusable=\"false\">\n              <path d=\"M12 2L2 7L12 12L22 7L12 2Z\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              <path d=\"M2 17L12 22L22 17\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              <path d=\"M2 12L12 17L22 12\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n          </div>\n          <h3 class=\"exercises__content__main__cards-item-title exercise-card__title\">${exercise.name}</h3>\n        </div>\n        <ul class=\"exercises__content__main__cards-item-footer exercise-card__meta\">\n          <li class=\"exercises__content__main__cards-item-info exercise-card__meta-item\">\n            <span class=\"exercises__content__main__cards-item-info-label exercise-card__meta-label\">Burned calories:</span>\n            <span class=\"exercises__content__main__cards-item-info-value exercise-card__meta-value\">${burnedCalories}</span>\n            <span class=\"exercises__content__main__cards-item-info-label exercise-card__meta-label\">/ ${time} min</span>\n          </li>\n          <li class=\"exercises__content__main__cards-item-info exercise-card__meta-item\">\n            <span class=\"exercises__content__main__cards-item-info-label exercise-card__meta-label\">Body part:</span>\n            <span class=\"exercises__content__main__cards-item-info-value exercise-card__meta-value\">${bodyPart}</span>\n          </li>\n          <li class=\"exercises__content__main__cards-item-info exercise-card__meta-item\">\n            <span class=\"exercises__content__main__cards-item-info-label exercise-card__meta-label\">Target:</span>\n            <span class=\"exercises__content__main__cards-item-info-value exercise-card__meta-value\">${target}</span>\n          </li>\n        </ul>\n        ${removeButtonHTML}\n      </article>\n    </li>\n  `;\n}\n\nfunction renderCategoryCards(categories) {\n  const cardsContainer = getCardsContainer();\n  if (!cardsContainer) return;\n\n  cardsContainer.classList.remove(\n    'exercises__content__main__cards--exercises',\n    'exercise-cards--exercises'\n  );\n  cardsContainer.innerHTML = categories.map(createCategoryCard).join('');\n}\n\nfunction renderExerciseCards(exercises) {\n  const cardsContainer = getCardsContainer();\n  if (!cardsContainer) return;\n\n  cardsContainer.classList.add(\n    'exercises__content__main__cards--exercises',\n    'exercise-cards--exercises'\n  );\n  cardsContainer.innerHTML = exercises.map(createExerciseCard).join('');\n}\n\nfunction renderEmptyState(message) {\n  const cardsContainer = getCardsContainer();\n  if (!cardsContainer) return;\n\n  cardsContainer.classList.add(\n    'exercises__content__main__cards--exercises',\n    'exercise-cards--exercises'\n  );\n  cardsContainer.innerHTML = `\n    <li class=\"exercises__content__main__empty-state\">\n      <p class=\"exercises__content__main__empty-state-text\">\n        ${message}\n      </p>\n    </li>\n  `;\n}\n\nfunction renderCategoriesEmptyState() {\n  renderEmptyState('Unfortunately, no categories were found for this filter.');\n}\n\nfunction renderExercisesEmptyState() {\n  renderEmptyState(\n    'Unfortunately, no results were found. You may want to consider other search options.'\n  );\n}\n\nfunction renderFavoritesEmptyState() {\n  renderEmptyState(\n    \"It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.\"\n  );\n}\n\nfunction renderCategoryResponse(data, page) {\n  const categories = data?.results || data?.exercises || data || [];\n  const totalPages =\n    data?.totalPages || data?.total_pages || data?.pageCount || 1;\n\n  updateBreadcrumbs(null);\n\n  if (Array.isArray(categories) && categories.length > 0) {\n    renderCategoryCards(categories);\n    renderPagination(totalPages, page);\n  } else {\n    renderCategoriesEmptyState();\n    renderPagination(1, 1);\n  }\n}\n\nfunction renderExercisesResponse(data, page, categoryName) {\n  const exercises = data?.results || [];\n  const totalPages = data?.totalPages || 1;\n\n  updateBreadcrumbs(categoryName);\n\n  if (Array.isArray(exercises) && exercises.length > 0) {\n    renderExerciseCards(exercises);\n    renderPagination(totalPages, page);\n  } else {\n    renderExercisesEmptyState();\n    renderPagination(1, 1);\n  }\n}\n\nfunction renderPagination(totalPages, page = 1) {\n  const paginationContainer = getPaginationContainer();\n  if (!paginationContainer) {\n    return;\n  }\n\n  paginationContainer.innerHTML = '';\n  paginationContainer.setAttribute('role', 'navigation');\n  paginationContainer.setAttribute('aria-label', 'Pagination');\n\n  if (totalPages <= 1) {\n    return;\n  }\n\n  const fragment = document.createDocumentFragment();\n\n  const goToPage = pageNumber => {\n    currentPage = pageNumber;\n    if (currentCategory) {\n      loadExercisesByCategory(currentCategory, pageNumber, currentSearchKeyword);\n    } else {\n      loadExerciseCards(currentFilter, pageNumber);\n    }\n  };\n\n  const createArrowButton = (label, disabled, onClick) => {\n    const button = document.createElement('button');\n    button.className = 'exercises__content__pagination-arrow';\n    button.type = 'button';\n    button.innerHTML = label;\n    button.disabled = disabled;\n    button.addEventListener('click', onClick);\n    return button;\n  };\n\n  fragment.appendChild(\n    createArrowButton('&laquo;', page === 1, () => goToPage(1))\n  );\n  fragment.appendChild(\n    createArrowButton('&lsaquo;', page === 1, () => goToPage(page - 1))\n  );\n\n  const createPageButton = pageNumber => {\n    const pageButton = document.createElement('button');\n    pageButton.className = 'exercises__content__pagination-page';\n    pageButton.type = 'button';\n    pageButton.textContent = pageNumber;\n\n    if (pageNumber === page) {\n      pageButton.classList.add('exercises__content__pagination-page--active');\n      pageButton.setAttribute('aria-current', 'page');\n    }\n\n    pageButton.addEventListener('click', () => goToPage(pageNumber));\n    return pageButton;\n  };\n\n  if (totalPages <= 5) {\n    for (let i = 1; i <= totalPages; i++) {\n      fragment.appendChild(createPageButton(i));\n    }\n  } else {\n    fragment.appendChild(createPageButton(1));\n    fragment.appendChild(createPageButton(2));\n    fragment.appendChild(createPageButton(3));\n\n    const ellipsis = document.createElement('span');\n    ellipsis.className = 'exercises__content__pagination-ellipsis';\n    ellipsis.textContent = '...';\n    fragment.appendChild(ellipsis);\n\n    fragment.appendChild(createPageButton(totalPages - 1));\n    fragment.appendChild(createPageButton(totalPages));\n  }\n\n  fragment.appendChild(\n    createArrowButton('&rsaquo;', page === totalPages, () => goToPage(page + 1))\n  );\n  fragment.appendChild(\n    createArrowButton('&raquo;', page === totalPages, () => goToPage(totalPages))\n  );\n\n  paginationContainer.appendChild(fragment);\n}\n\nexport async function loadExerciseCards(filter, page = 1) {\n  if (currentMode === 'favorites') {\n    return;\n  }\n\n  const filtersLimit = getFiltersLimit();\n  setActiveFilter(filter);\n  currentPage = page;\n  currentCategory = null;\n  currentSearchKeyword = '';\n\n  hideSearchField();\n  cancelRequest(requestState.exercises);\n\n  const { controller, requestId } = beginRequest(requestState.filters);\n  const cached = getFiltersCache(filter, page, filtersLimit);\n\n  if (cached) {\n    renderCategoryResponse(cached, page);\n    if (isLatestRequest(requestState.filters, requestId)) {\n      setCardsBusy(false);\n    }\n    return;\n  }\n\n  setCardsBusy(true);\n\n  try {\n    const data = await getFilters({\n      filter,\n      page,\n      limit: filtersLimit,\n      signal: controller.signal,\n    });\n\n    if (!isLatestRequest(requestState.filters, requestId)) {\n      return;\n    }\n\n    if (currentMode === 'favorites') {\n      return;\n    }\n\n    setFiltersCache(filter, page, filtersLimit, data);\n    renderCategoryResponse(data, page);\n  } catch (error) {\n    if (!isLatestRequest(requestState.filters, requestId) || isAbortError(error)) {\n      return;\n    }\n\n    updateBreadcrumbs(null);\n    renderCategoriesEmptyState();\n    renderPagination(1, 1);\n    showGlobalNotification(\n      error.message || 'Failed to load categories.',\n      'error'\n    );\n  } finally {\n    if (isLatestRequest(requestState.filters, requestId)) {\n      setCardsBusy(false);\n    }\n  }\n}\n\nexport async function loadExercisesByCategory(\n  categoryName,\n  page = 1,\n  keyword = currentSearchKeyword\n) {\n  if (currentMode === 'favorites') {\n    return;\n  }\n\n  const exercisesLimit = getExercisesLimit();\n  currentCategory = categoryName;\n  currentPage = page;\n  currentSearchKeyword = keyword?.trim() || '';\n\n  showSearchField();\n  cancelRequest(requestState.filters);\n\n  const paramName = FILTER_PARAM_MAP[currentFilter] || 'muscles';\n  const cacheKey = `${paramName}:${categoryName}:${page}:${exercisesLimit}:${currentSearchKeyword}`;\n\n  const { controller, requestId } = beginRequest(requestState.exercises);\n  const cached = getExercisesCache(cacheKey);\n\n  if (cached) {\n    renderExercisesResponse(cached, page, categoryName);\n    if (isLatestRequest(requestState.exercises, requestId)) {\n      setCardsBusy(false);\n    }\n    return;\n  }\n\n  setCardsBusy(true);\n\n  try {\n    const data = await getExercises({\n      [paramName]: categoryName,\n      page,\n      limit: exercisesLimit,\n      keyword: currentSearchKeyword,\n      signal: controller.signal,\n    });\n\n    if (!isLatestRequest(requestState.exercises, requestId)) {\n      return;\n    }\n\n    if (currentMode === 'favorites') {\n      return;\n    }\n\n    setExercisesCache(cacheKey, data);\n    renderExercisesResponse(data, page, categoryName);\n  } catch (error) {\n    if (\n      !isLatestRequest(requestState.exercises, requestId) ||\n      isAbortError(error)\n    ) {\n      return;\n    }\n\n    renderExercisesEmptyState();\n    renderPagination(1, 1);\n    showGlobalNotification(\n      error.message || 'Failed to load exercises.',\n      'error'\n    );\n  } finally {\n    if (isLatestRequest(requestState.exercises, requestId)) {\n      setCardsBusy(false);\n    }\n  }\n}\n\nexport function initSearch() {\n  const searchForm = getSearchForm();\n  const searchInput = getSearchInput();\n\n  if (!searchForm || !searchInput) {\n    return;\n  }\n\n  searchForm.addEventListener('submit', event => {\n    event.preventDefault();\n\n    if (!currentCategory || currentMode === 'favorites') {\n      return;\n    }\n\n    const keyword = searchInput.value.trim();\n    loadExercisesByCategory(currentCategory, 1, keyword);\n  });\n}\n\nexport async function loadFavoritesExercises() {\n  const favoriteIds = getFavorites();\n  const paginationContainer = getPaginationContainer();\n\n  updateBreadcrumbs(null);\n\n  if (paginationContainer) {\n    paginationContainer.innerHTML = '';\n  }\n\n  if (favoriteIds.length === 0) {\n    cancelRequest(requestState.favorites);\n    renderFavoritesEmptyState();\n    return;\n  }\n\n  const { controller, requestId } = beginRequest(requestState.favorites);\n  setCardsBusy(true);\n\n  try {\n    const results = await Promise.allSettled(\n      favoriteIds.map(id =>\n        getExerciseById(id, { signal: controller.signal })\n      )\n    );\n\n    if (\n      !isLatestRequest(requestState.favorites, requestId) ||\n      currentMode !== 'favorites'\n    ) {\n      return;\n    }\n\n    const validExercises = results\n      .filter(result => result.status === 'fulfilled' && result.value)\n      .map(result => result.value);\n\n    if (validExercises.length > 0) {\n      renderExerciseCards(validExercises);\n    } else {\n      renderFavoritesEmptyState();\n    }\n  } catch (error) {\n    if (\n      !isLatestRequest(requestState.favorites, requestId) ||\n      isAbortError(error)\n    ) {\n      return;\n    }\n    renderFavoritesEmptyState();\n    showGlobalNotification(\n      error.message || 'Failed to load favorite exercises.',\n      'error'\n    );\n  } finally {\n    if (isLatestRequest(requestState.favorites, requestId)) {\n      setCardsBusy(false);\n    }\n  }\n}\n\nexport function initCardsEventListener() {\n  const cardsContainer = getCardsContainer();\n\n  if (!cardsContainer) {\n    return;\n  }\n\n  cardsContainer.addEventListener('click', event => {\n    const removeButton = event.target.closest('[data-action=\"remove-favorite\"]');\n    if (removeButton) {\n      event.preventDefault();\n      const card = removeButton.closest('[data-exercise-id]');\n      const exerciseId = card?.getAttribute('data-exercise-id');\n\n      if (exerciseId) {\n        removeFromFavorites(exerciseId);\n\n        if (currentMode === 'favorites') {\n          const listItem = removeButton.closest('li');\n          if (listItem) {\n            listItem.remove();\n          }\n\n          if (!getCardsContainer()?.children.length) {\n            renderFavoritesEmptyState();\n          }\n        }\n      }\n      return;\n    }\n\n    const categoryButton = event.target.closest('[data-action=\"open-category\"]');\n    if (categoryButton) {\n      const categoryName = categoryButton.getAttribute('data-category-name');\n      if (categoryName) {\n        loadExercisesByCategory(categoryName, 1);\n      }\n      return;\n    }\n\n    const openButton = event.target.closest('[data-action=\"open-exercise\"]');\n    if (openButton) {\n      const card = openButton.closest('[data-exercise-id]');\n      const exerciseId = card?.getAttribute('data-exercise-id');\n      if (exerciseId) {\n        openExerciseModal(exerciseId);\n      }\n    }\n  });\n}\n\nexport function switchToHome() {\n  currentMode = 'home';\n  currentCategory = null;\n  currentSearchKeyword = '';\n  cancelRequest(requestState.favorites);\n\n  const contentContainer = getContentContainer();\n  if (contentContainer) {\n    contentContainer.classList.remove('exercises__content--favorites');\n  }\n\n  loadExerciseCards(currentFilter, 1);\n}\n\nexport function switchToFavorites() {\n  currentMode = 'favorites';\n  currentCategory = null;\n  currentSearchKeyword = '';\n\n  hideSearchField();\n  cancelRequest(requestState.filters);\n  cancelRequest(requestState.exercises);\n  setCardsBusy(false);\n\n  const contentContainer = getContentContainer();\n  if (contentContainer) {\n    contentContainer.classList.add('exercises__content--favorites');\n  }\n\n  loadFavoritesExercises();\n}\n\nexport function getCurrentFilter() {\n  return currentFilter;\n}\n\nexport function setFilter(filter) {\n  setActiveFilter(filter);\n}\n\nexport function getCurrentMode() {\n  return currentMode;\n}\n","import { getQuote } from '../api.js';\nimport { showGlobalNotification } from './global-notification.js';\n\nconst QUOTE_KEY = 'your-energy:quote';\nconst LEGACY_QUOTE_KEYS = {\n  text: 'quote-text',\n  author: 'quote-author',\n  date: 'quote-date',\n};\n\n// Helper function to get today's date in YYYY-MM-DD format\nfunction getTodayDate() {\n  const today = new Date();\n  const year = today.getFullYear();\n  const month = String(today.getMonth() + 1).padStart(2, '0');\n  const day = String(today.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\nfunction safeJsonParse(value, fallback) {\n  if (!value) {\n    return fallback;\n  }\n  try {\n    return JSON.parse(value);\n  } catch (error) {\n    return fallback;\n  }\n}\n\nfunction loadQuote() {\n  try {\n    const stored = safeJsonParse(localStorage.getItem(QUOTE_KEY), null);\n    if (stored && typeof stored === 'object' && stored.quote && stored.author) {\n      return stored;\n    }\n\n    const legacyQuote = {\n      quote: localStorage.getItem(LEGACY_QUOTE_KEYS.text),\n      author: localStorage.getItem(LEGACY_QUOTE_KEYS.author),\n      date: localStorage.getItem(LEGACY_QUOTE_KEYS.date),\n    };\n\n    if (legacyQuote.quote && legacyQuote.author) {\n      saveQuote(legacyQuote);\n      localStorage.removeItem(LEGACY_QUOTE_KEYS.text);\n      localStorage.removeItem(LEGACY_QUOTE_KEYS.author);\n      localStorage.removeItem(LEGACY_QUOTE_KEYS.date);\n      return legacyQuote;\n    }\n\n    return null;\n  } catch (error) {\n    return null;\n  }\n}\n\nfunction saveQuote(quote) {\n  try {\n    localStorage.setItem(QUOTE_KEY, JSON.stringify(quote));\n    localStorage.removeItem(LEGACY_QUOTE_KEYS.text);\n    localStorage.removeItem(LEGACY_QUOTE_KEYS.author);\n    localStorage.removeItem(LEGACY_QUOTE_KEYS.date);\n  } catch (error) {\n    // Ignore write errors to keep UX responsive.\n  }\n}\n\n// Function to load quote data with caching logic\nasync function loadQuoteOfTheDay() {\n  const cachedQuote = loadQuote();\n  const todayDate = getTodayDate();\n\n  if (\n    cachedQuote &&\n    cachedQuote.quote &&\n    cachedQuote.author &&\n    cachedQuote.date === todayDate\n  ) {\n    return { quote: cachedQuote.quote, author: cachedQuote.author };\n  }\n\n  // Fetch new quote from API\n  try {\n    const data = await getQuote();\n    const nextQuote = {\n      quote: data?.quote,\n      author: data?.author,\n      date: todayDate,\n    };\n\n    if (nextQuote.quote && nextQuote.author) {\n      saveQuote(nextQuote);\n    }\n\n    // Return the quote data\n    return { quote: data?.quote, author: data?.author };\n  } catch (error) {\n    // If fetch fails but we have cached data, use it\n    if (cachedQuote?.quote && cachedQuote?.author) {\n      return { quote: cachedQuote.quote, author: cachedQuote.author };\n    }\n\n    // Return null if no data available\n    if (!cachedQuote?.quote || !cachedQuote?.author) {\n      showGlobalNotification('Failed to load quote of the day.', 'error');\n    }\n    return null;\n  }\n}\n\n// Function to display quote in DOM\nexport async function displayQuote() {\n  const quoteData = await loadQuoteOfTheDay();\n\n  if (!quoteData) {\n    return;\n  }\n\n  const quoteTextElement = document.getElementById('js-exercises-quote-text');\n  const quoteAuthorElement = document.getElementById(\n    'js-exercises-quote-author'\n  );\n\n  if (quoteTextElement) {\n    quoteTextElement.textContent = quoteData.quote;\n  }\n\n  if (quoteAuthorElement) {\n    quoteAuthorElement.textContent = quoteData.author;\n  }\n}\n","import {\n  switchToHome,\n  switchToFavorites,\n  initSearch,\n  initCardsEventListener,\n  initFilters,\n} from './js/exercises.js';\nimport { initExerciseModal } from './js/exercise-modal.js';\nimport { initRatingModal } from './js/rating-modal.js';\nimport {\n  initGlobalNotification,\n  showGlobalNotification,\n} from './js/global-notification.js';\nimport {\n  showFieldError,\n  hideFieldError,\n  validateEmail,\n} from './js/form-validation.js';\nimport { initHeader } from './js/header.js';\nimport { displayQuote } from './js/quote.js';\nimport { postSubscription } from './api.js';\n\n// Початкове завантаження та ініціалізація\ndocument.addEventListener('DOMContentLoaded', () => {\n  // Load and display quote of the day\n  displayQuote();\n  // Ініціалізація модалок\n  initExerciseModal();\n  initRatingModal();\n\n  // Ініціалізація глобальних повідомлень\n  initGlobalNotification();\n\n  // Ініціалізація хедера\n  initHeader();\n\n  // Ініціалізація пошуку\n  initSearch();\n\n  // Ініціалізація слухача подій на контейнері карток (event delegation)\n  initCardsEventListener();\n\n  // Ініціалізація фільтрів\n  initFilters();\n\n  const initialPage = document.body?.dataset.page || 'home';\n  if (initialPage === 'favorites') {\n    switchToFavorites();\n  } else {\n    switchToHome();\n  }\n\n  // Обробка форми підписки\n  const subscribeForm = document.getElementById('subscribeForm');\n  const subscribeEmailInput = document.getElementById(\n    'footer-subscribe-email'\n  );\n  const subscribeEmailError = document.getElementById('subscribeEmailError');\n\n  // Clear error on input\n  if (subscribeEmailInput && subscribeEmailError) {\n    subscribeEmailInput.addEventListener('input', () => {\n      hideFieldError(subscribeEmailInput, subscribeEmailError);\n    });\n  }\n\n  if (subscribeForm) {\n    subscribeForm.addEventListener('submit', async e => {\n      e.preventDefault();\n\n      const email = subscribeEmailInput?.value.trim() || '';\n      let hasErrors = false;\n\n      // Validate email\n      if (!email) {\n        showFieldError(\n          subscribeEmailInput,\n          subscribeEmailError,\n          'Please enter your email address'\n        );\n        hasErrors = true;\n      } else if (!validateEmail(email)) {\n        showFieldError(\n          subscribeEmailInput,\n          subscribeEmailError,\n          'Please enter a valid email address'\n        );\n        hasErrors = true;\n      } else {\n        hideFieldError(subscribeEmailInput, subscribeEmailError);\n      }\n\n      // Stop if there are errors\n      if (hasErrors) {\n        return;\n      }\n\n      try {\n        const data = await postSubscription(email);\n        showGlobalNotification(\n          data?.message || 'Subscription successful.',\n          'success'\n        );\n        subscribeForm.reset();\n        hideFieldError(subscribeEmailInput, subscribeEmailError);\n      } catch (error) {\n        showGlobalNotification(error.message || 'Failed to subscribe.', 'error');\n      }\n    });\n  }\n});\n"],"names":["notificationTimeout","showGlobalNotification","message","type","notification","textElement","hideGlobalNotification","initGlobalNotification","closeBtn","showFieldError","inputElement","errorElement","errorClass","hideFieldError","validateEmail","email","MODAL_IDS","SCROLL_LOCK_KEY","lockBodyScroll","body","count","unlockBodyScroll","getModalOpenClass","modalId","getModalBackdrop","modal","openModal","openClass","backdrop","event","closeModal","handleEscape","e","wasOpen","currentExerciseIdForRating","showServerMessage","messageElement","hideServerMessage","closeRatingModal","resetRatingForm","openRatingModal","exerciseId","showRatingModal","initRatingStars","ratingForm","ratingValue","stars","star","svg","path","emailInput","emailError","commentTextarea","commentError","ratingError","starsContainer","selectedRating","s","isActive","hoverRating","getCurrentRating","maxRating","rating","initRatingModal","ratingModalCloseBtn","hasErrors","review","response","data","exerciseName","error","errorMessage","FAVORITES_KEY","LEGACY_FAVORITES_KEY","safeJsonParse","value","fallback","loadFavorites","stored","favorites","id","legacy","saveFavorites","normalized","getFavorites","addToFavorites","removeFromFavorites","isFavorite","toggleFavorite","PAGE","FAVORITES_PATH","currentPage","mobileMenu","burgerButton","closeButton","isMenuOpen","getPageFromLocation","bodyPage","_a","setActiveLinks","page","link","openMobileMenu","handleMenuKeydown","closeMobileMenu","toggleMobileMenu","initHeader","getCurrentPage","EXERCISE_MODAL_ID","SPRITE_PATH","FAVORITE_TEXT_ADD","FAVORITE_TEXT_REMOVE","FAVORITE_CLASS","closeExerciseModal","renderExerciseModal","exercise","image","title","ratingStars","target","bodyPart","equipment","popular","calories","time","description","rounded","index","openExerciseModal","updateFavoriteButton","ratingBtn","newRatingBtn","renderFavoriteButtonState","button","isInFavorites","label","iconUse","favoriteBtn","initExerciseModal","modalCloseBtn","wasAdded","loadFavoritesExercises","BASE_URL","DEFAULT_TIMEOUT_MS","buildUrl","params","normalizedPath","url","searchParams","key","query","fetchJson","signal","timeoutMs","options","controller","headers","hasBody","didTimeout","timeoutId","timeoutError","contentType","dataSnippet","getQuote","getFilters","filter","limit","getExercises","getExerciseById","postSubscription","currentFilter","currentCategory","currentSearchKeyword","currentMode","TABLET_MIN_WIDTH","FILTER_PARAM_MAP","filtersCache","exercisesCache","requestState","getCardsContainer","getPaginationContainer","getSearchForm","getSearchInput","getHeading","getBreadcrumbs","getContentContainer","beginRequest","state","cancelRequest","isLatestRequest","requestId","isAbortError","isTabletViewport","getFiltersLimit","getExercisesLimit","getFiltersCache","filterCache","setFiltersCache","getExercisesCache","setExercisesCache","setCardsBusy","isBusy","cardsContainer","showSearchField","searchField","hideSearchField","searchInput","formatCategoryLabel","trimmed","createBreadcrumbEntry","node","entry","updateHeadingLabel","heading","updateBreadcrumbs","categoryName","breadcrumbsContainer","favoritesTitle","exercisesTitle","categoryLabel","exercisesBtn","loadExerciseCards","separator","categorySpan","setActiveFilter","initFilters","filterButtons","createCategoryCard","category","categoryFilter","imageUrl","createExerciseCard","burnedCalories","removeButtonHTML","renderCategoryCards","categories","renderExerciseCards","exercises","renderEmptyState","renderCategoriesEmptyState","renderExercisesEmptyState","renderFavoritesEmptyState","renderCategoryResponse","totalPages","renderPagination","renderExercisesResponse","paginationContainer","fragment","goToPage","pageNumber","loadExercisesByCategory","createArrowButton","disabled","onClick","createPageButton","pageButton","i","ellipsis","filtersLimit","cached","keyword","exercisesLimit","paramName","cacheKey","initSearch","searchForm","favoriteIds","results","validExercises","result","initCardsEventListener","removeButton","card","listItem","categoryButton","openButton","switchToHome","contentContainer","switchToFavorites","QUOTE_KEY","LEGACY_QUOTE_KEYS","getTodayDate","today","year","month","day","loadQuote","legacyQuote","saveQuote","quote","loadQuoteOfTheDay","cachedQuote","todayDate","nextQuote","displayQuote","quoteData","quoteTextElement","quoteAuthorElement","subscribeForm","subscribeEmailInput","subscribeEmailError"],"mappings":"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"}